{"version":3,"sources":["images/carback.jpg","components/SidebarBoxContainer/index.js","components/TaskDescriptionSidebarBox/index.js","components/ImageSelectorSidebarBox/index.js","components/RegionSelectorSidebarBox/styles.js","components/RegionSelectorSidebarBox/index.js","components/HistorySidebarBox/index.js","components/DebugSidebarBox/index.js","components/TagsSidebarBox/index.js","components/KeyframeTimeline/get-time-string.js","components/KeyframesSelectorSidebarBox/index.js","components/Shortcuts/ShortcutField.js","components/PreventScrollToParents/index.js","components/Preview/index.js","components/Metadata/index.js","components/Sidebar/ind.js","components/Crosshairs/index.js","components/RegionLabel/styles.js","components/RegionLabel/index.js","components/HighlightBox/index.js","components/hooks/use-window-size.js","components/ImageCanvas/use-mouse.js","components/ImageCanvas/use-project-box.js","components/ImageCanvas/region-tools.js","components/PointDistances/index.js","components/RegionTags/index.js","components/RegionSelectAndTransformBoxes/index.js","components/SettingsProvider/index.js","components/VideoOrImageCanvasBackground/index.js","components/ImageCanvas/index.js","components/ImageCanvas/styles.js","components/hooks/use-exclude-pattern.js","components/hooks/xpattern.js","components/HeaderButton/index.js","components/Header/styles.js","components/KeyframeTimeline/index.js","components/Header/index.js","components/SmallToolButton/index.js","components/IconTools/index.js","components/MainLayout/styles.js","components/SettingsDialog/index.js","components/Fullscreen/index.js","components/Annotator/reducers/get-active-image.js","components/Annotator/reducers/get-implied-video-regions.js","components/MainLayout/use-implied-video-regions.js","components/MainLayout/ind.js","components/Annotator/reducers/history-handler.js","components/Annotator/reducers/general-reducer.js","components/Annotator/reducers/image-reducer.js","components/Annotator/reducers/video-reducer.js","components/Loader/Loader.js","components/Annotator/ind.js","components/Annotator/reducers/combine-reducers.js","components/MainPage/mainpage.js","components/MainPage/navbar.js","components/ErrorBoundary/ErrorBoundary.js","components/MainPage/home.js","components/Authentication/forgot-password.js","components/Authentication/ResetPassword.js","components/Authentication/signup.js","Routes.js","components/Authentication/signin.js","App.js","index.js","images/logo.png"],"names":["module","exports","__webpack_require__","p","useStyles","makeStyles","container","margin","header","display","flexDirection","alignItems","padding","paddingLeft","paddingRight","title","fontSize","fontWeight","flexGrow","color","grey","& span","expandButton","width","height","& .icon","marginTop","transition","&.expanded","transform","expandedContent","maxHeight","overflowY","&.noScroll","overflow","memo","_ref","icon","subTitle","children","_ref$noScroll","noScroll","_ref$expandedByDefaul","expandedByDefault","classes","content","react_default","a","createElement","className","classnames","_useState","useState","_useState2","Object","slicedToArray","expanded","changeExpanded","toggleExpanded","useEventCallback","Paper","IconButton","onClick","ExpandMore_default","Collapse","in","prev","next","MarkdownContainer","styled","& h1","& h2","& h3","& h4","& h5","& h6","& p","& a","& img","description","components_SidebarBoxContainer","Description_default","style","react_markdown_default","source","img","borderRadius","mapUsedImageProps","name","regions","length","src","images","onSelect","concat","Collections_default","List","map","i","ListItem","button","dense","key","ListItemText","primary","secondary","prevProps","nextProps","isEqual","styles","& .icon2","opacity","&:hover","cursor","row","&.header:hover","backgroundColor","&.highlighted","blue","chip","& .color","marginRight","& .text","HeaderSep","borderTop","marginBottom","Chip","text","RowLayout","_ref2","highlighted","order","classification","area","trash","tags","lock","visible","changeMouseOver","onMouseEnter","onMouseLeave","Grid","item","xs","textAlign","MemoRowHeader","RegionSelectorSidebarBox_RowLayout","SwapVert_default","PieChart_default","Delete_default","Lock_default","Visibility_default","MemoRow","_ref3","r","region","onSelectRegion","onDeleteRegion","onChangeRegion","locked","cls","index","RegionSelectorSidebarBox_Chip","objectSpread","LockOpen_default","undefined","VisibilityOff_default","id","mapUsedRegionProperties","_ref4","PictureInPicture_default","assign","emptyText","history","onRestoreHistory","History_default","time","moment","format","ListItemSecondaryAction","Undo_default","DebugSidebarBox","state","lastAction","image","find","selectedImage","JSON","stringify","mode","selectedImageFrameTime","emptyArr","currentImage","_ref$imageClsList","imageClsList","_ref$imageTagList","imageTagList","onChangeImage","_currentImage$tags","_currentImage$cls","onChangeClassification","o","value","onChangeTags","selectValue","useMemo","label","memoImgClsList","asMutable","c","memoImgTagList","memoCurrentTags","Style_default","react_select_browser_esm","placeholder","onChange","options","paddingTop","isMulti","getTimeString","ms","precision","arguments","secs","Number","isInteger","toFixed","mins","KeyframeRow","colors","&.current","& .time","& .regionCount","marginLeft","& .trash","KeyframesSelector","currentVideoTime","keyframes","onChangeVideoTime","onDeleteKeyframe","keyframeTimes","keys","t","parseInt","AddLocation_default","fullWidth","e","stopPropagation","shortcutKeyFieldWrapper","shortcutKeyText","lineHeight","shortcutTextfield","boxSizing","Container","& > div","PreventScrollToParents","otherProps","objectWithoutProperties","mouseOver","onMouseMove","setTimeout","Combination","enabled","removeScrollBar","Preview","handlePreview","previewImages","RateReview_default","MetaData","allowed_metadata","metadata","climate","road","time_of_day","type","no_of_lanes","currentTarget","no_of_classes","Sidebar","preview","previewList","debug","taskDescription","labelImages","onChangeMetadata","onSelectImage","onShortcutActionDispatched","Metadata_MetaData","Preview_Preview","components_DebugSidebarBox","components_TagsSidebarBox","components_ImageSelectorSidebarBox","components_RegionSelectorSidebarBox","components_HistorySidebarBox","KeyframesSelectorSidebarBox","Crosshairs","mousePosition","x","y","changeForceRenderState","current","useEffect","interval","setInterval","clearInterval","react","position","zIndex","left","pointerEvents","top","RegionLabel_styles","regionInfo","& .name","& .circle","boxShadow","& .tags","& .tag","textDecoration","editing","allowedClasses","allowedTags","onDelete","onClose","onOpen","onKeyPress","onKeyDown","onKeyUp","textShadow","tabIndex","size","variant","newTags","Button","Check_default","@keyframes borderDance","from","strokeDashoffset","to","highlightBox","&:not(.highlighted)","&:not(.highlighted):hover","& path","vectorEffect","strokeWidth","stroke","fill","strokeDasharray","animationName","animationDuration","animationTimingFunction","animationIterationCount","animationPlayState","HighlightBox","mouseEvents","dragWithPrimary","zoomWithPrimary","createWithPrimary","onBeginMovePoint","pbox","onMouseDown","w","h","d","useWindowSize","initialWidth","Infinity","initialHeight","isClient","window","_useRafState","useRafState","innerWidth","innerHeight","_useRafState2","setState","handler","addEventListener","removeEventListener","useInterval","use_mouse","canvasEl","changeMat","changeDragging","zoomStart","changeZoomStart","zoomEnd","changeZoomEnd","layoutParams","mat","onMouseUp","dragging","useRef","prevMousePosition","zoomIn","direction","point","mx","my","scale","translate","scaleU","clone","_canvasEl$current$get","getBoundingClientRect","clientX","clientY","projMouse","applyToPoint","_layoutParams$current","iw","ih","preventDefault","specialEvent","_layoutParams$current2","Math","abs","_layoutParams$current3","min","newMat","Matrix","_layoutParams$current4","onWheel","deltaY","use_project_box","bbox","box","apply","toConsumableArray","points","max","_ref5","_ref6","_ref7","_ref8","sx","sy","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","Error","getEnclosingBox","cbox","inverse","Svg","& text","PointDistances","projectRegionBox","pointDistancePrecision","realSize","filter","r1","flatMap","i1","r2","i2","displayDistance","pr1","pr2","prm","unitName","sqrt","pow","RegionTags","regionClsList","regionTagList","onBeginRegionEdit","onCloseRegionEdit","imageSrc","RegionEditLabel","RegionLabel","DefaultRegionLabel","labelBoxHeight","editingLabels","displayOnTop","coords","bottom","paddingBottom","obj","newObj","_len","args","Array","_key","_i","_args","copyWithout","TransformGrabber","border","boxCursorMap","RegionSelectAndTransformBoxes","onBeginBoxTransform","onBeginMovePolygonPoint","onAddPolygonPoint","components_PreventScrollToParents","components_HighlightBox","px","py","proj","open","p1","p2","pa","SettingsContext","createContext","showCrosshairs","useSettings","useContext","SettingsProvider","localStorage","settings","startsWith","replace","parse","getItem","pullSettingsFromLocalStorage","changeState","Provider","changeSetting","setting","defineProperty","setItem","Video","StyledImage","VideoOrImageCanvasBackground","imagePosition","videoTime","videoSrc","onLoad","videoPlaying","onChangeVideoPlaying","videoRef","imageRef","currentTime","renderLoopRunning","play","videoPlaybackSpeed","playbackRate","parseFloat","pause","checkForNewFrame","newVideoTime","floor","paused","requestAnimationFrame","onLoadedVideoMetadata","event","videoElm","naturalWidth","videoWidth","naturalHeight","videoHeight","duration","onImageLoaded","imageElm","stylePosition","bottomRight","topLeft","isNaN","ref","onLoadedMetadata","canvas","zoomIndicator","right","ImageCanvas","showTags","_ref$onMouseMove","_ref$onMouseDown","_ref$onMouseUp","_ref$dragWithPrimary","_ref$zoomWithPrimary","_ref$createWithPrimar","_ref$pointDistancePre","showPointDistances","allowedArea","_ref$RegionEditLabel","_ref$videoPlaying","onImageOrVideoLoaded","_useRafState3","_useRafState4","maskImagesLoaded","changeMaskImagesLoaded","_useRafState5","_useRafState6","_useRafState7","_useRafState8","_useRafState9","_useRafState10","maskImages","windowSize","_useMouse","useMouse","useLayoutEffect","useProjectRegionBox","imageDimensions","changeImageDimensions","imageLoaded","Boolean","onVideoOrImageLoaded","dims","excludePattern","Image","pattern","document","context","getContext","onload","createPattern","useExcludePattern","clientWidth","clientHeight","fitScale","canvasWidth","canvasHeight","save","toArray","globalAlpha","outer","inner","moveTo","forEach","lineTo","closePath","reverse","fillStyle","restore","lineWidth","shadowColor","shadowBlur","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","beginPath","strokeStyle","arc","PI","strokeRect","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Symbol","iterator","done","err","return","nodeName","drawImage","newCanvas","ctx","imgData","getImageData","data","_imgData$data$slice","slice","_imgData$data$slice2","g","b","black","clearRect","putImageData","_iterator","zoomBox","components_Crosshairs","components_RegionSelectAndTransformBoxes","components_RegionTags","components_PointDistances","Fragment","StyledButton","IconName","HeaderButtonContext","MemoizedHeaderButton","disabled","Icon","HeaderButton","onHeaderButtonClick","Header_styles","flexShrink","fileInfo","&.videoMode","flexMode","minWidth","Tick","TickText","userSelect","PositionCursor","placeItems","fontVariantNumeric","&::before","borderLeft","borderRight","KeyframeMarker","_styled","borderTopLeftRadius","borderTopRightRadius","displayIntervalPairs","KeyframeTimeline","_ref4$currentTime","onChangeCurrentTime","_useMeasure","useMeasure","_useMeasure2","bounds","instantCurrentTime","changeInstantCurrentTime","draggingTime","changeDraggingTime","sort","_useMemo","minor","major","getMajorInterval","_useMemo2","minorInterval","majorInterval","newTime","KeyframeTimeline_Container","range","kt","Header","inFullScreen","videoMode","_ref$nextVideoFrameHa","isAVideoFrame","nextVideoFrameHasRegions","videoDuration","multipleImages","alwaysShowPrevButton","alwaysShowNextButton","annotatemode","headerActions","components_HeaderButton","BackIcon","NextIcon","QueuePlayNextIcon","PauseIcon","PlayIcon","HotkeysIcon","curr_image_index","SettingsIcon","FullscreenIcon","BookmarkIcon","SelectedTool","selected","togglable","_ref$alwaysShowing","alwaysShowing","_useContext","enabledTools","selectedTool","onClickTool","includes","Tooltip","placement","aria-label","iconTools","defaultTools","IconTools","_ref$enabledTools","selectedToolContextValue","components_SmallToolButton","index_es","fixedWidth","faMousePointer","faHandPaper","faSearch","faTag","faCrosshairs","faVectorSquare","faDrawPolygon","faPaintBrush","MainLayout_styles","&.fullscreen","workspace","iconToolsContainer","imageCanvasContainer","justifyContent","noImageSelected","sidebarContainer","SettingsDialog","Dialog","DialogTitle","DialogContent","Survey_default","noActions","defaultAnswers","onQuestionChange","q","answers","form","questions","defaultValue","choices","DialogActions","Fullscreen","props","react_full_screen_dist_default","get_active_image","pathToActiveImage","activeImage","currentImageIndex","annotationType","findIndex","frameTime","getIn","get_implied_video_regions","nextKeyframeTimeIndex","t1","prevKeyframe","t2","nextKeyframe","prevRegionMap","nextRegionMap","impliedRegions","w1","w2","regionId","push","pp","MainLayout_ind","nextImage","dispatch","memoizedActionFns","action","params","fnKey","join","fn","_len2","_key2","reduce","acc","_getActiveImage","getActiveImage","useKey","detectKeys","impliedVideoRegions","_state$currentVideoTi","getImpliedVideoRegions","useImpliedVideoRegions","components_Fullscreen","fullScreen","headerContainer","components_Header","videoName","components_IconTools","ind","$ANNOTATE_DEBUG_MODE","components_SettingsDialog","settingsOpen","buttonName","typesToSaveWithHistory","BEGIN_BOX_TRANSFORM","BEGIN_MOVE_POINT","DELETE_REGION","saveToHistory","updateIn","toDate","without","getRandomId","random","toString","split","getRandomColor","general_reducer","Date","now","lastMouseMoveCall","setIn","getRegionIndex","regionIndex","getRegion","modifyRegion","_getRegion","_getRegion2","unselectRegions","closeEditors","setNewImage","oldRegion","delta","_Object$keys","directions","freedom","original","polygon","pointIndex","splice","_state$mode","moveRegion","_state$mode2","_state$mode2$freedom","xFree","yFree","_state$mode2$original","ox","oy","ow","oh","dx","dw","dy","dh","_getRegion3","_getRegion4","newRegion","aa","editLabelEditorAfter","isNew","_getRegion5","_getRegion6","newRegions","toLowerCase","console","log","some","classlist","image_reducer","video_reducer","copyImpliedRegions","isPlaying","Loader","message","Annotator","_ref$selectedImage","_ref$showTags","_ref$regionTagList","_ref$regionClsList","_ref$keyframes","_ref$videoTime","onExit","onNextImage","onPrevImage","changeAnnotateMode","_ref$metadata","loading","updateRegion","reducer","_useReducer","useReducer","reducers","combineReducers","imageReducer","videoReducer","generalReducer","prevState","nextState","makeImmutable","_useReducer2","dispatchToReducer","components_Loader_Loader","components_SettingsProvider","ImageRender","image_key","call_type","class_list","seg_class","obj_class","dimension","imgHeight","imgWidth","getImageSize","_callee","regenerator_default","wrap","_context","abrupt","Promise","resolve","reject","theImage","stop","titleHandler","error","postImage","_callee2","updated_regions","imgUrl","response","dim","_this$state$dimension","checkList","newCheckList","_context2","_this","annotation","cls_id","indexOf","seg","axios","post","annotations","headers","Authorization","annotate_mode","then","res","swal","buttons","toArrayBuffer","imgFile","Blob","URL","createObjectURL","obj_detect","segmentation","Class_Name","Region","catch","prevImage","_callee3","_context3","t0","_callee4","_context4","checkImage","main_api","get_class","_callee5","project_val","_context5","get","project","meta_data","myBuf","myBuffer","ArrayBuffer","Uint8Array","this","_this2","removeItem","alert","_this$state","Annotator_ind","Component","Navbar","logout","updateUser","loggedIn","username","confirmLogout","dangerMode","willLogout","logo","alt","react_router_dom","ExitToApp_default","withRouter","ErrorBoundary","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","hasError","errorInfo","React","Home","components_ErrorBoundary_ErrorBoundary","navbar","mainpage","react_router","Copyright","Typography","align","Link","href","getFullYear","theme","root","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","paper","spacing","avatar","palette","main","submit","maindiv","car","ForgotPassword","setLoading","_useState3","_useState4","email","setEmail","component","CssBaseline","sm","md","elevation","square","TextField","autoComplete","target","autoFocus","required","Box","mt","ResetPassword","password","confirmPassword","updated","isLoading","handleSubmit","bind","assertThisInitialized","handleChange","token","match","resetPasswordToken","put","_this$state2","onSubmit","htmlFor","SignInSide","setusername","_useState5","_useState6","setpassword","_useState7","_useState8","setConfirmPassword","_useState9","_useState10","redirectTo","setRed","_useState11","_useState12","firstName","setFname","_useState13","_useState14","lastName","setLname","_useState15","_useState16","mobile","setMobile","_useState17","_useState18","pathname","errors","msg","signup_Copyright","Routes","exact","path","Signup","status","signin_Copyright","App","accessString","user","userObject","_this3","render","home","signin","src_Routes","ReactDOM","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.da05a4fe.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/carback.d753e984.jpg\";","// @flow\n\nimport React, { useState, memo } from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport ExpandIcon from \"@material-ui/icons/ExpandMore\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Collapse from \"@material-ui/core/Collapse\"\nimport { grey } from \"@material-ui/core/colors\"\nimport classnames from \"classnames\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles({\n  container: { margin: 8 },\n  header: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    padding: 8,\n    paddingLeft: 16,\n    paddingRight: 16\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    flexGrow: 1,\n    paddingLeft: 8,\n    color: grey[800],\n    \"& span\": {\n      color: grey[600],\n      fontSize: 12\n    }\n  },\n  expandButton: {\n    padding: 0,\n    width: 30,\n    height: 30,\n    \"& .icon\": {\n      marginTop: -6,\n      width: 20,\n      height: 20,\n      transition: \"500ms transform\",\n      \"&.expanded\": {\n        transform: \"rotate(180deg)\"\n      }\n    }\n  },\n  expandedContent: {\n    maxHeight: 300,\n    overflowY: \"auto\",\n    \"&.noScroll\": {\n      overflowY: \"visible\",\n      overflow: \"visible\"\n    }\n  }\n})\n\nexport const SidebarBoxContainer = ({\n  icon,\n  title,\n  subTitle,\n  children,\n  noScroll = false,\n  expandedByDefault = false\n}) => {\n  const classes = useStyles()\n  const content = (\n    <div\n      className={classnames(classes.expandedContent, noScroll && \"noScroll\")}\n    >\n      {children}\n    </div>\n  )\n\n  const [expanded, changeExpanded] = useState(expandedByDefault)\n  const toggleExpanded = useEventCallback(() => changeExpanded(!expanded))\n  return (\n    <Paper className={classes.container}>\n      <div className={classes.header}>\n        {icon}\n        <div className={classes.title}>\n          {title} <span>{subTitle}</span>\n        </div>\n        <IconButton onClick={toggleExpanded} className={classes.expandButton}>\n          <ExpandIcon className={classnames(\"icon\", expanded && \"expanded\")} />\n        </IconButton>\n      </div>\n      {noScroll ? (\n        expanded ? (\n          content\n        ) : null\n      ) : (\n        <Collapse in={expanded}>{content}</Collapse>\n      )}\n    </Paper>\n  )\n}\n\nexport default memo(\n  SidebarBoxContainer,\n  (prev, next) => prev.title === next.title && prev.children === next.children\n)\n","// @flow\n\nimport React, { memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Markdown from \"react-markdown\"\n\nconst MarkdownContainer = styled(\"div\")({\n  paddingLeft: 16,\n  paddingRight: 16,\n  fontSize: 12,\n  \"& h1\": { fontSize: 18 },\n  \"& h2\": { fontSize: 14 },\n  \"& h3\": { fontSize: 12 },\n  \"& h4\": { fontSize: 12 },\n  \"& h5\": { fontSize: 12 },\n  \"& h6\": { fontSize: 12 },\n  \"& p\": { fontSize: 12 },\n  \"& a\": {},\n  \"& img\": { width: \"100%\" }\n})\n\nexport const TaskDescriptionSidebarBox = ({ description }) => {\n  return (\n    <SidebarBoxContainer\n      title=\"Task Description\"\n      icon={<DescriptionIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <MarkdownContainer>\n        <Markdown source={description} />\n      </MarkdownContainer>\n    </SidebarBoxContainer>\n    \n  )\n}\n\nexport default memo(TaskDescriptionSidebarBox)\n","// @flow\n\nimport React, { memo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport CollectionsIcon from \"@material-ui/icons/Collections\"\nimport { grey } from \"@material-ui/core/colors\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport Avatar from \"@material-ui/core/Avatar\"\nimport isEqual from \"lodash/isEqual\"\n\nconst useStyles = makeStyles({\n  img: { width: 40, height: 40, borderRadius: 8 }\n})\n\nexport const ImageSelectorSidebarBox = ({ images, onSelect }) => {\n  const classes = useStyles()\n  return (\n    <SidebarBoxContainer\n      title=\"Images\"\n      subTitle={`(${images.length})`}\n      icon={<CollectionsIcon style={{ color: grey[700] }} />}\n    >\n      <div>\n        <List>\n          {images.map((img, i) => (\n            <ListItem button onClick={() => onSelect(img)} dense key={i}>\n              <img className={classes.img} src={img.src} />\n              <ListItemText\n                primary={img.name}\n                secondary={`${(img.regions || []).length} Labels`}\n              />\n            </ListItem>\n          ))}\n        </List>\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n\nconst mapUsedImageProps = a => [a.name, (a.regions || []).length, a.src]\n\nexport default memo(ImageSelectorSidebarBox, (prevProps, nextProps) =>\n  isEqual(\n    prevProps.images.map(mapUsedImageProps),\n    nextProps.images.map(mapUsedImageProps)\n  )\n)\n","import { grey, blue, orange, purple } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    fontSize: 11,\n    fontWeight: \"bold\",\n    color: grey[700],\n    \"& .icon\": {\n      marginTop: 4,\n      width: 16,\n      height: 16\n    },\n    \"& .icon2\": {\n      opacity: 0.5,\n      width: 16,\n      height: 16,\n      transition: \"200ms opacity\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n        opacity: 1\n      }\n    }\n  },\n  row: {\n    padding: 4,\n    cursor: \"pointer\",\n    \"&.header:hover\": {\n      backgroundColor: \"#fff\"\n    },\n    \"&.highlighted\": {\n      backgroundColor: blue[100]\n    },\n    \"&:hover\": {\n      backgroundColor: blue[50],\n      color: grey[800]\n    }\n  },\n  chip: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    padding: 2,\n    borderRadius: 2,\n    paddingLeft: 4,\n    paddingRight: 4,\n    alignItems: \"center\",\n    \"& .color\": {\n      borderRadius: 5,\n      width: 10,\n      height: 10,\n      marginRight: 4\n    },\n    \"& .text\": {}\n  }\n}\n","// @flow\n\nimport React, { Fragment, useState, memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport RegionIcon from \"@material-ui/icons/PictureInPicture\"\nimport Grid from \"@material-ui/core/Grid\"\nimport ReorderIcon from \"@material-ui/icons/SwapVert\"\nimport PieChartIcon from \"@material-ui/icons/PieChart\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport UnlockIcon from \"@material-ui/icons/LockOpen\"\nimport VisibleIcon from \"@material-ui/icons/Visibility\"\nimport VisibleOffIcon from \"@material-ui/icons/VisibilityOff\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport isEqual from \"lodash/isEqual\"\n\nconst useStyles = makeStyles(styles)\n\nconst HeaderSep = styled(\"div\")({\n  borderTop: `1px solid ${grey[200]}`,\n  marginTop: 2,\n  marginBottom: 2\n})\n\nconst Chip = ({ color, text }) => {\n  const classes = useStyles()\n  return (\n    <span className={classes.chip}>\n      <div className=\"color\" style={{ backgroundColor: color }} />\n      <div className=\"text\">{text}</div>\n    </span>\n  )\n}\n\nconst RowLayout = ({\n  header,\n  highlighted,\n  order,\n  classification,\n  area,\n  tags,\n  trash,\n  lock,\n  visible,\n  onClick\n}) => {\n  const classes = useStyles()\n  const [mouseOver, changeMouseOver] = useState(false)\n  return (\n    <div\n      onClick={onClick}\n      onMouseEnter={() => changeMouseOver(true)}\n      onMouseLeave={() => changeMouseOver(false)}\n      className={classnames(classes.row, { header, highlighted })}\n    >\n      <Grid container alignItems=\"center\">\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 10 }}>{order}</div>\n        </Grid>\n        <Grid item xs={5}>\n          {classification}\n        </Grid>\n        <Grid item xs={2}>\n          <div style={{ textAlign: \"right\", paddingRight: 6 }}>{area}</div>\n        </Grid>\n        <Grid item xs={1}>\n          {trash}\n        </Grid>\n        <Grid item xs={1}>\n          {lock}\n        </Grid>\n        <Grid item xs={1}>\n          {visible}\n        </Grid>\n      </Grid>\n    </div>\n  )\n}\n\nconst RowHeader = () => {\n  return (\n    <RowLayout\n      header\n      highlighted={false}\n      order={<ReorderIcon className=\"icon\" />}\n      classification={<div style={{ paddingLeft: 10 }}>Class</div>}\n      area={<PieChartIcon className=\"icon\" />}\n      trash={<TrashIcon className=\"icon\" />}\n      lock={<LockIcon className=\"icon\" />}\n      visible={<VisibleIcon className=\"icon\" />}\n    />\n  )\n}\n\nconst MemoRowHeader = memo(RowHeader)\n\nconst Row = ({\n  region: r,\n  highlighted,\n  onSelectRegion,\n  onDeleteRegion,\n  onChangeRegion,\n  visible,\n  locked,\n  color,\n  cls,\n  index\n}) => {\n  return (\n    <RowLayout\n      header={false}\n      highlighted={highlighted}\n      onClick={() => onSelectRegion(r)}\n      order={`#${index + 1}`}\n      classification={<Chip text={cls || \"\"} color={color || \"#ddd\"} />}\n      area=\"\"\n      trash={<TrashIcon onClick={() => onDeleteRegion(r)} className=\"icon2\" />}\n      lock={\n        r.locked ? (\n          <LockIcon\n            onClick={() => onChangeRegion({ ...r, locked: false })}\n            className=\"icon2\"\n          />\n        ) : (\n          <UnlockIcon\n            onClick={() => onChangeRegion({ ...r, locked: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n      visible={\n        r.visible || r.visible === undefined ? (\n          <VisibleIcon\n            onClick={() => onChangeRegion({ ...r, visible: false })}\n            className=\"icon2\"\n          />\n        ) : (\n          <VisibleOffIcon\n            onClick={() => onChangeRegion({ ...r, visible: true })}\n            className=\"icon2\"\n          />\n        )\n      }\n    />\n  )\n}\n\nconst MemoRow = memo(\n  Row,\n  (prevProps, nextProps) =>\n    prevProps.highlighted === nextProps.highlighted &&\n    prevProps.visible === nextProps.visible &&\n    prevProps.locked === nextProps.locked &&\n    prevProps.id === nextProps.id &&\n    prevProps.index === nextProps.index &&\n    prevProps.cls === nextProps.cls &&\n    prevProps.color === nextProps.color\n)\n\nexport const RegionSelectorSidebarBox = ({\n  regions,\n  onDeleteRegion,\n  onChangeRegion,\n  onSelectRegion\n}) => {\n  const classes = useStyles()\n  return (\n    <SidebarBoxContainer\n      title=\"Regions\"\n      subTitle=\"\"\n      icon={<RegionIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <div className={classes.container}>\n        <MemoRowHeader />\n        <HeaderSep />\n        {regions.map((r, i) => (\n          <MemoRow\n            key={r.id}\n            {...r}\n            region={r}\n            index={i}\n            onSelectRegion={onSelectRegion}\n            onDeleteRegion={onDeleteRegion}\n            onChangeRegion={onChangeRegion}\n          />\n        ))}\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n\nconst mapUsedRegionProperties = r => [\n  r.id,\n  r.color,\n  r.locked,\n  r.visible,\n  r.highlighted\n]\n\nexport default memo(RegionSelectorSidebarBox, (prevProps, nextProps) =>\n  isEqual(\n    prevProps.regions.map(mapUsedRegionProperties),\n    nextProps.regions.map(mapUsedRegionProperties)\n  )\n)\n","// @flow\n\nimport React, { setState, memo } from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport HistoryIcon from \"@material-ui/icons/History\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\"\nimport UndoIcon from \"@material-ui/icons/Undo\"\nimport moment from \"moment\"\nimport { grey } from \"@material-ui/core/colors\"\nimport isEqual from \"lodash/isEqual\"\n\nconst useStyles = makeStyles({\n  emptyText: {\n    fontSize: 14,\n    fontWeight: \"bold\",\n    color: grey[500],\n    textAlign: \"center\",\n    padding: 20\n  }\n})\n\nexport const HistorySidebarBox = ({\n  history,\n  onRestoreHistory\n}: {\n  history: Array<{ name: string, time: Date }>\n}) => {\n  const classes = useStyles()\n\n  return (\n    <SidebarBoxContainer\n      title=\"History\"\n      icon={<HistoryIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      <List>\n        {history.length === 0 && (\n          <div className={classes.emptyText}>No History Yet</div>\n        )}\n        {history.map(({ name, time }, i) => (\n          <ListItem button dense key={i}>\n            <ListItemText\n              primary={name}\n              secondary={moment(time).format(\"LT\")}\n            />\n            {i === 0 && (\n              <ListItemSecondaryAction onClick={() => onRestoreHistory()}>\n                <IconButton>\n                  <UndoIcon />\n                </IconButton>\n              </ListItemSecondaryAction>\n            )}\n          </ListItem>\n        ))}\n      </List>\n    </SidebarBoxContainer>\n  )\n}\n\nexport default memo(HistorySidebarBox, (prevProps, nextProps) =>\n  isEqual(\n    prevProps.history.map(a => [a.name, a.time]),\n    nextProps.history.map(a => [a.name, a.time])\n  )\n)\n","// @flow\n\nimport React from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\n\nexport const DebugSidebarBox = ({ state, lastAction }: any) => {\n  const image = (state.images || []).find(\n    img => img.src === state.selectedImage\n  )\n  const region = image ? (image.regions || []).find(r => r.highlighted) : null\n\n  return (\n    <SidebarBoxContainer title=\"Debug\" icon={<span />} expandedByDefault>\n      <div style={{ padding: 4 }}>\n        <div>\n          <b>region</b>:\n        </div>\n        <pre>{JSON.stringify(region, null, \"  \")}</pre>\n        <div>\n          <b>lastAction</b>:\n        </div>\n        <pre>{JSON.stringify(lastAction, null, \"  \")}</pre>\n        <div>\n          <b>mode</b>:\n        </div>\n        <pre>{JSON.stringify(state.mode, null, \"  \")}</pre>\n        <div>\n          <b>frame:</b>\n        </div>\n        <pre>{JSON.stringify(state.selectedImageFrameTime, null, \"  \")}</pre>\n      </div>\n    </SidebarBoxContainer>\n  )\n}\n\nexport default DebugSidebarBox\n","// @flow\n\nimport React, { useMemo, memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport StyleIcon from \"@material-ui/icons/Style\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Select from \"react-select\"\nimport useEventCallback from \"use-event-callback\"\nimport { asMutable } from \"seamless-immutable\"\n\nconst useStyles = makeStyles({})\n\ntype Props = {\n  tags: Array<string>,\n  currentImage: { cls?: string, tags?: Array<string> },\n  imageClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  onChangeImage: (Array<string>) => any\n}\n\nconst emptyArr = []\n\nexport const TagsSidebarBox = ({\n  currentImage,\n  imageClsList = emptyArr,\n  imageTagList = emptyArr,\n  onChangeImage\n}: Props) => {\n  if (!currentImage) return null\n  const { tags = [], cls = null } = currentImage\n  const onChangeClassification = useEventCallback(o =>\n    onChangeImage({ cls: o.value })\n  )\n  const onChangeTags = useEventCallback(o =>\n    onChangeImage({ tags: o.map(a => a.value) })\n  )\n  const selectValue = useMemo(() => (cls ? { value: cls, label: cls } : null), [\n    cls\n  ])\n  const memoImgClsList = useMemo(\n    () => asMutable(imageClsList.map(c => ({ value: c, label: c }))),\n    [imageClsList]\n  )\n  const memoImgTagList = useMemo(\n    () => asMutable(imageTagList.map(c => ({ value: c, label: c }))),\n    [imageTagList]\n  )\n  const memoCurrentTags = useMemo(\n    () => tags.map(r => ({ value: r, label: r })),\n    [tags]\n  )\n\n  return (\n    <SidebarBoxContainer\n      title=\"Image Tags\"\n      expandedByDefault\n      noScroll\n      icon={<StyleIcon style={{ color: grey[700] }} />}\n    >\n      {imageClsList.length > 0 && (\n        <div style={{ padding: 8 }}>\n          <Select\n            placeholder=\"Image Classification\"\n            onChange={onChangeClassification}\n            value={selectValue}\n            options={memoImgClsList}\n          />\n        </div>\n      )}\n      {imageTagList.length > 0 && (\n        <div style={{ padding: 8, paddingTop: 0 }}>\n          <Select\n            isMulti\n            placeholder=\"Image Tags\"\n            onChange={onChangeTags}\n            value={memoCurrentTags}\n            options={memoImgTagList}\n          />\n        </div>\n      )}\n    </SidebarBoxContainer>\n  )\n}\n\nexport default memo(\n  TagsSidebarBox,\n  (prevProps, nextProps) =>\n    prevProps.currentImage.cls === nextProps.currentImage.cls &&\n    prevProps.currentImage.tags === nextProps.currentImage.tags &&\n    prevProps.imageClsList === nextProps.imageClsList &&\n    prevProps.imageTagList === nextProps.imageTagList\n)\n","// @flow\n\nconst getTimeString = (ms, precision = 1) => {\n  if (ms < 1000) {\n    return ms + \"ms\"\n  } else {\n    const secs = ms / 1000\n    if (secs < 60) {\n      if (Number.isInteger(secs)) {\n        return secs + \"s\"\n      } else {\n        return secs.toFixed(precision) + \"s\"\n      }\n    } else {\n      const mins = secs / 60\n      if (Number.isInteger(mins)) {\n        return mins + \"m\"\n      } else {\n        return mins.toFixed(precision) + \"m\"\n      }\n    }\n  }\n}\n\nexport default getTimeString\n","// @flow weak\n\nimport React from \"react\"\nimport AddLocationIcon from \"@material-ui/icons/AddLocation\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport * as colors from \"@material-ui/core/colors\"\nimport getTimeString from \"../KeyframeTimeline/get-time-string.js\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst KeyframeRow = styled(\"div\")({\n  cursor: \"pointer\",\n  display: \"flex\",\n  alignItems: \"center\",\n  padding: 8,\n  fontSize: 14,\n  color: colors.grey[700],\n  \"&.current\": {\n    backgroundColor: colors.blue[100]\n  },\n  \"&:hover\": {\n    backgroundColor: colors.grey[100]\n  },\n  \"& .time\": {\n    flexGrow: 1,\n    fontWeight: \"bold\",\n    \"& .regionCount\": {\n      marginLeft: 8,\n      fontWeight: \"normal\",\n      color: colors.grey[500]\n    }\n  },\n  \"& .trash\": {\n    \"& .icon\": {\n      fontSize: 18,\n      color: colors.grey[600],\n      transition: \"transform 80ms\",\n      \"&:hover\": {\n        color: colors.grey[800],\n        transform: \"scale(1.25,1.25)\"\n      }\n    }\n  }\n})\n\nconst KeyframesSelector = ({\n  currentVideoTime,\n  keyframes,\n  onChangeVideoTime,\n  onDeleteKeyframe\n}) => {\n  const keyframeTimes = Object.keys(keyframes).map(t => parseInt(t))\n  return (\n    <SidebarBoxContainer\n      title=\"Keyframes\"\n      subTitle=\"\"\n      icon={<AddLocationIcon style={{ color: colors.grey[700] }} />}\n      expandedByDefault\n    >\n      {keyframeTimes.map(t => (\n        <KeyframeRow\n          fullWidth\n          key={t}\n          className={currentVideoTime === t ? \"current\" : \"\"}\n          onClick={() => onChangeVideoTime(t)}\n        >\n          <div className=\"time\">\n            {getTimeString(t, 2)}\n            <span className=\"regionCount\">\n              ({(keyframes[t].regions || []).length})\n            </span>\n          </div>\n          <div className=\"trash\">\n            <TrashIcon\n              onClick={e => {\n                onDeleteKeyframe(t)\n                e.stopPropagation()\n              }}\n              className=\"icon\"\n            />\n          </div>\n        </KeyframeRow>\n      ))}\n    </SidebarBoxContainer>\n  )\n}\n\nexport default KeyframesSelector\n","import React from \"react\"\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n    shortcutKeyFieldWrapper: {\n        paddingTop: 8,\n        display: \"inline-flex\",\n        width: '100%'\n    },\n    shortcutKeyText: {\n        lineHeight: 0\n    },\n    shortcutTextfield: {\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        textAlign: 'center'\n    }\n})\n\nconst ShortcutField = ({actionId, actionName, keyName, onChangeShortcut}) =>{\n    const classes = useStyles()\n\n    return(\n        <div\n            className={classes.shortcutKeyFieldWrapper}\n        >\n            <TextField\n                variant=\"outlined\"\n                label={actionName}\n                className={classes.shortcutTextfield}\n                value={keyName}\n                onKeyPress={e => {\n                    onChangeShortcut(actionId, e.key)\n                    e.stopPropagation()\n                }}\n            />\n        </div>\n    )\n}\n\nexport default ShortcutField","// @flow\n\nimport React, { useState } from \"react\"\nimport { RemoveScroll } from \"react-remove-scroll\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\n\nconst Container = styled(\"div\")({\n  \"& > div\": {\n    width: \"100%\",\n    height: \"100%\"\n  }\n})\n\nexport const PreventScrollToParents = ({ children, ...otherProps }) => {\n  const [mouseOver, changeMouseOver] = useState(false)\n  const onMouseMove = useEventCallback(e => {\n    if (!mouseOver) changeMouseOver(true)\n    if (otherProps.onMouseMove) {\n      otherProps.onMouseMove(e)\n    }\n  })\n  const onMouseLeave = useEventCallback(e => {\n    setTimeout(() => {\n      if (mouseOver) {\n        changeMouseOver(false)\n      }\n    }, 100)\n  })\n\n  return (\n    <Container\n      {...otherProps}\n      onMouseMove={onMouseMove}\n      onMouseLeave={onMouseLeave}\n    >\n      <RemoveScroll enabled={mouseOver} removeScrollBar={false}>\n        {children}\n      </RemoveScroll>\n    </Container>\n  )\n}\n\nexport default PreventScrollToParents\n","// @flow\n\nimport React, { memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Markdown from \"react-markdown\"\nimport Select from \"react-select\"\nimport { asMutable } from \"seamless-immutable\"\nimport RateReviewIcon from \"@material-ui/icons/RateReview\"\n\nexport const Preview = ({ handlePreview, previewImages }: props) => {\n  return (\n    <SidebarBoxContainer\n      title=\"Review\"\n      icon={<RateReviewIcon style={{ color: grey[700] }} />}\n      expandedByDefault\n    >\n      {\n        (previewImages.length > 0) && (\n          <table className=\"w3-table\" >\n            <thead >\n              <tr>\n                <th>sl.No</th>\n                <th>Images</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {\n                previewImages.map((item, i) => (\n                  <tr onClick={() => handlePreview(item)}>\n                    <td>{i + 1}</td>\n                    <td className='w3-hover-grey'>{item}</td>\n                  </tr>\n                ))}\n            </tbody>\n          </table >\n        )\n      }\n\n    </SidebarBoxContainer>\n\n  )\n}\n\nexport default memo(Preview)\n","// @flow\n\nimport React, { memo } from \"react\"\nimport SidebarBoxContainer from \"../SidebarBoxContainer\"\nimport DescriptionIcon from \"@material-ui/icons/Description\"\nimport { styled } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\nimport Markdown from \"react-markdown\"\nimport Select from \"react-select\"\nimport { asMutable } from \"seamless-immutable\"\nimport{Meta_Data} from \"./metadata-tools\"\n\n\ntype Props = {\n    metadata:Meta_Data\n  }\n\nexport const MetaData = ({ allowed_metadata, metadata, onChange }: Props) => {\n   \n    return (\n        <SidebarBoxContainer\n            title=\"Meta Data\"\n            icon={<DescriptionIcon style={{ color: grey[700] }} />}\n            expandedByDefault\n        >\n\n            <label >Climate</label>\n\n            <Select className=\"w3-margin-bottom w3-margin-left w3-margin-right\"\n                placeholder=\"Classification\"\n                onChange={o =>\n                    onChange({\n                        ...(metadata),\n                        climate: o.value\n                    })\n                    \n                }\n                value={\n                    metadata.climate ? { label: metadata.climate, value: metadata.climate } : null\n                  }\n                options={asMutable(\n                    allowed_metadata.climate.map(c => ({ value: c, label: c }))\n                )}\n            />\n\n\n\n            <label>Road</label>\n\n            <Select className=\"w3-margin-bottom w3-margin-left w3-margin-right\"\n                placeholder=\"Classification\"\n                onChange={o =>\n                    onChange({\n                        ...(metadata),\n                        road: o.value\n                    })\n                }\n                value={\n                  metadata.road ? { label: metadata.road, value: metadata.road } : null\n                }\n                options={asMutable(\n                    allowed_metadata.road.map(c => ({ value: c, label: c }))\n                )}\n            />\n\n\n            <label>Time of Day</label>\n\n            <Select className=\"w3-margin-bottom w3-margin-left w3-margin-right\"\n                placeholder=\"Classification\"\n                onChange={o =>\n                    onChange({\n                        ...(metadata),\n                        time_of_day: o.value\n                    })\n                }\n                value={\n                    metadata.time_of_day ? { label: metadata.time_of_day, value: metadata.time_of_day } : null\n                  }\n                options={asMutable(\n                    allowed_metadata.time_of_day.map(c => ({ value: c, label: c }))\n                )}\n            />\n\n\n            <label>Area</label>\n\n            <Select className=\"w3-margin-bottom w3-margin-left w3-margin-right\"\n                placeholder=\"Classification\"\n                onChange={o =>\n                    onChange({\n                        ...(metadata),\n                        area: o.value\n                    })\n                }\n                value={\n                    metadata.area ? { label: metadata.area, value: metadata.area } : null\n                  }\n                options={asMutable(\n                    allowed_metadata.area.map(c => ({ value: c, label: c }))\n                )}\n            />\n            <div>\n                <label>Number of Lanes</label>\n                <input className=\"w3-button w3-border w3-margin-bottom\" placeholder='no. of Lanes' type=\"number\"\n                    onChange={o =>\n                        onChange({\n                            ...(metadata),\n                            no_of_lanes: o.currentTarget.value\n                        })\n                    }\n                ></input>\n            </div>\n            <div>\n                <label>Number of classes</label>\n                <input className=\"w3-button w3-border w3-margin-bottom \" placeholder='no. of classes' type=\"number\"\n                    onChange={o =>\n                        onChange({\n                            ...(metadata),\n                            no_of_classes: o.currentTarget.value\n                        })\n                    }></input>\n            </div>\n\n\n        </SidebarBoxContainer>\n\n    )\n}\n\nexport default memo(MetaData)\n","// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport TaskDescription from \"../TaskDescriptionSidebarBox\"\nimport ImageSelector from \"../ImageSelectorSidebarBox\"\nimport RegionSelector from \"../RegionSelectorSidebarBox\"\nimport History from \"../HistorySidebarBox\"\nimport DebugBox from \"../DebugSidebarBox\"\nimport TagsSidebarBox from \"../TagsSidebarBox\"\nimport KeyframesSelector from \"../KeyframesSelectorSidebarBox\"\nimport type { Region } from \"../ImageCanvas/region-tools.js\"\nimport Shortcuts from \"../Shortcuts\"\nimport PreventScrollToParents from \"../PreventScrollToParents\"\nimport { Preview } from \"../Preview\"\nimport { MetaData } from \"../Metadata/index\"\nimport {Meta_Data} from \"../Metadata/metadata-tools\"\nconst useStyles = makeStyles({})\n\ntype Image = {\n  name: string,\n  src: string,\n  cls?: string,\n  tags?: Array<string>,\n  thumbnailSrc?: string,\n  regions?: Array<Region>\n}\n\ntype Props = {\n  debug: any,\n  taskDescription: string,\n  images?: Array<Image>,\n  regions: Array<Region>,\n  history: Array<{ state: Object, name: string, time: Date }>,\n\n  labelImages?: boolean,\n  currentImage?: Image,\n  imageClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  metadata?:Meta_Data,\n  onChangeImage: Image => any,\n  onSelectRegion: Region => any,\n  onSelectImage: Image => any,\n  onChangeRegion: Region => any,\n  onDeleteRegion: Region => any,\n  onRestoreHistory: () => any,\n  onShortcutActionDispatched: (action: any) => any\n}\n\nconst emptyArr = []\n\nexport const Sidebar = ({\n  metadata,\n  allowed_metadata,\n  preview,\n  previewList,\n  debug,\n  taskDescription,\n  keyframes,\n  images,\n  regions,\n  history,\n  labelImages,\n  currentImage,\n  currentVideoTime,\n  imageClsList,\n  imageTagList,\n  onChangeMetadata,\n  onChangeImage,\n  onSelectRegion,\n  onSelectImage,\n  onChangeRegion,\n  onDeleteRegion,\n  onRestoreHistory,\n  onChangeVideoTime,\n  onDeleteKeyframe,\n  onShortcutActionDispatched\n}: Props) => {\n  const classes = useStyles()\n  let defaultMeta ={\n    climate:'None',\n    road:'None',\n    time_of_day:\"None\",\n    area:\"None\",\n    no_of_classes:0,\n    no_of_lanes:0\n\n  }\n  // if(metadata!=null){\n  //   defaultMeta={...defaultMeta,\n  //   metadata\n  //   }\n  // }\n\n  if (!regions) regions = emptyArr\n\n  return (\n    <div>\n      <MetaData allowed_metadata={allowed_metadata}\n        metadata={(metadata===null)?defaultMeta:metadata}\n        onChange={onChangeMetadata}\n      />\n      <Preview\n        handlePreview={preview}\n        previewImages={previewList}\n      />\n\n      {debug && <DebugBox state={debug} lastAction={debug.lastAction} />}\n      {/* {(taskDescription || \"\").length > 1 && (\n        <TaskDescription description={taskDescription} />\n      )} */}\n      {labelImages && (\n        <TagsSidebarBox\n          currentImage={currentImage}\n          imageClsList={imageClsList}\n          imageTagList={imageTagList}\n          onChangeImage={onChangeImage}\n          expandedByDefault\n        />\n      )}\n      {images && images.length > 1 && (\n        <ImageSelector onSelect={onSelectImage} images={images} />\n      )}\n      <RegionSelector\n        regions={regions}\n        onSelectRegion={onSelectRegion}\n        onChangeRegion={onChangeRegion}\n        onDeleteRegion={onDeleteRegion}\n      />\n      <History history={history} onRestoreHistory={() => onRestoreHistory()} />\n\n      {keyframes && (\n        <KeyframesSelector\n          currentVideoTime={currentVideoTime}\n          keyframes={keyframes}\n          onChangeVideoTime={onChangeVideoTime}\n          onDeleteKeyframe={onDeleteKeyframe}\n        />\n      )}\n      {/* <Shortcuts onShortcutActionDispatched={onShortcutActionDispatched} /> */}\n    </div>\n  )\n}\n\nexport default Sidebar\n","// @flow\n\nimport React, { Fragment, useEffect, useState } from \"react\"\n\nexport const Crosshairs = ({\n  mousePosition,\n  x,\n  y\n}: {\n  mousePosition: { current: { x: number, y: number } },\n  x?: number,\n  y?: number\n}) => {\n  const [forceRenderState, changeForceRenderState] = useState()\n\n  if (mousePosition) {\n    x = mousePosition.current.x\n    y = mousePosition.current.y\n  }\n\n  useEffect(() => {\n    if (!mousePosition) return\n    const interval = setInterval(() => {\n      if (x !== mousePosition.current.x || y !== mousePosition.current.y) {\n        changeForceRenderState([\n          mousePosition.current.x,\n          mousePosition.current.y\n        ])\n      }\n    }, 10)\n    return () => clearInterval(interval)\n  })\n\n  return (\n    <Fragment>\n      <div\n        style={{\n          position: \"absolute\",\n          height: \"100%\",\n          width: 1,\n          zIndex: 10,\n          backgroundColor: \"#f00\",\n          left: x,\n          pointerEvents: \"none\",\n          top: 0\n        }}\n      />\n      <div\n        style={{\n          position: \"absolute\",\n          width: \"100%\",\n          zIndex: 10,\n          height: 1,\n          backgroundColor: \"#f00\",\n          top: y,\n          pointerEvents: \"none\",\n          left: 0\n        }}\n      />\n    </Fragment>\n  )\n}\n\nexport default Crosshairs\n","// @flow\n\nimport { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  regionInfo: {\n    fontSize: 12,\n    cursor: \"default\",\n    transition: \"opacity 200ms\",\n    opacity: 0.7,\n    \"&:hover\": {\n      opacity: 0.9,\n      cursor: \"pointer\"\n    },\n    \"&.highlighted\": {\n      opacity: 0.9,\n      \"&:hover\": {\n        opacity: 1\n      }\n    },\n    // pointerEvents: \"none\",\n    fontWeight: 600,\n    color: grey[900],\n    padding: 8,\n    \"& .name\": {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      \"& .circle\": {\n        marginRight: 4,\n        boxShadow: \"0px 0px 2px rgba(0,0,0,0.4)\",\n        width: 10,\n        height: 10,\n        borderRadius: 5\n      }\n    },\n    \"& .tags\": {\n      \"& .tag\": {\n        color: grey[700],\n        display: \"inline-block\",\n        margin: 1,\n        fontSize: 10,\n        textDecoration: \"underline\"\n      }\n    }\n  }\n}\n","// @flow\n\nimport React, { useState, memo } from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport type { Region } from \"../ImageCanvas/region-tools.js\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport CheckIcon from \"@material-ui/icons/Check\"\nimport UndoIcon from \"@material-ui/icons/Undo\"\nimport Select from \"react-select\"\nimport { asMutable } from \"seamless-immutable\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  region: Region,\n  editing?: boolean,\n  allowedClasses?: Array<string>,\n  allowedTags?: Array<string>,\n  cls?: string,\n  tags?: Array<string>,\n  onDelete: Region => null,\n  onChange: Region => null,\n  onClose: Region => null,\n  onOpen: Region => null\n}\n\nexport const RegionLabel = ({\n  region,\n  editing,\n  allowedClasses,\n  allowedTags,\n  onDelete,\n  onChange,\n  onClose,\n  onOpen\n}: Props) => {\n  const classes = useStyles()\n\n  return (\n    <Paper\n      onKeyPress={e => {\n        e.stopPropagation()\n      }}\n      onKeyDown={e => {\n        e.stopPropagation()\n      }}\n      onKeyUp={e => {\n        e.stopPropagation()\n      }}\n      onClick={() => (!editing ? onOpen(region) : null)}\n      className={classnames(classes.regionInfo, {\n        highlighted: region.highlighted\n      })}\n    >\n      {!editing ? (\n        <div>\n          {region.cls && (\n            <div className=\"name\">\n              <div\n                className=\"circle\"\n                style={{ backgroundColor: region.color }}\n              />\n              {region.cls}\n            </div>\n          )}\n          {region.tags && (\n            <div className=\"tags\">\n              {region.tags.map(t => (\n                <div key={t} className=\"tag\">\n                  {t}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={{ width: 200 }}>\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n            <div\n              style={{\n                display: \"flex\",\n                backgroundColor: region.color,\n                color: \"#fff\",\n                padding: 4,\n                paddingLeft: 8,\n                paddingRight: 8,\n                borderRadius: 4,\n                fontWeight: \"bold\",\n                textShadow: \"0px 0px 5px rgba(0,0,0,0.4)\"\n              }}\n            >\n              {region.type}\n            </div>\n            <div style={{ flexGrow: 1 }} />\n            <IconButton\n              onClick={() => onDelete(region)}\n              tabIndex={-1}\n              style={{ width: 22, height: 22 }}\n              size=\"small\"\n              variant=\"outlined\"\n            >\n              <TrashIcon style={{ marginTop: -8, width: 16, height: 16 }} />\n            </IconButton>\n          </div>\n          {(allowedClasses || []).length > 0 && (\n            <div style={{ marginTop: 6 }}>\n              <Select\n                placeholder=\"Classification\"\n                onChange={o =>\n                  onChange({\n                    ...(region: any),\n                    cls: o.value\n                  })\n                }\n                value={\n                  region.cls ? { label: region.cls, value: region.cls } : null\n                }\n                options={asMutable(\n                  allowedClasses.map(c => ({ value: c, label: c }))\n                )}\n              />\n            </div>\n          )}\n          {(allowedTags || []).length > 0 && (\n            <div style={{ marginTop: 4 }}>\n              <Select\n                onChange={newTags =>\n                  onChange({\n                    ...(region: any),\n                    tags: newTags.map(t => t.value)\n                  })\n                }\n                placeholder=\"Tags\"\n                value={(region.tags || []).map(c => ({ label: c, value: c }))}\n                isMulti\n                options={asMutable(\n                  allowedTags.map(c => ({ value: c, label: c }))\n                )}\n              />\n            </div>\n          )}\n          <div style={{ marginTop: 4, display: \"flex\" }}>\n            <div style={{ flexGrow: 1 }} />\n            <Button\n              onClick={() => onClose(region)}\n              size=\"small\"\n              variant=\"contained\"\n              color=\"primary\"\n            >\n              <CheckIcon />\n            </Button>\n          </div>\n        </div>\n      )}\n    </Paper>\n  )\n}\n\nexport default memo(\n  RegionLabel,\n  (prevProps, nextProps) =>\n    prevProps.editing === nextProps.editing &&\n    prevProps.region.x === nextProps.region.x &&\n    prevProps.region.y === nextProps.region.y &&\n    prevProps.region.tags === nextProps.region.tags &&\n    prevProps.region.cls === nextProps.region.cls &&\n    prevProps.region.color === nextProps.region.color &&\n    prevProps.region.highlighted === nextProps.region.highlighted\n)\n","// @flow\n\nimport React from \"react\"\nimport classnames from \"classnames\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  \"@keyframes borderDance\": {\n    from: { strokeDashoffset: 0 },\n    to: { strokeDashoffset: 100 }\n  },\n  highlightBox: {\n    zIndex: 2,\n    transition: \"opacity 500ms\",\n    \"&.highlighted\": {\n      zIndex: 3\n    },\n    \"&:not(.highlighted)\": {\n      opacity: 0\n    },\n    \"&:not(.highlighted):hover\": {\n      opacity: 0.6\n    },\n    \"& path\": {\n      vectorEffect: \"non-scaling-stroke\",\n      strokeWidth: 2,\n      stroke: \"#FFF\",\n      fill: \"none\",\n      strokeDasharray: 5,\n      animationName: \"$borderDance\",\n      animationDuration: \"4s\",\n      animationTimingFunction: \"linear\",\n      animationIterationCount: \"infinite\",\n      animationPlayState: \"running\"\n    }\n  }\n})\n\nexport const HighlightBox = ({\n  mouseEvents,\n  dragWithPrimary,\n  zoomWithPrimary,\n  createWithPrimary,\n  onBeginMovePoint,\n  onSelectRegion,\n  region: r,\n  pbox\n}: {\n  mouseEvents: any,\n  dragWithPrimary: boolean,\n  zoomWithPrimary: boolean,\n  createWithPrimary: boolean,\n  onBeginMovePoint: Function,\n  onSelectRegion: Function,\n  region: any,\n  pbox: { x: number, y: number, w: number, h: number }\n}) => {\n  const classes = useStyles()\n  return (\n    <svg\n      key={r.id}\n      className={classnames(classes.highlightBox, {\n        highlighted: r.highlighted\n      })}\n      {...mouseEvents}\n      {...(!zoomWithPrimary && !dragWithPrimary\n        ? {\n            onMouseDown: e => {\n              if (\n                !r.locked &&\n                r.type === \"point\" &&\n                r.highlighted &&\n                e.button === 0\n              ) {\n                return onBeginMovePoint(r)\n              }\n              if (e.button === 0 && !createWithPrimary) return onSelectRegion(r)\n              mouseEvents.onMouseDown(e)\n            }\n          }\n        : {})}\n      style={{\n        ...(r.highlighted\n          ? {\n              pointerEvents: r.type !== \"point\" ? \"none\" : undefined,\n              cursor: \"grab\"\n            }\n          : {\n              cursor: !(zoomWithPrimary || dragWithPrimary || createWithPrimary)\n                ? \"pointer\"\n                : undefined,\n              pointerEvents:\n                zoomWithPrimary ||\n                dragWithPrimary ||\n                (createWithPrimary && !r.highlighted)\n                  ? \"none\"\n                  : undefined\n            }),\n        position: \"absolute\",\n        left: pbox.x - 5,\n        top: pbox.y - 5,\n        width: pbox.w + 10,\n        height: pbox.h + 10\n      }}\n    >\n      <path\n        d={`M5,5 L${pbox.w + 5},5 L${pbox.w + 5},${pbox.h + 5} L5,${pbox.h +\n          5} Z`}\n      />\n    </svg>\n  )\n}\n\nexport default HighlightBox\n","// @flow\n\nimport { useEffect } from \"react\"\n\nimport { useRafState, useInterval } from \"react-use\"\n\nconst useWindowSize = (initialWidth = Infinity, initialHeight = Infinity) => {\n  const isClient = typeof window !== \"undefined\"\n  const [state, setState] = useRafState({\n    width: isClient ? window.innerWidth : initialWidth,\n    height: isClient ? window.innerHeight : initialHeight\n  })\n\n  useEffect(() => {\n    if (!isClient) return\n    const handler = () => {\n      setState({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    }\n\n    window.addEventListener(\"resize\", handler)\n\n    return () => {\n      window.removeEventListener(\"resize\", handler)\n    }\n  }, [])\n\n  useInterval(() => {\n    if (!isClient) return\n    if (\n      window.innerWidth !== state.width ||\n      window.innerHeight !== state.height\n    ) {\n      setState({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    }\n  }, 100)\n\n  return state\n}\n\nexport default useWindowSize\n","// @flow weak\n\nimport { useRef } from \"react\"\nimport { Matrix } from \"transformation-matrix-js\"\n\nconst getDefaultMat = () => Matrix.from(1, 0, 0, 1, -10, -10)\n\nexport default ({\n  canvasEl,\n  changeMat,\n  changeDragging,\n  zoomStart,\n  zoomEnd,\n  changeZoomStart,\n  changeZoomEnd,\n  layoutParams,\n  zoomWithPrimary,\n  dragWithPrimary,\n  mat,\n  onMouseMove,\n  onMouseUp,\n  onMouseDown,\n  dragging\n}) => {\n  const mousePosition = useRef({ x: 0, y: 0 })\n  const prevMousePosition = useRef({ x: 0, y: 0 })\n\n  const zoomIn = (direction, point) => {\n    const [mx, my] = [point.x, point.y]\n    let scale =\n      typeof direction === \"object\" ? direction.to / mat.a : 1 + 0.2 * direction\n\n    // NOTE: We're mutating mat here\n    mat.translate(mx, my).scaleU(scale)\n    if (mat.a > 2) mat.scaleU(2 / mat.a)\n    if (mat.a < 0.1) mat.scaleU(0.1 / mat.a)\n    mat.translate(-mx, -my)\n\n    changeMat(mat.clone())\n  }\n\n  const mouseEvents = {\n    onMouseMove: e => {\n      const { left, top } = canvasEl.current.getBoundingClientRect()\n      prevMousePosition.current.x = mousePosition.current.x\n      prevMousePosition.current.y = mousePosition.current.y\n      mousePosition.current.x = e.clientX - left\n      mousePosition.current.y = e.clientY - top\n\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n\n      if (zoomWithPrimary && zoomStart) {\n        changeZoomEnd(projMouse)\n      }\n\n      const { iw, ih } = layoutParams.current\n      onMouseMove({ x: projMouse.x / iw, y: projMouse.y / ih })\n\n      if (dragging) {\n        mat.translate(\n          prevMousePosition.current.x - mousePosition.current.x,\n          prevMousePosition.current.y - mousePosition.current.y\n        )\n\n        changeMat(mat.clone())\n      }\n      e.preventDefault()\n    },\n    onMouseDown: (e, specialEvent = {}) => {\n      e.preventDefault()\n\n      if (e.button === 1 || (e.button === 0 && dragWithPrimary))\n        return changeDragging(true)\n\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomWithPrimary && e.button === 0) {\n        changeZoomStart(projMouse)\n        changeZoomEnd(projMouse)\n        return\n      }\n      if (e.button === 0) {\n        if (specialEvent.type === \"resize-box\") {\n          // onResizeBox()\n        }\n        if (specialEvent.type === \"move-region\") {\n          // onResizeBox()\n        }\n        const { iw, ih } = layoutParams.current\n        onMouseDown({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onMouseUp: e => {\n      e.preventDefault()\n      const projMouse = mat.applyToPoint(\n        mousePosition.current.x,\n        mousePosition.current.y\n      )\n      if (zoomStart) {\n        const zoomEnd = projMouse\n        if (\n          Math.abs(zoomStart.x - zoomEnd.x) < 10 &&\n          Math.abs(zoomStart.y - zoomEnd.y) < 10\n        ) {\n          if (mat.a < 1) {\n            zoomIn({ to: 1 }, mousePosition.current)\n          } else {\n            zoomIn({ to: 0.25 }, mousePosition.current)\n          }\n        } else {\n          const { iw, ih } = layoutParams.current\n\n          if (zoomStart.x > zoomEnd.x) {\n            ;[zoomStart.x, zoomEnd.x] = [zoomEnd.x, zoomStart.x]\n          }\n          if (zoomStart.y > zoomEnd.y) {\n            ;[zoomStart.y, zoomEnd.y] = [zoomEnd.y, zoomStart.y]\n          }\n\n          // The region defined by zoomStart and zoomEnd should be the new transform\n          let scale = Math.min(\n            (zoomEnd.x - zoomStart.x) / iw,\n            (zoomEnd.y - zoomStart.y) / ih\n          )\n          if (scale < 0.1) scale = 0.1\n          if (scale > 10) scale = 10\n\n          const newMat = getDefaultMat()\n            .translate(zoomStart.x, zoomStart.y)\n            .scaleU(scale)\n\n          changeMat(newMat.clone())\n        }\n\n        changeZoomStart(null)\n        changeZoomEnd(null)\n      }\n      if (e.button === 1 || (e.button === 0 && dragWithPrimary))\n        return changeDragging(false)\n      if (e.button === 0) {\n        const { iw, ih } = layoutParams.current\n        onMouseUp({ x: projMouse.x / iw, y: projMouse.y / ih })\n      }\n    },\n    onWheel: e => {\n      const direction = e.deltaY > 0 ? 1 : e.deltaY < 0 ? -1 : 0\n      zoomIn(direction, mousePosition.current)\n      // e.preventDefault()\n    }\n  }\n  return { mouseEvents, mousePosition }\n}\n","// @flow weak\nimport useEventCallback from \"use-event-callback\"\nimport { getEnclosingBox } from \"./region-tools.js\"\n\nexport default ({ layoutParams, mat }) => {\n  return useEventCallback(r => {\n    const { iw, ih } = layoutParams.current\n    const bbox = getEnclosingBox(r)\n    const margin = r.type === \"point\" ? 15 : 2\n    const cbox = {\n      x: bbox.x * iw - margin,\n      y: bbox.y * ih - margin,\n      w: bbox.w * iw + margin * 2,\n      h: bbox.h * ih + margin * 2\n    }\n    const pbox = {\n      ...mat\n        .clone()\n        .inverse()\n        .applyToPoint(cbox.x, cbox.y),\n      w: cbox.w / mat.a,\n      h: cbox.h / mat.d\n    }\n    return pbox\n  })\n}\n","// @flow\n\nexport type BaseRegion = {\n  id: string | number,\n  cls?: string,\n  locked?: boolean,\n  visible?: boolean,\n  color: string,\n  editingLabels?: boolean,\n  highlighted?: boolean,\n  tags?: Array<string>\n}\n\nexport type Point = {|\n  ...$Exact<BaseRegion>,\n  type: \"point\",\n  x: number,\n  y: number\n|}\n\nexport type PixelRegion =\n  | {|\n      ...$Exact<BaseRegion>,\n      type: \"pixel\",\n      sx: number,\n      sy: number,\n      w: number,\n      h: number,\n      src: string\n    |}\n  | {|\n      ...$Exact<BaseRegion>,\n      type: \"pixel\",\n      points: Array<[number, number]>\n    |}\nexport type Box = {|\n  ...$Exact<BaseRegion>,\n  type: \"box\",\n  x: number,\n  y: number,\n  w: number,\n  h: number\n|}\nexport type Polygon = {|\n  ...$Exact<BaseRegion>,\n  type: \"polygon\",\n  open?: boolean,\n  points: Array<[number, number]>\n|}\n\nexport type Region = Point | PixelRegion | Box | Polygon\n\nexport const getEnclosingBox = (region: Region) => {\n  switch (region.type) {\n    case \"polygon\": {\n      const box = {\n        x: Math.min(...region.points.map(([x, y]) => x)),\n        y: Math.min(...region.points.map(([x, y]) => y)),\n        w: 0,\n        h: 0\n      }\n      box.w = Math.max(...region.points.map(([x, y]) => x)) - box.x\n      box.h = Math.max(...region.points.map(([x, y]) => y)) - box.y\n      return box\n    }\n    case \"box\": {\n      return { x: region.x, y: region.y, w: region.w, h: region.h }\n    }\n    case \"point\": {\n      return { x: region.x, y: region.y, w: 0, h: 0 }\n    }\n    case \"pixel\": {\n      if (\n        region.sx !== undefined &&\n        region.sy !== undefined &&\n        region.w &&\n        region.h\n      ) {\n        return { x: region.sx, y: region.sy, w: region.w, h: region.h }\n      }\n      if (region.points) {\n        const box = {\n          x: Math.min(...region.points.map(([x, y]) => x)),\n          y: Math.min(...region.points.map(([x, y]) => y)),\n          w: 0,\n          h: 0\n        }\n        box.w = Math.max(...region.points.map(([x, y]) => x)) - box.x\n        box.h = Math.max(...region.points.map(([x, y]) => y)) - box.y\n        return box\n      }\n    }\n  }\n  throw new Error(\"unknown region\")\n}\n\nexport const moveRegion = (region: Region, x: number, y: number) => {\n  switch (region.type) {\n    case \"point\": {\n      return { ...region, x, y }\n    }\n    case \"box\": {\n      return { ...region, x: x - region.w / 2, y: y - region.h / 2 }\n    }\n  }\n  return region\n}\n","// @flow weak\n\nimport React, { Fragment } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\n\nconst Svg = styled(\"svg\")({\n  pointerEvents: \"none\",\n  position: \"absolute\",\n  zIndex: 1,\n  left: 0,\n  top: 0,\n  width: \"100%\",\n  height: \"100%\",\n  \"& text\": {\n    fill: \"#fff\"\n  },\n  \"& path\": {\n    vectorEffect: \"non-scaling-stroke\",\n    strokeWidth: 2,\n    opacity: 0.5,\n    stroke: \"#FFF\",\n    fill: \"none\",\n    strokeDasharray: 5,\n    animationDuration: \"4s\",\n    animationTimingFunction: \"linear\",\n    animationIterationCount: \"infinite\",\n    animationPlayState: \"running\"\n  }\n})\n\nexport const PointDistances = ({\n  projectRegionBox,\n  regions,\n  pointDistancePrecision,\n  realSize\n}) => {\n  return (\n    <Svg>\n      {regions\n        .filter(r1 => r1.type === \"point\")\n        .flatMap((r1, i1) =>\n          regions\n            .filter((r2, i2) => i2 > i1)\n            .filter(r2 => r2.type === \"point\")\n            .map(r2 => {\n              const pr1 = projectRegionBox(r1)\n              const pr2 = projectRegionBox(r2)\n              const prm = {\n                x: (pr1.x + pr1.w / 2 + pr2.x + pr2.w / 2) / 2,\n                y: (pr1.y + pr1.h / 2 + pr2.y + pr2.h / 2) / 2\n              }\n              let displayDistance\n              if (realSize) {\n                const { w, h, unitName } = realSize\n                displayDistance =\n                  Math.sqrt(\n                    Math.pow(r1.x * w - r2.x * w, 2) +\n                      Math.pow(r1.y * h - r2.y * h, 2)\n                  ).toFixed(pointDistancePrecision) + unitName\n              } else {\n                displayDistance =\n                  (\n                    Math.sqrt(\n                      Math.pow(r1.x - r2.x, 2) + Math.pow(r1.y - r2.y, 2)\n                    ) * 100\n                  ).toFixed(pointDistancePrecision) + \"%\"\n              }\n              return (\n                <Fragment>\n                  <path\n                    d={`M${pr1.x + pr1.w / 2},${pr1.y + pr1.h / 2} L${pr2.x +\n                      pr2.w / 2},${pr2.y + pr2.h / 2}`}\n                  />\n                  <text x={prm.x} y={prm.y}>\n                    {displayDistance}\n                  </text>\n                </Fragment>\n              )\n            })\n        )}\n    </Svg>\n  )\n}\n\nexport default PointDistances\n","// @flow weak\n\nimport React from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport DefaultRegionLabel from \"../RegionLabel\"\nimport LockIcon from \"@material-ui/icons/Lock\"\n\nconst copyWithout = (obj, ...args) => {\n  const newObj = { ...obj }\n  for (const arg of args) {\n    delete newObj[arg]\n  }\n  return newObj\n}\n\nexport const RegionTags = ({\n  regions,\n  projectRegionBox,\n  mouseEvents,\n  regionClsList,\n  regionTagList,\n  onBeginRegionEdit,\n  onChangeRegion,\n  onCloseRegionEdit,\n  onDeleteRegion,\n  layoutParams,\n  imageSrc,\n  RegionEditLabel\n}) => {\n  const RegionLabel =\n    RegionEditLabel != null ? RegionEditLabel : DefaultRegionLabel\n  return regions\n    .filter(r => r.visible || r.visible === undefined)\n    .map(region => {\n      const pbox = projectRegionBox(region)\n      const { iw, ih } = layoutParams.current\n      let margin = 8\n      if (region.highlighted && region.type === \"box\") margin += 6\n      const labelBoxHeight =\n        region.editingLabels && !region.locked ? 170 : region.tags ? 60 : 50\n      const displayOnTop = pbox.y > labelBoxHeight\n\n      const coords = displayOnTop\n        ? {\n            left: pbox.x,\n            top: pbox.y - margin / 2\n          }\n        : { left: pbox.x, top: pbox.y + pbox.h + margin / 2 }\n      if (region.locked) {\n        return (\n          <div\n            key={region.id}\n            style={{\n              position: \"absolute\",\n              ...coords,\n              zIndex: 10 + (region.editingLabels ? 5 : 0)\n            }}\n          >\n            <Paper\n              style={{\n                position: \"absolute\",\n                left: 0,\n                ...(displayOnTop ? { bottom: 0 } : { top: 0 }),\n                zIndex: 10,\n                backgroundColor: \"#fff\",\n                borderRadius: 4,\n                padding: 2,\n                paddingBottom: 0,\n                opacity: 0.5,\n                pointerEvents: \"none\"\n              }}\n            >\n              <LockIcon style={{ width: 16, height: 16, color: \"#333\" }} />\n            </Paper>\n          </div>\n        )\n      }\n      return (\n        <div\n          key={region.id}\n          style={{\n            position: \"absolute\",\n            ...coords,\n            zIndex: 10 + (region.editingLabels ? 5 : 0),\n            width: 200\n          }}\n          onMouseDown={e => e.preventDefault()}\n          onMouseUp={e => e.preventDefault()}\n          onMouseEnter={e => {\n            if (region.editingLabels) {\n              mouseEvents.onMouseUp(e)\n              e.button = 1\n              mouseEvents.onMouseUp(e)\n            }\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              left: 0,\n              ...(displayOnTop ? { bottom: 0 } : { top: 0 })\n            }}\n            {...(!region.editingLabels\n              ? copyWithout(mouseEvents, \"onMouseDown\", \"onMouseUp\")\n              : {})}\n          >\n            <RegionLabel\n              allowedClasses={regionClsList}\n              allowedTags={regionTagList}\n              onOpen={onBeginRegionEdit}\n              onChange={onChangeRegion}\n              onClose={onCloseRegionEdit}\n              onDelete={onDeleteRegion}\n              editing={region.editingLabels}\n              region={region}\n              regions={regions}\n              imageSrc={imageSrc}\n            />\n          </div>\n        </div>\n      )\n    })\n}\n\nexport default RegionTags\n","// @flow weak\n\nimport React, { Fragment } from \"react\"\nimport HighlightBox from \"../HighlightBox\"\nimport { styled } from \"@material-ui/core/styles\"\nimport PreventScrollToParents from \"../PreventScrollToParents\"\n\nconst TransformGrabber = styled(\"div\")({\n  width: 8,\n  height: 8,\n  zIndex: 2,\n  border: \"2px solid #FFF\",\n  position: \"absolute\"\n})\n\nconst boxCursorMap = [\n  [\"nw-resize\", \"n-resize\", \"ne-resize\"],\n  [\"w-resize\", \"grab\", \"e-resize\"],\n  [\"sw-resize\", \"s-resize\", \"se-resize\"]\n]\n\nexport const RegionSelectAndTransformBoxes = ({\n  regions,\n  mouseEvents,\n  projectRegionBox,\n  dragWithPrimary,\n  createWithPrimary,\n  zoomWithPrimary,\n  onBeginMovePoint,\n  onSelectRegion,\n  layoutParams,\n  mat,\n  onBeginBoxTransform,\n  onBeginMovePolygonPoint,\n  onAddPolygonPoint\n}) => {\n  return regions\n    .filter(r => r.visible || r.visible === undefined)\n    .filter(r => !r.locked)\n    .map((r, i) => {\n      const pbox = projectRegionBox(r)\n      const { iw, ih } = layoutParams.current\n      return (\n        <Fragment key={r.id}>\n          <PreventScrollToParents>\n            <HighlightBox\n              region={r}\n              mouseEvents={mouseEvents}\n              dragWithPrimary={dragWithPrimary}\n              createWithPrimary={createWithPrimary}\n              zoomWithPrimary={zoomWithPrimary}\n              onBeginMovePoint={onBeginMovePoint}\n              onSelectRegion={onSelectRegion}\n              pbox={pbox}\n            />\n            {r.type === \"box\" &&\n              !dragWithPrimary &&\n              !zoomWithPrimary &&\n              !r.locked &&\n              r.highlighted &&\n              mat.a < 1.2 &&\n              [\n                [0, 0],\n                [0.5, 0],\n                [1, 0],\n                [1, 0.5],\n                [1, 1],\n                [0.5, 1],\n                [0, 1],\n                [0, 0.5],\n                [0.5, 0.5]\n              ].map(([px, py], i) => (\n                <TransformGrabber\n                  key={i}\n                  {...mouseEvents}\n                  onMouseDown={e => {\n                    if (e.button === 0)\n                      return onBeginBoxTransform(r, [px * 2 - 1, py * 2 - 1])\n                    mouseEvents.onMouseDown(e)\n                  }}\n                  style={{\n                    left: pbox.x - 4 - 2 + pbox.w * px,\n                    top: pbox.y - 4 - 2 + pbox.h * py,\n                    cursor: boxCursorMap[py * 2][px * 2],\n                    borderRadius: px === 0.5 && py === 0.5 ? 4 : undefined\n                  }}\n                />\n              ))}\n            {r.type === \"polygon\" &&\n              !dragWithPrimary &&\n              !zoomWithPrimary &&\n              !r.locked &&\n              r.highlighted &&\n              r.points.map(([px, py], i) => {\n                const proj = mat\n                  .clone()\n                  .inverse()\n                  .applyToPoint(px * iw, py * ih)\n                return (\n                  <TransformGrabber\n                    key={i}\n                    {...mouseEvents}\n                    onMouseDown={e => {\n                      if (e.button === 0 && (!r.open || i === 0))\n                        return onBeginMovePolygonPoint(r, i)\n                      mouseEvents.onMouseDown(e)\n                    }}\n                    style={{\n                      cursor: !r.open\n                        ? \"move\"\n                        : i === 0\n                        ? \"pointer\"\n                        : undefined,\n                      pointerEvents:\n                        r.open && i === r.points.length - 1\n                          ? \"none\"\n                          : undefined,\n                      left: proj.x - 4,\n                      top: proj.y - 4\n                    }}\n                  />\n                )\n              })}\n            {r.type === \"polygon\" &&\n              r.highlighted &&\n              !dragWithPrimary &&\n              !zoomWithPrimary &&\n              !r.locked &&\n              !r.open &&\n              r.points.length > 1 &&\n              r.points\n                .map((p1, i) => [p1, r.points[(i + 1) % r.points.length]])\n                .map(([p1, p2]) => [(p1[0] + p2[0]) / 2, (p1[1] + p2[1]) / 2])\n                .map((pa, i) => {\n                  const proj = mat\n                    .clone()\n                    .inverse()\n                    .applyToPoint(pa[0] * iw, pa[1] * ih)\n                  return (\n                    <TransformGrabber\n                      key={i}\n                      {...mouseEvents}\n                      onMouseDown={e => {\n                        if (e.button === 0)\n                          return onAddPolygonPoint(r, pa, i + 1)\n                        mouseEvents.onMouseDown(e)\n                      }}\n                      style={{\n                        cursor: \"copy\",\n                        left: proj.x - 4,\n                        top: proj.y - 4,\n                        border: \"2px dotted #fff\",\n                        opacity: 0.5\n                      }}\n                    />\n                  )\n                })}\n          </PreventScrollToParents>\n        </Fragment>\n      )\n    })\n}\n\nexport default RegionSelectAndTransformBoxes\n","// @flow\n\nimport React, { createContext, useContext, useState } from \"react\"\n\nconst defaultSettings = {\n  showCrosshairs: false,\n  // annotationmode: \"Object Detection\"\n}\n\nexport const SettingsContext = createContext(defaultSettings)\n\nconst pullSettingsFromLocalStorage = () => {\n  if (!window || !window.localStorage) return {}\n  let settings = {}\n  for (let i = 0; i < window.localStorage.length; i++) {\n    const key = window.localStorage.key(i)\n    if (key.startsWith(\"settings_\")) {\n      try {\n        settings[key.replace(\"settings_\", \"\")] = JSON.parse(\n          window.localStorage.getItem(key)\n        )\n      } catch (e) {}\n    }\n  }\n  return settings\n}\n\nexport const useSettings = () => useContext(SettingsContext)\n\nexport const SettingsProvider = ({ children }) => {\n  const [state, changeState] = useState(() => pullSettingsFromLocalStorage())\n  const changeSetting = (setting: string, value: any) => {\n    changeState({ ...state, [setting]: value })\n    window.localStorage.setItem(`settings_${setting}`, JSON.stringify(value))\n  }\n  return (\n    <SettingsContext.Provider value={{ ...state, changeSetting }}>\n      {children}\n    </SettingsContext.Provider>\n  )\n}\n\nexport default SettingsProvider\n","// @flow weak\n\nimport React, { useRef, useEffect, useMemo } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport useEventCallback from \"use-event-callback\"\nimport { useSettings } from \"../SettingsProvider\"\n\nconst Video = styled(\"video\")({\n  zIndex: 0,\n  position: \"absolute\"\n})\n\nconst StyledImage = styled(\"img\")({\n  zIndex: 0,\n  position: \"absolute\"\n})\n\nexport default ({\n  imagePosition,\n  mouseEvents,\n  videoTime,\n  videoSrc,\n  imageSrc,\n  onLoad,\n  videoPlaying,\n  onChangeVideoTime,\n  onChangeVideoPlaying\n}) => {\n  const settings = useSettings()\n  const videoRef = useRef()\n  const imageRef = useRef()\n\n  useEffect(() => {\n    if (!videoPlaying && videoRef.current) {\n      videoRef.current.currentTime = (videoTime || 0) / 1000\n    }\n  }, [videoTime])\n\n  useEffect(() => {\n    let renderLoopRunning = false\n    if (videoRef.current) {\n      if (videoPlaying) {\n        videoRef.current.play()\n        renderLoopRunning = true\n        if (settings.videoPlaybackSpeed) {\n          videoRef.current.playbackRate = parseFloat(\n            settings.videoPlaybackSpeed\n          )\n        }\n      } else {\n        videoRef.current.pause()\n      }\n    }\n\n    function checkForNewFrame() {\n      if (!renderLoopRunning) return\n      if (!videoRef.current) return\n      const newVideoTime = Math.floor(videoRef.current.currentTime * 1000)\n      if (videoTime !== newVideoTime) {\n        onChangeVideoTime(newVideoTime)\n      }\n      if (videoRef.current.paused) {\n        renderLoopRunning = false\n        onChangeVideoPlaying(false)\n      }\n      requestAnimationFrame(checkForNewFrame)\n    }\n    checkForNewFrame()\n\n    return () => {\n      renderLoopRunning = false\n    }\n  }, [videoPlaying])\n\n  const onLoadedVideoMetadata = useEventCallback(event => {\n    const videoElm = event.currentTarget\n    videoElm.currentTime = (videoTime || 0) / 1000\n    if (onLoad)\n      onLoad({\n        naturalWidth: videoElm.videoWidth,\n        naturalHeight: videoElm.videoHeight,\n        videoElm: videoElm,\n        duration: videoElm.duration\n      })\n  })\n  const onImageLoaded = useEventCallback(event => {\n    const imageElm = event.currentTarget\n    if (onLoad)\n      onLoad({\n        naturalWidth: imageElm.naturalWidth,\n        naturalHeight: imageElm.naturalHeight,\n        imageElm\n      })\n  })\n\n  const stylePosition = useMemo(() => {\n    let width = imagePosition.bottomRight.x - imagePosition.topLeft.x\n    let height = imagePosition.bottomRight.y - imagePosition.topLeft.y\n    return {\n      left: imagePosition.topLeft.x,\n      top: imagePosition.topLeft.y,\n      width: isNaN(width) ? 0 : width,\n      height: isNaN(height) ? 0 : height\n    }\n  }, [\n    imagePosition.topLeft.x,\n    imagePosition.topLeft.y,\n    imagePosition.bottomRight.x,\n    imagePosition.bottomRight.y\n  ])\n\n  if (!videoSrc && !imageSrc) return \"No imageSrc or videoSrc provided\"\n\n  return imageSrc && videoTime === undefined ? (\n    <StyledImage\n      {...mouseEvents}\n      src={imageSrc}\n      ref={imageRef}\n      style={stylePosition}\n      onLoad={onImageLoaded}\n    />\n  ) : (\n    <Video\n      {...mouseEvents}\n      ref={videoRef}\n      style={stylePosition}\n      onLoadedMetadata={onLoadedVideoMetadata}\n      src={videoSrc || imageSrc}\n    />\n  )\n}\n","// @flow weak\n\nimport React, {\n  Fragment,\n  useRef,\n  useState,\n  useLayoutEffect,\n  useEffect\n} from \"react\"\nimport type { Node } from \"react\"\nimport { Matrix } from \"transformation-matrix-js\"\nimport getImageData from \"get-image-data\"\nimport Crosshairs from \"../Crosshairs\"\nimport type {\n  Region,\n  PixelRegion,\n  Point,\n  Polygon,\n  Box\n} from \"./region-tools.js\"\nimport { getEnclosingBox } from \"./region-tools.js\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport RegionLabel from \"../RegionLabel\"\nimport LockIcon from \"@material-ui/icons/Lock\"\nimport Paper from \"@material-ui/core/Paper\"\nimport HighlightBox from \"../HighlightBox\"\nimport PreventScrollToParents from \"../PreventScrollToParents\"\nimport useWindowSize from \"../hooks/use-window-size.js\"\nimport useMouse from \"./use-mouse\"\nimport useProjectRegionBox from \"./use-project-box\"\nimport useLoadImage from \"../hooks/use-load-image\"\nimport useExcludePattern from \"../hooks/use-exclude-pattern\"\nimport { useRafState } from \"react-use\"\nimport PointDistances from \"../PointDistances\"\nimport RegionTags from \"../RegionTags\"\nimport RegionSelectAndTransformBoxes from \"../RegionSelectAndTransformBoxes\"\nimport VideoOrImageCanvasBackground from \"../VideoOrImageCanvasBackground\"\nimport useEventCallback from \"use-event-callback\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  regions: Array<Region>,\n  imageSrc?: string,\n  videoSrc?: string,\n  videoTime?: number,\n  onMouseMove?: ({ x: number, y: number }) => any,\n  onMouseDown?: ({ x: number, y: number }) => any,\n  onMouseUp?: ({ x: number, y: number }) => any,\n  dragWithPrimary?: boolean,\n  zoomWithPrimary?: boolean,\n  createWithPrimary?: boolean,\n  showTags?: boolean,\n  realSize?: { width: number, height: number, unitName: string },\n  showCrosshairs?: boolean,\n  showPointDistances?: boolean,\n  pointDistancePrecision?: number,\n  regionClsList?: Array<string>,\n  regionTagList?: Array<string>,\n  allowedArea?: { x: number, y: number, w: number, h: number },\n  RegionEditLabel?: Node,\n  videoPlaying?: boolean,\n\n  onChangeRegion: Region => any,\n  onBeginRegionEdit: Region => any,\n  onCloseRegionEdit: Region => any,\n  onDeleteRegion: Region => any,\n  onBeginBoxTransform: (Box, [number, number]) => any,\n  onBeginMovePolygonPoint: (Polygon, index: number) => any,\n  onAddPolygonPoint: (Polygon, point: [number, number], index: number) => any,\n  onSelectRegion: Region => any,\n  onBeginMovePoint: Point => any,\n  onImageOrVideoLoaded: ({\n    naturalWidth: number,\n    naturalHeight: number,\n    duration?: number\n  }) => any,\n  onChangeVideoTime: number => any\n}\n\nconst getDefaultMat = () => Matrix.from(1, 0, 0, 1, -10, -10)\n\nexport default ({\n  regions,\n  imageSrc,\n  videoSrc,\n  videoTime,\n  realSize,\n  showTags,\n  onMouseMove = p => null,\n  onMouseDown = p => null,\n  onMouseUp = p => null,\n  dragWithPrimary = false,\n  zoomWithPrimary = false,\n  createWithPrimary = false,\n  pointDistancePrecision = 0,\n  regionClsList,\n  regionTagList,\n  showCrosshairs,\n  showPointDistances,\n  allowedArea,\n  RegionEditLabel = null,\n  videoPlaying = false,\n\n  onImageOrVideoLoaded,\n  onChangeRegion,\n  onBeginRegionEdit,\n  onCloseRegionEdit,\n  onBeginBoxTransform,\n  onBeginMovePolygonPoint,\n  onAddPolygonPoint,\n  onSelectRegion,\n  onBeginMovePoint,\n  onDeleteRegion,\n  onChangeVideoTime,\n  onChangeVideoPlaying\n}: Props) => {\n  const classes = useStyles()\n\n  const canvasEl = useRef(null)\n  const layoutParams = useRef({})\n  const [dragging, changeDragging] = useRafState(false)\n  const [maskImagesLoaded, changeMaskImagesLoaded] = useRafState(0)\n  const [zoomStart, changeZoomStart] = useRafState(null)\n  const [zoomEnd, changeZoomEnd] = useRafState(null)\n  const [mat, changeMat] = useRafState(getDefaultMat())\n  const maskImages = useRef({})\n  const windowSize = useWindowSize()\n\n  const { mouseEvents, mousePosition } = useMouse({\n    canvasEl,\n    dragging,\n    mat,\n    layoutParams,\n    changeMat,\n    zoomStart,\n    zoomEnd,\n    changeZoomStart,\n    changeZoomEnd,\n    changeDragging,\n    zoomWithPrimary,\n    dragWithPrimary,\n    onMouseMove,\n    onMouseDown,\n    onMouseUp\n  })\n\n  useLayoutEffect(() => changeMat(mat.clone()), [windowSize])\n\n  const innerMousePos = mat.applyToPoint(\n    mousePosition.current.x,\n    mousePosition.current.y\n  )\n\n  const projectRegionBox = useProjectRegionBox({ layoutParams, mat })\n\n  const [imageDimensions, changeImageDimensions] = useState()\n  const imageLoaded = Boolean(imageDimensions && imageDimensions.naturalWidth)\n  const onVideoOrImageLoaded = useEventCallback(\n    ({ naturalWidth, naturalHeight, duration }) => {\n      const dims = { naturalWidth, naturalHeight, duration }\n      if (onImageOrVideoLoaded) onImageOrVideoLoaded(dims)\n      changeImageDimensions(dims)\n      // Redundant update to fix rerendering issues\n      setTimeout(() => changeImageDimensions(dims), 10)\n    }\n  )\n\n  const excludePattern = useExcludePattern()\n\n  const canvas = canvasEl.current\n  if (canvas && imageLoaded) {\n    const { clientWidth, clientHeight } = canvas\n\n    const fitScale = Math.max(\n      imageDimensions.naturalWidth / (clientWidth - 20),\n      imageDimensions.naturalHeight / (clientHeight - 20)\n    )\n\n    const [iw, ih] = [\n      imageDimensions.naturalWidth / fitScale,\n      imageDimensions.naturalHeight / fitScale\n    ]\n\n    layoutParams.current = {\n      iw,\n      ih,\n      fitScale,\n      canvasWidth: clientWidth,\n      canvasHeight: clientHeight\n    }\n  }\n\n  useLayoutEffect(() => {\n    if (!imageDimensions) return\n    const { clientWidth, clientHeight } = canvas\n    canvas.width = clientWidth\n    canvas.height = clientHeight\n    const context = canvas.getContext(\"2d\")\n\n    context.save()\n    context.transform(\n      ...mat\n        .clone()\n        .inverse()\n        .toArray()\n    )\n\n    const { iw, ih } = layoutParams.current\n\n    if (allowedArea) {\n      // Pattern to indicate the NOT allowed areas\n      const { x, y, w, h } = allowedArea\n      context.save()\n      context.globalAlpha = 0.25\n      const outer = [\n        [0, 0],\n        [iw, 0],\n        [iw, ih],\n        [0, ih]\n      ]\n      const inner = [\n        [x * iw, y * ih],\n        [x * iw + w * iw, y * ih],\n        [x * iw + w * iw, y * ih + h * ih],\n        [x * iw, y * ih + h * ih]\n      ]\n      context.moveTo(...outer[0])\n      outer.forEach(p => context.lineTo(...p))\n      context.lineTo(...outer[0])\n      context.closePath()\n\n      inner.reverse()\n      context.moveTo(...inner[0])\n      inner.forEach(p => context.lineTo(...p))\n      context.lineTo(...inner[0])\n\n      context.fillStyle = excludePattern || \"#f00\"\n      context.fill()\n\n      context.restore()\n    }\n\n    context.save()\n    context.globalAlpha = mat.a * 0.5 + 0.5\n    context.lineWidth = mat.a * 1 + 1\n    if (context.globalAlpha > 0.6) {\n      context.shadowColor = \"black\"\n      context.shadowBlur = 4\n    }\n    for (const region of regions.filter(\n      r => r.visible || r.visible === undefined\n    )) {\n      switch (region.type) {\n        case \"point\": {\n          context.save()\n\n          context.beginPath()\n          context.strokeStyle = region.color\n          context.moveTo(region.x * iw - 10, region.y * ih)\n          context.lineTo(region.x * iw - 2, region.y * ih)\n          context.moveTo(region.x * iw + 10, region.y * ih)\n          context.lineTo(region.x * iw + 2, region.y * ih)\n          context.moveTo(region.x * iw, region.y * ih - 10)\n          context.lineTo(region.x * iw, region.y * ih - 2)\n          context.moveTo(region.x * iw, region.y * ih + 10)\n          context.lineTo(region.x * iw, region.y * ih + 2)\n          context.moveTo(region.x * iw + 5, region.y * ih)\n          context.arc(region.x * iw, region.y * ih, 5, 0, 2 * Math.PI)\n          context.stroke()\n          context.restore()\n          break\n        }\n        case \"box\": {\n          context.save()\n\n          context.shadowColor = \"black\"\n          context.shadowBlur = 4\n          context.strokeStyle = region.color\n          context.strokeRect(\n            region.x * iw,\n            region.y * ih,\n            region.w * iw,\n            region.h * ih\n          )\n\n          context.restore()\n          break\n        }\n        case \"polygon\": {\n          context.save()\n\n          context.shadowColor = \"black\"\n          context.shadowBlur = 4\n          context.strokeStyle = region.color\n\n          context.beginPath()\n          context.moveTo(region.points[0][0] * iw, region.points[0][1] * ih)\n          for (const point of region.points) {\n            context.lineTo(point[0] * iw, point[1] * ih)\n          }\n          if (!region.open) context.closePath()\n          context.stroke()\n          context.restore()\n          break\n        }\n        case \"pixel\": {\n          context.save()\n\n          if (maskImages.current[region.src]) {\n            if (maskImages.current[region.src].nodeName === \"CANVAS\") {\n              context.globalAlpha = 0.6\n              context.drawImage(\n                maskImages.current[region.src],\n                region.sx * iw,\n                region.sy * ih,\n                region.w * iw,\n                region.h * ih\n              )\n            }\n          } else {\n            maskImages.current[region.src] = new Image()\n            maskImages.current[region.src].onload = () => {\n              const img = maskImages.current[region.src]\n              const newCanvas = document.createElement(\"canvas\")\n              newCanvas.width = img.naturalWidth\n              newCanvas.height = img.naturalHeight\n              const ctx = newCanvas.getContext(\"2d\")\n              ctx.drawImage(img, 0, 0)\n              const imgData = ctx.getImageData(\n                0,\n                0,\n                img.naturalWidth,\n                img.naturalHeight\n              )\n              for (let i = 0; i < imgData.data.length; i += 4) {\n                const [r, g, b, a] = imgData.data.slice(i, i + 4)\n                const black = r < 10 && g < 10 && b < 10\n                imgData.data[i] = 0\n                imgData.data[i + 1] = 0\n                imgData.data[i + 2] = black ? 255 : 0\n                imgData.data[i + 3] = black ? 255 : 0\n              }\n              ctx.clearRect(0, 0, img.naturalWidth, img.naturalHeight)\n              ctx.putImageData(imgData, 0, 0)\n              maskImages.current[region.src] = newCanvas\n              changeMaskImagesLoaded(maskImagesLoaded + 1)\n            }\n            maskImages.current[region.src].src = region.src\n          }\n\n          context.restore()\n          break\n        }\n      }\n    }\n    context.restore()\n    context.restore()\n  })\n\n  const { iw, ih } = layoutParams.current\n\n  let zoomBox =\n    !zoomStart || !zoomEnd\n      ? null\n      : {\n          ...mat\n            .clone()\n            .inverse()\n            .applyToPoint(zoomStart.x, zoomStart.y),\n          w: (zoomEnd.x - zoomStart.x) / mat.a,\n          h: (zoomEnd.y - zoomStart.y) / mat.d\n        }\n  if (zoomBox) {\n    if (zoomBox.w < 0) {\n      zoomBox.x += zoomBox.w\n      zoomBox.w *= -1\n    }\n    if (zoomBox.h < 0) {\n      zoomBox.y += zoomBox.h\n      zoomBox.h *= -1\n    }\n  }\n\n  const imagePosition = {\n    topLeft: mat\n      .clone()\n      .inverse()\n      .applyToPoint(0, 0),\n    bottomRight: mat\n      .clone()\n      .inverse()\n      .applyToPoint(iw, ih)\n  }\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        maxHeight: \"calc(100vh - 68px)\",\n        position: \"relative\",\n        overflow: \"hidden\",\n        cursor: createWithPrimary\n          ? \"crosshair\"\n          : dragging\n          ? \"grabbing\"\n          : dragWithPrimary\n          ? \"grab\"\n          : zoomWithPrimary\n          ? mat.a < 1\n            ? \"zoom-out\"\n            : \"zoom-in\"\n          : undefined\n      }}\n    >\n      {showCrosshairs && (\n        <Crosshairs key=\"crossHairs\" mousePosition={mousePosition} />\n      )}\n      {imageLoaded && (\n        <RegionSelectAndTransformBoxes\n          key=\"regionSelectAndTransformBoxes\"\n          regions={regions}\n          mouseEvents={mouseEvents}\n          projectRegionBox={projectRegionBox}\n          dragWithPrimary={dragWithPrimary}\n          createWithPrimary={createWithPrimary}\n          zoomWithPrimary={zoomWithPrimary}\n          onBeginMovePoint={onBeginMovePoint}\n          onSelectRegion={onSelectRegion}\n          layoutParams={layoutParams}\n          mat={mat}\n          onBeginBoxTransform={onBeginBoxTransform}\n          onBeginMovePolygonPoint={onBeginMovePolygonPoint}\n          onAddPolygonPoint={onAddPolygonPoint}\n        />\n      )}\n      {imageLoaded && showTags && (\n        <PreventScrollToParents key=\"regionTags\">\n          <RegionTags\n            regions={regions}\n            projectRegionBox={projectRegionBox}\n            mouseEvents={mouseEvents}\n            regionClsList={regionClsList}\n            regionTagList={regionTagList}\n            onBeginRegionEdit={onBeginRegionEdit}\n            onChangeRegion={onChangeRegion}\n            onCloseRegionEdit={onCloseRegionEdit}\n            onDeleteRegion={onDeleteRegion}\n            layoutParams={layoutParams}\n            imageSrc={imageSrc}\n            RegionEditLabel={RegionEditLabel}\n          />\n        </PreventScrollToParents>\n      )}\n\n      {zoomWithPrimary && zoomBox !== null && (\n        <div\n          key=\"zoomBox\"\n          style={{\n            position: \"absolute\",\n            zIndex: 1,\n            border: \"1px solid #fff\",\n            pointerEvents: \"none\",\n            left: zoomBox.x,\n            top: zoomBox.y,\n            width: zoomBox.w,\n            height: zoomBox.h\n          }}\n        />\n      )}\n      {showPointDistances && (\n        <PointDistances\n          key=\"pointDistances\"\n          regions={regions}\n          realSize={realSize}\n          projectRegionBox={projectRegionBox}\n          pointDistancePrecision={pointDistancePrecision}\n        />\n      )}\n      <PreventScrollToParents\n        style={{ width: \"100%\", height: \"100%\" }}\n        {...mouseEvents}\n      >\n        <>\n          <canvas className={classes.canvas} ref={canvasEl} />\n          <VideoOrImageCanvasBackground\n            videoPlaying={videoPlaying}\n            imagePosition={imagePosition}\n            mouseEvents={mouseEvents}\n            onLoad={onVideoOrImageLoaded}\n            videoTime={videoTime}\n            videoSrc={videoSrc}\n            imageSrc={imageSrc}\n            onChangeVideoTime={onChangeVideoTime}\n            onChangeVideoPlaying={onChangeVideoPlaying}\n          />\n        </>\n      </PreventScrollToParents>\n      <div className={classes.zoomIndicator}>\n        {((1 / mat.a) * 100).toFixed(0)}%\n      </div>\n    </div>\n  )\n}\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  canvas: { width: \"100%\", height: \"100%\", position: \"relative\", zIndex: 1 },\n  zoomIndicator: {\n    position: \"absolute\",\n    bottom: 16,\n    right: 0,\n    backgroundColor: \"rgba(0,0,0,0.4)\",\n    color: \"#fff\",\n    opacity: 0.5,\n    fontWeight: \"bolder\",\n    fontSize: 14,\n    padding: 4\n  }\n}\n","// @flow weak\n\nimport { useRef } from \"react\"\nimport excludePatternSrc from \"./xpattern.js\"\n\nexport default () => {\n  const excludePattern = useRef(null)\n  if (excludePattern.current === null) {\n    excludePattern.current = {\n      image: new Image(),\n      pattern: null\n    }\n    const canvas = document.createElement(\"canvas\")\n    canvas.width = 100\n    canvas.height = 100\n    const context = canvas.getContext(\"2d\")\n\n    excludePattern.current.image.onload = () => {\n      excludePattern.current.pattern = context.createPattern(\n        excludePattern.current.image,\n        \"repeat\"\n      )\n    }\n    excludePattern.current.image.src = excludePatternSrc\n  }\n  return excludePattern.current.pattern\n}\n","export default `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wMSAxY5oG+lzgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAcSURBVAjXY/jPwPCfAQnA+TAGugLcAhhakRUAAK3lEe8m9qZhAAAAAElFTkSuQmCC`\n","// @flow\n\nimport React, { memo, createContext, useContext } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport Button from \"@material-ui/core/Button\"\nimport useEventCallback from \"use-event-callback\"\n\nconst StyledButton = styled(Button)({\n  width: 80,\n  margin: 2\n})\n\nconst IconName = styled(\"div\")({\n  fontWeight: \"bold\"\n})\n\nexport const HeaderButtonContext = createContext()\n\nconst MemoizedHeaderButton = memo(\n  ({ name, disabled, Icon, onClick }) => (\n    <StyledButton disabled={disabled} onClick={onClick}>\n      <div>\n        <Icon />\n        <IconName>{name}</IconName>\n      </div>\n    </StyledButton>\n  ),\n  (prevProps, nextProps) =>\n    prevProps.name === nextProps.name &&\n    prevProps.disabled === nextProps.disabled\n)\n\nexport const HeaderButton = ({\n  name,\n  disabled,\n  Icon\n}: {\n  name: string,\n  disabled?: boolean,\n  Icon: any\n}) => {\n  const { onHeaderButtonClick } = useContext(HeaderButtonContext)\n  const onClick = useEventCallback(() => onHeaderButtonClick(name))\n  return (\n    <MemoizedHeaderButton\n      name={name}\n      disabled={disabled}\n      Icon={Icon}\n      onClick={onClick}\n    />\n  )\n}\n\nexport default HeaderButton\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  header: {\n    display: \"flex\",\n    position: \"relative\",\n    flexDirection: \"row\",\n    flexShrink: 0,\n    zIndex: 10,\n    boxShadow: \"0px 3px 8px rgba(0,0,0,.1)\"\n  },\n  fileInfo: {\n    alignItems: \"center\",\n    flexGrow: 1,\n    \"&.videoMode\": {\n      flexMode: 0.1\n    },\n    display: \"flex\",\n    fontWeight: \"bold\",\n    color: grey[800],\n    marginRight: 16,\n    fontSize: 24,\n    paddingLeft: 16\n  }\n}\n","// @flow weak\n\nimport React, { useMemo, useState, useEffect } from \"react\"\nimport { styled } from \"@material-ui/core/styles\"\nimport range from \"lodash/range\"\nimport * as colors from \"@material-ui/core/colors\"\nimport useMeasure from \"react-use-measure\"\nimport useEventCallback from \"use-event-callback\"\nimport { useRafState } from \"react-use\"\nimport getTimeString from \"./get-time-string\"\n\nconst Container = styled(\"div\")({\n  position: \"relative\",\n  display: \"flex\",\n  flexGrow: 1,\n  minWidth: 240,\n  marginLeft: 16,\n  marginRight: 16\n})\n\nconst Tick = styled(\"div\")({\n  position: \"absolute\",\n  width: 2,\n  marginLeft: -1,\n  height: \"100%\",\n  backgroundColor: colors.grey[300],\n  bottom: 0\n})\nconst TickText = styled(\"div\")({\n  position: \"absolute\",\n  userSelect: \"none\",\n  fontSize: 10,\n  color: colors.grey[600],\n  fontWeight: \"bold\",\n  bottom: 0\n})\n\nconst PositionCursor = styled(\"div\")({\n  position: \"absolute\",\n  bottom: \"calc(50% + 6px)\",\n  fontSize: 10,\n  fontWeight: \"bold\",\n  color: \"#fff\",\n  display: \"grid\",\n  placeItems: \"center\",\n  width: 48,\n  marginLeft: -24,\n  borderRadius: 2,\n  height: 24,\n  backgroundColor: colors.blue[500],\n  userSelect: \"none\",\n  fontVariantNumeric: \"tabular-nums\",\n\n  \"&::before\": {\n    position: \"absolute\",\n    bottom: -6,\n    left: 24 - 8,\n    content: '\"\"',\n    width: 0,\n    height: 0,\n    borderTop: `8px solid ${colors.blue[500]}`,\n    borderLeft: \"8px solid transparent\",\n    borderRight: \"8px solid transparent\"\n  }\n})\n\nconst KeyframeMarker = styled(\"div\")({\n  position: \"absolute\",\n  bottom: 8,\n  cursor: \"pointer\",\n  opacity: 0.75,\n  fontSize: 10,\n  fontWeight: \"bold\",\n  color: \"#fff\",\n  display: \"grid\",\n  placeItems: \"center\",\n  width: 16,\n  marginLeft: 0,\n  borderTopLeftRadius: 2,\n  borderTopRightRadius: 2,\n  height: 12,\n  marginLeft: -8,\n  backgroundColor: colors.red[500],\n  userSelect: \"none\",\n  fontVariantNumeric: \"tabular-nums\",\n\n  \"&::before\": {\n    position: \"absolute\",\n    bottom: -8,\n    left: 0,\n    content: '\"\"',\n    width: 0,\n    height: 0,\n    borderTop: `8px solid ${colors.red[500]}`,\n    borderLeft: \"8px solid transparent\",\n    borderRight: \"8px solid transparent\"\n  }\n})\n\nconst min = 60000\nconst displayIntervalPairs = [\n  [50, 250],\n  [100, 500],\n  [250, 1000],\n  [1000, 5000],\n  [5000, 30000],\n  [10000, min],\n  [30000, min * 2],\n  [min, min * 5],\n  [min * 5, min * 30],\n  [min * 10, min * 60],\n  [min * 30, min * 60 * 3],\n  [min * 60, min * 60 * 5]\n]\n\nconst getMajorInterval = duration => {\n  for (const [minor, major] of displayIntervalPairs) {\n    if (duration / major < 6 && duration / major > 2) {\n      return [minor, major]\n    }\n  }\n  return [duration / 4, duration]\n}\n\nexport default ({\n  currentTime = 0,\n  duration,\n  onChangeCurrentTime,\n  keyframes\n}) => {\n  const [ref, bounds] = useMeasure()\n  const [instantCurrentTime, changeInstantCurrentTime] = useState(currentTime)\n  const [draggingTime, changeDraggingTime] = useRafState(false)\n  const keyframeTimes = Object.keys(keyframes || {})\n    .map(t => parseInt(t))\n    .filter(t => !isNaN(t))\n    .sort((a, b) => a - b)\n\n  useEffect(() => {\n    if (currentTime !== instantCurrentTime) {\n      changeInstantCurrentTime(currentTime)\n    }\n  }, [currentTime])\n\n  const [minorInterval, majorInterval] = useMemo(\n    () => getMajorInterval(duration),\n    [duration]\n  )\n\n  const onMouseMove = useEventCallback(e => {\n    if (draggingTime) {\n      const px = (e.clientX - bounds.left) / bounds.width\n      changeInstantCurrentTime(\n        Math.min(duration, Math.max(0, Math.floor(px * duration)))\n      )\n    }\n  })\n\n  const onMouseUp = useEventCallback(e => {\n    changeDraggingTime(false)\n    const px = (e.clientX - bounds.left) / bounds.width\n    const newTime = Math.min(duration, Math.max(0, Math.floor(px * duration)))\n    changeInstantCurrentTime(newTime)\n    onChangeCurrentTime(newTime)\n  })\n\n  // TODO skeleton\n  if (!duration) return null\n\n  return (\n    <Container onMouseMove={onMouseMove} onMouseUp={onMouseUp} ref={ref}>\n      {range(0, duration, majorInterval).map(a => (\n        <>\n          <Tick\n            key={a}\n            style={{ left: (a / duration) * bounds.width, height: \"50%\" }}\n          />\n          <TickText\n            style={{\n              left: (a / duration) * bounds.width + 8,\n              bottom: \"calc(50% - 12px)\"\n            }}\n          >\n            {getTimeString(a)}\n          </TickText>\n        </>\n      ))}\n      {range(0, duration, minorInterval)\n        .filter(a => !Number.isInteger(a / majorInterval))\n        .map(a => (\n          <Tick\n            key={a}\n            style={{\n              left: (a / duration) * bounds.width,\n              height: \"25%\"\n            }}\n          />\n        ))}\n      {keyframeTimes.map(kt => (\n        <KeyframeMarker\n          onClick={() => onChangeCurrentTime(kt)}\n          key={kt}\n          style={{ left: (kt / duration) * bounds.width }}\n        />\n      ))}\n      <PositionCursor\n        onMouseDown={e => changeDraggingTime(true)}\n        style={{\n          cursor: draggingTime ? \"grabbing\" : \"grab\",\n          left: (instantCurrentTime / duration) * bounds.width\n        }}\n      >\n        {getTimeString(instantCurrentTime)}\n      </PositionCursor>\n    </Container>\n  )\n}\n","// @flow\n\nimport React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport HeaderButton, { HeaderButtonContext } from \"../HeaderButton\"\nimport BackIcon from \"@material-ui/icons/KeyboardArrowLeft\"\nimport NextIcon from \"@material-ui/icons/KeyboardArrowRight\"\nimport PlayIcon from \"@material-ui/icons/PlayArrow\"\nimport PauseIcon from \"@material-ui/icons/Pause\"\nimport SettingsIcon from \"@material-ui/icons/Settings\"\nimport HelpIcon from \"@material-ui/icons/Help\"\nimport FullscreenIcon from \"@material-ui/icons/Fullscreen\"\nimport ExitIcon from \"@material-ui/icons/ExitToApp\"\nimport QueuePlayNextIcon from \"@material-ui/icons/QueuePlayNext\"\nimport HotkeysIcon from \"@material-ui/icons/Keyboard\"\nimport styles from \"./styles\"\nimport KeyframeTimeline from \"../KeyframeTimeline\"\nimport classnames from \"classnames\"\nimport BookmarkIcon from \"@material-ui/icons/Bookmark\"\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  onHeaderButtonClick: string => any,\n  title: string,\n  inFullScreen?: boolean,\n  multipleImages?: boolean,\n  isAVideoFrame?: boolean,\n  nextVideoFrameHasRegions?: boolean,\n  videoDuration?: number,\n  videoPlaying?: boolean,\n\n  onChangeCurrentTime?: (newTime: number) => any,\n  onPlayVideo?: Function,\n  onPauseVideo?: Function\n}\n\nexport const Header = (\n  {\n    state,\n  onHeaderButtonClick,\n  title,\n  inFullScreen,\n  videoMode,\n  isAVideoFrame = false,\n  nextVideoFrameHasRegions = false,\n  videoDuration,\n  currentVideoTime,\n  multipleImages,\n  videoPlaying,\n  onChangeCurrentTime,\n  keyframes,\n  alwaysShowPrevButton,\n  alwaysShowNextButton\n}: Props) => {\n  const classes = useStyles()\n  return (\n    <div className={classes.header}>\n      <div className={classnames(classes.fileInfo, videoMode && \"videoMode\")}>\n        {title}\n      </div>\n      <div className={classnames(classes.fileInfo, videoMode && \"videoMode\")}>\n      Mode: {(state.annotatemode===\"object_detection\")?(\"Object Detection\"):(\"Segmentation\")} \n      </div>\n      {videoMode && (\n        <KeyframeTimeline\n          key=\"keyframeTimeline\"\n          currentTime={currentVideoTime}\n          duration={videoDuration}\n          onChangeCurrentTime={onChangeCurrentTime}\n          keyframes={keyframes}\n        />\n      )}\n      <div className={classes.headerActions}>\n        <HeaderButtonContext.Provider value={{ onHeaderButtonClick }}>\n          {(multipleImages || alwaysShowPrevButton) && (\n            <HeaderButton name=\"Prev\" Icon={BackIcon} />\n          )}\n          {(multipleImages || alwaysShowNextButton) && (\n            <>\n              <HeaderButton name=\"Next\" Icon={NextIcon} />\n              <HeaderButton\n                name=\"Clone\"\n                disabled={nextVideoFrameHasRegions}\n                Icon={QueuePlayNextIcon}\n              />\n            </>\n          )}\n          {videoMode && (\n            <>\n              {!videoPlaying ? (\n                <HeaderButton key=\"play\" name=\"Play\" Icon={PlayIcon} />\n              ) : (\n                <HeaderButton key=\"pause\" name=\"Pause\" Icon={PauseIcon} />\n              )}\n            </>\n          )}\n          <HeaderButton name={(state.annotatemode===\"object_detection\")?(\"SEGMENTATION\"):(\"OBJECT DETECTION\")} Icon={HotkeysIcon} />\n          {/* <HeaderButton name=\"changemode\" Icon={HotkeysIcon} /> */}\n\n          {(state.curr_image_index > 0) && (\n          <HeaderButton name=\"prev image\" Icon={BackIcon} />\n          )}\n          <HeaderButton name=\"next image\" Icon={NextIcon} />\n        \n\n          <HeaderButton name=\"Settings\" Icon={SettingsIcon} />\n          {inFullScreen ? (\n            <HeaderButton name=\"Window\" Icon={FullscreenIcon} />\n          ) : (\n            <HeaderButton name=\"Fullscreen\" Icon={FullscreenIcon} />\n          )}\n          {/* <HeaderButton name=\"Hotkeys\" Icon={HotkeysIcon} /> */}\n          {/* <HeaderButton name=\"Save\" Icon={ExitIcon} /> */}\n          <HeaderButton name=\"Review\" Icon={BookmarkIcon} />\n\n        </HeaderButtonContext.Provider>\n      </div>\n    </div>\n  )\n}\n\nexport default Header\n","// @flow\n\nimport React, { createContext, useContext, memo } from \"react\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Tooltip from \"@material-ui/core/Tooltip\"\nimport { blue } from \"@material-ui/core/colors\"\n\nexport const SelectedTool = createContext()\n\nexport const SmallToolButton = ({\n  id,\n  name,\n  icon,\n  selected,\n  togglable,\n  alwaysShowing = false\n}: {\n  id: string,\n  name: string,\n  icon: any,\n  alwaysShowing?: boolean,\n  selected?: boolean,\n  togglable?: boolean\n}) => {\n  const { enabledTools, selectedTool, onClickTool } = useContext(SelectedTool)\n  if (!enabledTools.includes(id) && !alwaysShowing) return null\n  selected = selected || selectedTool === id\n  return (\n    <Tooltip placement=\"right\" title={name}>\n      <div>\n        <IconButton\n          disabled={!togglable ? selected : undefined}\n          aria-label={name}\n          onClick={() => onClickTool(id)}\n          size=\"small\"\n          style={{\n            width: 50,\n            height: 50,\n            margin: 1,\n            color: selected ? blue[500] : undefined\n          }}\n        >\n          {icon}\n        </IconButton>\n      </div>\n    </Tooltip>\n  )\n}\n\nexport default memo(\n  SmallToolButton,\n  (prevProps, nextProps) =>\n    prevProps.togglable === nextProps.togglable &&\n    prevProps.selected === nextProps.selected &&\n    prevProps.name === nextProps.name &&\n    prevProps.id === nextProps.id\n)\n","// @flow\n\nimport React, { useMemo } from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport {\n  faArrowsAlt,\n  faMousePointer,\n  faExpandArrowsAlt,\n  faTag,\n  faPaintBrush,\n  faCrosshairs,\n  faDrawPolygon,\n  faVectorSquare,\n  faHandPaper,\n  faSearch\n} from \"@fortawesome/free-solid-svg-icons\"\nimport SmallToolButton, { SelectedTool } from \"../SmallToolButton\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { grey } from \"@material-ui/core/colors\"\n\nconst useStyles = makeStyles({\n  iconTools: {\n    display: \"flex\",\n    padding: 4,\n    flexDirection: \"column\",\n    zIndex: 9,\n    boxShadow: \"0px 0px 5px rgba(0,0,0,0.1)\",\n    borderRight: `1px solid ${grey[300]}`,\n    backgroundColor: grey[100]\n  }\n})\n\ntype Props = {\n  showTags?: boolean,\n  enabledTools?: Array<string>,\n  selectedTool: string,\n  onClickTool: string => any\n}\n\nconst defaultTools = [\"select\", \"create-point\", \"create-box\", \"create-polygon\"]\n\nexport const IconTools = ({\n  showTags,\n  selectedTool,\n  onClickTool,\n  enabledTools = defaultTools\n}: Props) => {\n  const classes = useStyles()\n  const selectedToolContextValue = useMemo(\n    () => ({ enabledTools, selectedTool, onClickTool }),\n    [enabledTools, selectedTool]\n  )\n  return (\n    <div className={classes.iconTools}>\n      <SelectedTool.Provider value={selectedToolContextValue}>\n        <SmallToolButton\n          id=\"select\"\n          name=\"Select Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faMousePointer} />}\n        />\n        <SmallToolButton\n          alwaysShowing\n          id=\"pan\"\n          name=\"Drag/Pan\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faHandPaper} />}\n        />\n        <SmallToolButton\n          alwaysShowing\n          id=\"zoom\"\n          name=\"Zoom In/Out\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faSearch} />}\n        />\n        {/* <SmallToolButton\n          name=\"Move Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faArrowsAlt} />}\n        />\n        <SmallToolButton\n          name=\"Resize Region\"\n          icon={\n            <FontAwesomeIcon size=\"xs\" fixedWidth icon={faExpandArrowsAlt} />\n          }\n        /> */}\n        <SmallToolButton\n          alwaysShowing\n          togglable\n          id=\"show-tags\"\n          selected={showTags}\n          name=\"Show Tags\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faTag} />}\n        />\n        <SmallToolButton\n          id=\"create-point\"\n          name=\"Add Point\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faCrosshairs} />}\n        />\n        <SmallToolButton\n          id=\"create-box\"\n          name=\"Add Bounding Box\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faVectorSquare} />}\n        />\n        <SmallToolButton\n          id=\"create-polygon\"\n          name=\"Add Polygon\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faDrawPolygon} />}\n        />\n        <SmallToolButton\n          id=\"create-pixel\"\n          name=\"Add Pixel Region\"\n          icon={<FontAwesomeIcon size=\"xs\" fixedWidth icon={faPaintBrush} />}\n        />\n      </SelectedTool.Provider>\n    </div>\n  )\n}\n\nexport default IconTools\n","import { grey } from \"@material-ui/core/colors\"\n\nexport default {\n  container: {\n    display: \"flex\",\n    flexGrow: 1,\n    flexDirection: \"column\",\n    height: \"100%\",\n    maxHeight: \"100vh\",\n    backgroundColor: \"#fff\",\n    overflow: \"hidden\",\n    \"&.fullscreen\": {\n      position: \"absolute\",\n      zIndex: 99999,\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    }\n  },\n  workspace: {\n    backgroundColor: grey[200],\n    flexGrow: 1,\n    display: \"flex\",\n    flexDirection: \"row\",\n    height: \"100%\",\n    overflow: \"hidden\"\n  },\n  iconToolsContainer: { display: \"flex\" },\n  imageCanvasContainer: {\n    display: \"flex\",\n    flexGrow: 1,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  noImageSelected: {\n    fontWeight: \"bold\",\n    fontSize: 32,\n    color: grey[500]\n  },\n  sidebarContainer: {\n    width: 300,\n    flexShrink: 0,\n    overflowY: \"auto\",\n    backgroundColor: grey[100],\n    borderLeft: `1px solid ${grey[300]}`,\n    zIndex: 9,\n    height: \"100%\",\n    boxShadow: \"0px 0px 5px rgba(0,0,0,0.1)\"\n  }\n}\n","// @flow\n\nimport React from \"react\"\nimport Dialog from \"@material-ui/core/Dialog\"\nimport DialogTitle from \"@material-ui/core/DialogTitle\"\nimport DialogContent from \"@material-ui/core/DialogContent\"\nimport DialogActions from \"@material-ui/core/DialogActions\"\nimport Button from \"@material-ui/core/Button\"\nimport Survey from \"material-survey/components/Survey\"\nimport { useSettings } from \"../SettingsProvider\"\n\nexport const SettingsDialog = ({ open, onClose }) => {\n  const settings = useSettings()\n  return (\n    <Dialog open={open || false} onClose={onClose}>\n      <DialogTitle>Settings</DialogTitle>\n      <DialogContent style={{ minWidth: 400 }}>\n        <Survey\n          variant=\"flat\"\n          noActions\n          defaultAnswers={settings}\n          onQuestionChange={(q, a, answers) => settings.changeSetting(q, a)}\n          form={{\n            questions: [\n              {\n                type: \"boolean\",\n                title: \"Show Crosshairs\",\n                name: \"showCrosshairs\"\n              },\n              {\n                type: \"dropdown\",\n                title: \"Video Playback Speed\",\n                name: \"videoPlaybackSpeed\",\n                defaultValue: \".25x\",\n                choices: [\"0.25x\", \"0.5x\", \"1x\", \"2x\"]\n              }\n              // {\n                //   type:\"dropdown\",\n                //   title:\"Annotation mode\",\n                //   name: \"annotationmode\",\n                //   defaultValue:\"Object Detection\",\n                //   choices:[\"Object Detection\",\"Segmentation\"]\n                // },\n            ]\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Close</Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default SettingsDialog\n","// @flow\n\nimport React from \"react\"\nimport ReactFullscreen from \"react-full-screen\"\n\nexport const Fullscreen = props => {\n  if (!props.enabled) return props.children\n  return <ReactFullscreen {...props}>{props.children}</ReactFullscreen>\n}\n\nexport default Fullscreen\n","import { getIn } from \"seamless-immutable\"\n\nexport default state => {\n  let currentImageIndex = null,\n    pathToActiveImage,\n    activeImage\n  if (state.annotationType === \"image\") {\n    currentImageIndex = state.images.findIndex(\n      img =>\n        img.src === state.selectedImage &&\n        (state.selectedImageFrameTime === undefined ||\n          img.frameTime === state.selectedImageFrameTime)\n    )\n    if (currentImageIndex === -1) {\n      currentImageIndex = null\n      activeImage = null\n    } else {\n      pathToActiveImage = [\"images\", currentImageIndex]\n      activeImage = getIn(state, pathToActiveImage)\n    }\n  } else if (state.annotationType === \"video\") {\n    pathToActiveImage = [\"keyframes\", state.currentVideoTime || 0]\n    activeImage = getIn(state, pathToActiveImage) || null\n  }\n  return { currentImageIndex, pathToActiveImage, activeImage }\n}\n","// @flow\n\nimport type { Region } from \"../../ImageCanvas/region-tools.js\"\n\nconst emptyArr = []\n\nexport default (\n  keyframes: { [string | number]: { regions: Array<Region> } },\n  time: number\n) => {\n  if (keyframes[time || 0]) {\n    return keyframes[time || 0].regions\n  }\n  // Get surrounding video keyframes\n  const keyframeTimes = Object.keys(keyframes)\n    .map(a => parseInt(a))\n    .filter(a => !isNaN(a))\n  if (keyframeTimes.length === 0) return emptyArr\n  keyframeTimes.sort((a, b) => a - b)\n  let nextKeyframeTimeIndex = keyframeTimes.findIndex(kt => kt >= time)\n  if (nextKeyframeTimeIndex === -1) {\n    return (\n      keyframes[keyframeTimes[keyframeTimes.length - 1]].regions || emptyArr\n    )\n  } else if (nextKeyframeTimeIndex === 0) {\n    return emptyArr\n  }\n\n  const t1 = keyframeTimes[nextKeyframeTimeIndex - 1]\n  const prevKeyframe = keyframes[t1]\n  const t2 = keyframeTimes[nextKeyframeTimeIndex]\n  const nextKeyframe = keyframes[t2]\n\n  const [prevRegionMap, nextRegionMap] = [{}, {}]\n  for (const region of prevKeyframe.regions) prevRegionMap[region.id] = region\n  for (const region of nextKeyframe.regions) nextRegionMap[region.id] = region\n\n  const impliedRegions = []\n\n  // Weighted time coefficients for linear transition\n  const w1 = (t2 - time) / (t2 - t1)\n  const w2 = 1 - w1\n\n  for (const regionId in prevRegionMap) {\n    const [prev, next] = [prevRegionMap[regionId], nextRegionMap[regionId]]\n    if (!next) {\n      impliedRegions.push({\n        ...prev,\n        highlighted: false,\n        editingLabels: false\n      })\n      continue\n    }\n    switch (prev.type) {\n      case \"point\": {\n        impliedRegions.push({\n          ...prev,\n          highlighted: false,\n          editingLabels: false,\n          x: prev.x * w1 + next.x * w2,\n          y: prev.y * w1 + next.y * w2\n        })\n        break\n      }\n      case \"box\": {\n        impliedRegions.push({\n          ...prev,\n          highlighted: false,\n          editingLabels: false,\n          x: prev.x * w1 + next.x * w2,\n          y: prev.y * w1 + next.y * w2,\n          w: prev.w * w1 + next.w * w2,\n          h: prev.h * w1 + next.h * w2\n        })\n        break\n      }\n      case \"polygon\": {\n        if (next.points.length === prev.points.length) {\n          impliedRegions.push({\n            ...prev,\n            highlighted: false,\n            editingLabels: false,\n            points: prev.points.map((pp, i) => [\n              pp[0] * w1 + next.points[i][0] * w2,\n              pp[1] * w1 + next.points[i][1] * w2\n            ])\n          })\n        } else {\n          impliedRegions.push(prev)\n        }\n        break\n      }\n    }\n  }\n\n  return impliedRegions\n}\n","// @flow\n\nimport { useMemo } from \"react\"\nimport type { MainLayoutVideoAnnotationState } from \"../Annotator/types\"\nimport getImpliedVideoRegions from \"../Annotator/reducers/get-implied-video-regions.js\"\n\nconst emptyArr = []\n\nexport default (state: MainLayoutVideoAnnotationState) => {\n  if (state.annotationType !== \"video\") return emptyArr\n  const { keyframes, currentVideoTime = 0 } = state\n  // TODO memoize\n  return useMemo(() => getImpliedVideoRegions(keyframes, currentVideoTime), [\n    keyframes,\n    currentVideoTime\n  ])\n}\n","// @flow\n\nimport React, { useState, useRef } from \"react\"\nimport type { Node } from \"react\"\nimport Grid from \"@material-ui/core/Grid\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport Sidebar from \"../Sidebar/ind\"\nimport ImageCanvas from \"../ImageCanvas\"\nimport Header from \"../Header\"\nimport IconTools from \"../IconTools\"\nimport styles from \"./styles\"\nimport type { MainLayoutState, Action } from \"./types\"\nimport useKey from \"use-key-hook\"\nimport classnames from \"classnames\"\nimport { useSettings } from \"../SettingsProvider\"\nimport SettingsDialog from \"../SettingsDialog\"\nimport Fullscreen from \"../Fullscreen\"\nimport getActiveImage from \"../Annotator/reducers/get-active-image\"\nimport useImpliedVideoRegions from \"./use-implied-video-regions\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  state: MainLayoutState,\n  RegionEditLabel?: Node,\n  dispatch: Action => any,\n  alwaysShowNextButton?: boolean,\n  alwaysShowPrevButton?: boolean\n}\n\nexport default ({\n  state,\n  dispatch,\n  alwaysShowNextButton = false,\n  alwaysShowPrevButton = false,\n  RegionEditLabel\n}: Props) => {\n  const classes = useStyles()\n  const settings = useSettings()\n  const memoizedActionFns = useRef({})\n  const action = (type: string, ...params: Array<string>) => {\n    const fnKey = `${type}(${params.join(\",\")})`\n    if (memoizedActionFns.current[fnKey])\n      return memoizedActionFns.current[fnKey]\n\n    const fn = (...args: any) =>\n      params.length > 0\n        ? dispatch(\n          ({\n            type,\n            ...params.reduce((acc, p, i) => ((acc[p] = args[i]), acc), {})\n          }: any)\n          )\n        : dispatch({ type, ...args[0] })\n  memoizedActionFns.current[fnKey] = fn\n  return fn\n}\n\nconst { currentImageIndex, activeImage } = getActiveImage(state)\nlet nextImage\nif (currentImageIndex !== null) {\n  nextImage = state.images[currentImageIndex + 1]\n}\n\nuseKey(() => dispatch({ type: \"CANCEL\" }), {\n  detectKeys: [27]\n})\n\nconst isAVideoFrame = activeImage && activeImage.frameTime !== undefined\n\nlet impliedVideoRegions = useImpliedVideoRegions(state)\n\n\nreturn (\n  <Fullscreen\n    enabled={state.fullScreen}\n    onChange={open => {\n      if (!open) {\n        action(\"HEADER_BUTTON_CLICKED\", \"buttonName\")(\"Exit Fullscreen\")\n      }\n    }}\n  >\n    <div\n      className={classnames(\n        classes.container,\n        state.fullScreen && \"Fullscreen\"\n      )}\n    >\n      <div className={classes.headerContainer}>\n        <Header\n          state={state}\n          onHeaderButtonClick={action(\"HEADER_BUTTON_CLICKED\", \"buttonName\")}\n          videoMode={state.annotationType === \"video\"}\n          // alwaysShowNextButton={alwaysShowNextButton}\n          // alwaysShowPrevButton={alwaysShowPrevButton}\n          inFullScreen={state.fullScreen}\n          isAVideoFrame={isAVideoFrame}\n          nextVideoFrameHasRegions={\n            !nextImage || (nextImage.regions && nextImage.regions.length > 0)\n          }\n          videoDuration={state.videoDuration}\n          multipleImages={state.images && state.images.length > 1}\n          title={\n            state.annotationType === \"image\"\n              ? activeImage\n                ? activeImage.name\n                : \"No Image Selected\"\n              : state.videoName || \"\"\n          }\n          onChangeCurrentTime={action(\"CHANGE_VIDEO_TIME\", \"newTime\")}\n          videoPlaying={state.videoPlaying}\n          currentVideoTime={state.currentVideoTime}\n          keyframes={state.keyframes}\n        />\n      </div>\n      <div className={classes.workspace}>\n        <div className={classes.iconToolsContainer}>\n          <IconTools\n            enabledTools={state.enabledTools}\n            showTags={state.showTags}\n            selectedTool={state.selectedTool}\n            onClickTool={action(\"SELECT_TOOL\", \"selectedTool\")}\n          />\n        </div>\n        <div className={classes.imageCanvasContainer}>\n          {state.annotationType === \"image\" && !state.selectedImage ? (\n            <div className={classes.noImageSelected}>No Image Selected</div>\n          ) : (\n              <div style={{ height: \"100%\", width: \"100%\" }}>\n                <ImageCanvas\n                  {...settings}\n                  key={state.selectedImage}\n                  showTags={state.showTags}\n                  allowedArea={state.allowedArea}\n                  regionClsList={state.regionClsList}\n                  regionTagList={state.regionTagList}\n                  regions={\n                    state.annotationType === \"image\"\n                      ? activeImage.regions || []\n                      : impliedVideoRegions\n                  }\n                  realSize={activeImage ? activeImage.realSize : undefined}\n                  videoPlaying={state.videoPlaying}\n                  imageSrc={\n                    state.annotationType === \"image\"\n                      ? state.selectedImage\n                      : null\n                  }\n                  videoSrc={\n                    state.annotationType === \"video\" ? state.videoSrc : null\n                  }\n                  pointDistancePrecision={state.pointDistancePrecision}\n                  createWithPrimary={state.selectedTool.includes(\"create\")}\n                  dragWithPrimary={state.selectedTool === \"pan\"}\n                  zoomWithPrimary={state.selectedTool === \"zoom\"}\n                  showPointDistances={state.showPointDistances}\n                \n                  videoTime={\n                    state.annotationType === \"image\"\n                      ? state.selectedImageFrameTime\n                      : state.currentVideoTime\n                  }\n                  onMouseMove={action(\"MOUSE_MOVE\")}\n                  onMouseDown={action(\"MOUSE_DOWN\")}\n                  onMouseUp={action(\"MOUSE_UP\")}\n                  onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\n                  onBeginRegionEdit={action(\"OPEN_REGION_EDITOR\", \"region\")}\n                  onCloseRegionEdit={action(\"CLOSE_REGION_EDITOR\", \"region\")}\n                  onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\n                  onBeginBoxTransform={action(\n                    \"BEGIN_BOX_TRANSFORM\",\n                    \"box\",\n                    \"directions\"\n                  )}\n                  onBeginMovePolygonPoint={action(\n                    \"BEGIN_MOVE_POLYGON_POINT\",\n                    \"polygon\",\n                    \"pointIndex\"\n                  )}\n                  onAddPolygonPoint={action(\n                    \"ADD_POLYGON_POINT\",\n                    \"polygon\",\n                    \"point\",\n                    \"pointIndex\"\n                  )}\n                  onSelectRegion={action(\"SELECT_REGION\", \"region\")}\n                  onBeginMovePoint={action(\"BEGIN_MOVE_POINT\", \"point\")}\n                  onImageLoaded={action(\"IMAGE_LOADED\", \"image\")}\n                  RegionEditLabel={RegionEditLabel}\n                  onImageOrVideoLoaded={action(\n                    \"IMAGE_OR_VIDEO_LOADED\",\n                    \"metadata\"\n                  )}\n                  onChangeVideoTime={action(\"CHANGE_VIDEO_TIME\", \"newTime\")}\n                  onChangeVideoPlaying={action(\n                    \"CHANGE_VIDEO_PLAYING\",\n                    \"isPlaying\"\n                  )}\n                />\n              </div>\n            )}\n        </div>\n        <div className={classes.sidebarContainer}>\n          <Sidebar\n            metadata={state.metadata}\n            allowed_metadata={state.allowed_metadata}\n            preview = {state.preview}\n            previewList = {state.previewList}\n            debug={window.localStorage.$ANNOTATE_DEBUG_MODE && state}\n            taskDescription={state.taskDescription}\n            images={state.images}\n            regions={activeImage ? activeImage.regions : null}\n            history={state.history}\n            currentImage={activeImage}\n            labelImages={state.labelImages}\n            imageClsList={state.imageClsList}\n            imageTagList={state.imageTagList}\n            keyframes={state.keyframes}\n            currentVideoTime={state.currentVideoTime}\n            onChangeMetadata={action(\"CHANGE_METADATA\",\"metadata\")}\n            onChangeImage={action(\"CHANGE_IMAGE\", \"delta\")}\n            onSelectRegion={action(\"SELECT_REGION\", \"region\")}\n            onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\n            onSelectImage={action(\"SELECT_IMAGE\", \"image\")}\n            onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\n            onRestoreHistory={action(\"RESTORE_HISTORY\")}\n            onChangeVideoTime={action(\"CHANGE_VIDEO_TIME\", \"newTime\")}\n            onDeleteKeyframe={action(\"DELETE_KEYFRAME\", \"time\")}\n            onShortcutActionDispatched={dispatch}\n          />\n        </div>\n      </div>\n      <SettingsDialog\n        open={state.settingsOpen}\n        onClose={() =>\n          dispatch({\n            type: \"HEADER_BUTTON_CLICKED\",\n            buttonName: \"Settings\"\n          })\n        }\n      />\n    </div>\n  </Fullscreen>\n)\n}\n","// @flow\n\nimport type { MainLayoutState, Action } from \"../../MainLayout/types\"\nimport { setIn, updateIn, asMutable, without } from \"seamless-immutable\"\nimport moment from \"moment\"\n\nconst typesToSaveWithHistory = {\n  BEGIN_BOX_TRANSFORM: \"Transform/Move Box\",\n  BEGIN_MOVE_POINT: \"Move Point\",\n  DELETE_REGION: \"Delete Region\"\n}\n\nexport const saveToHistory = (state: MainLayoutState, name: string) =>\n  updateIn(state, [\"history\"], h =>\n    [\n      {\n        time: moment().toDate(),\n        state: without(state, \"history\"),\n        name\n      }\n    ].concat((h || []).slice(0, 9))\n  )\n\nexport default reducer => {\n  return (state: MainLayoutState, action: Action) => {\n    const prevState = state\n    const nextState = reducer(state, action)\n\n    if (action.type === \"RESTORE_HISTORY\") {\n      if (state.history.length > 0) {\n        return setIn(\n          nextState.history[0].state,\n          [\"history\"],\n          nextState.history.slice(1)\n        )\n      }\n    } \n    // else if(action.type === \"CLEAR_HISTORY\"){\n    //   return setIn(state,[\"\"])\n    // }\n    else {\n      if (\n        prevState !== nextState &&\n        Object.keys(typesToSaveWithHistory).includes(action.type)\n      ) {\n        return setIn(\n          nextState,\n          [\"history\"],\n          [\n            {\n              time: moment().toDate(),\n              state: without(prevState, \"history\"),\n              name: typesToSaveWithHistory[action.type] || action.type\n            }\n          ]\n            .concat(nextState.history || [])\n            .slice(0, 9)\n        )\n      }\n    }\n\n    return nextState\n  }\n}\n","// @flow\n\nimport type { MainLayoutState, Action } from \"../../MainLayout/types\"\nimport { moveRegion } from \"../../ImageCanvas/region-tools.js\"\nimport { getIn, setIn, updateIn } from \"seamless-immutable\"\nimport moment from \"moment\"\nimport isEqual from \"lodash/isEqual\"\nimport getActiveImage from \"./get-active-image\"\nimport { saveToHistory } from \"./history-handler.js\"\n\nconst getRandomId = () =>\n  Math.random()\n    .toString()\n    .split(\".\")[1]\n\nconst getRandomInt = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nconst getRandomColor = () => {\n  const h = getRandomInt(0, 360)\n  const s = 100\n  const l = 50\n  return `hsl(${h},${s}%,${l}%)`\n}\n\nexport default (state: MainLayoutState, action: Action) => {\n  // Throttle certain actions\n  if (action.type === \"MOUSE_MOVE\") {\n    if (Date.now() - ((state: any).lastMouseMoveCall || 0) < 16) return state\n    state = setIn(state, [\"lastMouseMoveCall\"], Date.now())\n  }\n  if (!action.type.includes(\"MOUSE\")) {\n    state = setIn(state, [\"lastAction\"], action)\n  }\n\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\n    state\n  )\n\n  const getRegionIndex = region => {\n    const regionId = typeof region === \"string\" ? region : region.id\n    if (!activeImage) return null\n    const regionIndex = (activeImage.regions || []).findIndex(\n      r => r.id === regionId\n    )\n    return regionIndex === -1 ? null : regionIndex\n  }\n  const getRegion = regionId => {\n    if (!activeImage) return null\n    const regionIndex = getRegionIndex(regionId)\n    if (regionIndex === null) return [null, null]\n    const region = activeImage.regions[regionIndex]\n    return [region, regionIndex]\n  }\n  const modifyRegion = (regionId, obj) => {\n    const [region, regionIndex] = getRegion(regionId)\n    if (!region) return state\n    if (obj !== null) {\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...region,\n        ...obj\n      })\n    } else {\n      // delete region\n      const regions = activeImage.regions\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (regions || []).filter(r => r.id !== region.id)\n      )\n    }\n  }\n  const unselectRegions = (state: MainLayoutState) => {\n    if (!activeImage) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map(r => ({\n        ...r,\n        highlighted: false\n      }))\n    )\n  }\n\n  const closeEditors = (state: MainLayoutState) => {\n    if (currentImageIndex === null) return state\n    return setIn(\n      state,\n      [...pathToActiveImage, \"regions\"],\n      (activeImage.regions || []).map(r => ({\n        ...r,\n        editingLabels: false\n      }))\n    )\n  }\n\n  const setNewImage = (img: string | Object) => {\n    let { src, frameTime } = typeof img === \"object\" ? img : { src: img }\n    return setIn(\n      setIn(state, [\"selectedImage\"], src),\n      [\"selectedImageFrameTime\"],\n      frameTime\n    )\n  }\n\n  switch (action.type) {\n    case \"@@INIT\": {\n      return state\n    }\n    case \"SELECT_IMAGE\": {\n      return setNewImage(action.image)\n    }\n    case \"CHANGE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const oldRegion = activeImage.regions[regionIndex]\n      if (oldRegion.cls !== action.region.cls) {\n        state = saveToHistory(state, \"Change Region Classification\")\n      }\n      if (!isEqual(oldRegion.tags, action.region.tags)) {\n        state = saveToHistory(state, \"Change Region Tags\")\n      }\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\", regionIndex],\n        action.region\n      )\n    }\n    case \"CHANGE_IMAGE\": {\n      if (!activeImage) return state\n      const { delta } = action\n      for (const key of Object.keys(delta)) {\n        if (key === \"cls\") saveToHistory(state, \"Change Image Class\")\n        if (key === \"tags\") saveToHistory(state, \"Change Image Tags\")\n        state = setIn(state, [...pathToActiveImage, key], delta[key])\n      }\n      return state\n    }\n\n    case \"SELECT_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const regions = [...(activeImage.regions || [])].map(r => ({\n        ...r,\n        highlighted: r.id === region.id,\n        editingLabels: r.id === region.id\n      }))\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n    case \"BEGIN_MOVE_POINT\": {\n      state = closeEditors(state)\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_REGION\",\n        regionId: action.point.id\n      })\n    }\n    case \"BEGIN_BOX_TRANSFORM\": {\n      const { box, directions } = action\n      state = closeEditors(state)\n      if (directions[0] === 0 && directions[1] === 0) {\n        return setIn(state, [\"mode\"], { mode: \"MOVE_REGION\", regionId: box.id })\n      } else {\n        return setIn(state, [\"mode\"], {\n          mode: \"RESIZE_BOX\",\n          regionId: box.id,\n          freedom: directions,\n          original: { x: box.x, y: box.y, w: box.w, h: box.h }\n        })\n      }\n    }\n    case \"BEGIN_MOVE_POLYGON_POINT\": {\n      const { polygon, pointIndex } = action\n      state = closeEditors(state)\n      if (\n        state.mode &&\n        state.mode.mode === \"DRAW_POLYGON\" &&\n        pointIndex === 0\n      ) {\n        return setIn(\n          modifyRegion(polygon, {\n            points: polygon.points.slice(0, -1),\n            open: false\n          }),\n          [\"mode\"],\n          null\n        )\n      } else {\n        state = saveToHistory(state, \"Move Polygon Point\")\n      }\n      return setIn(state, [\"mode\"], {\n        mode: \"MOVE_POLYGON_POINT\",\n        regionId: polygon.id,\n        pointIndex\n      })\n    }\n    case \"ADD_POLYGON_POINT\": {\n      const { polygon, point, pointIndex } = action\n      const regionIndex = getRegionIndex(polygon)\n      if (regionIndex === null) return state\n      const points = [...polygon.points]\n      points.splice(pointIndex, 0, point)\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...polygon,\n        points\n      })\n    }\n    case \"MOUSE_MOVE\": {\n      const { x, y } = action\n      if (!state.mode) return state\n      if (!activeImage) return state\n      switch (state.mode.mode) {\n        case \"MOVE_POLYGON_POINT\": {\n          const { pointIndex, regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              pointIndex\n            ],\n            [x, y]\n          )\n        }\n        case \"MOVE_REGION\": {\n          const { regionId } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          return setIn(\n            state,\n            [...pathToActiveImage, \"regions\", regionIndex],\n            moveRegion(activeImage.regions[regionIndex], x, y)\n          )\n        }\n        case \"RESIZE_BOX\": {\n          const {\n            regionId,\n            freedom: [xFree, yFree],\n            original: { x: ox, y: oy, w: ow, h: oh }\n          } = state.mode\n          const regionIndex = getRegionIndex(regionId)\n          if (regionIndex === null) return state\n          const box = activeImage.regions[regionIndex]\n\n          const dx = xFree === 0 ? ox : xFree === -1 ? Math.min(ox + ow, x) : ox\n          const dw =\n            xFree === 0\n              ? ow\n              : xFree === -1\n                ? ow + (ox - dx)\n                : Math.max(0, ow + (x - ox - ow))\n          const dy = yFree === 0 ? oy : yFree === -1 ? Math.min(oy + oh, y) : oy\n          const dh =\n            yFree === 0\n              ? oh\n              : yFree === -1\n                ? oh + (oy - dy)\n                : Math.max(0, oh + (y - oy - oh))\n\n          // determine if we should switch the freedom\n          if (dw <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree * -1, yFree])\n          }\n          if (dh <= 0.001) {\n            state = setIn(state, [\"mode\", \"freedom\"], [xFree, yFree * -1])\n          }\n\n          return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n            ...box,\n            x: dx,\n            w: dw,\n            y: dy,\n            h: dh\n          })\n        }\n        case \"DRAW_POLYGON\": {\n          const { regionId } = state.mode\n          const [region, regionIndex] = getRegion(regionId)\n          if (!region) return setIn(state, [\"mode\"], null)\n          return setIn(\n            state,\n            [\n              ...pathToActiveImage,\n              \"regions\",\n              regionIndex,\n              \"points\",\n              (region: any).points.length - 1\n            ],\n            [x, y]\n          )\n        }\n      }\n      return state\n    }\n    case \"MOUSE_DOWN\": {\n      if (!activeImage) return state\n      const { x, y } = action\n\n      let newRegion\n      if (state.allowedArea) {\n        const aa = state.allowedArea\n        if (x < aa.x || x > aa.x + aa.w || y < aa.y || y > aa.y + aa.h) {\n          return state\n        }\n      }\n\n      switch (state.selectedTool) {\n        case \"create-point\": {\n          state = saveToHistory(state, \"Create Point\")\n          newRegion = {\n            type: \"point\",\n            x,\n            y,\n            highlighted: true,\n            editingLabels: true,\n            color: getRandomColor(),\n            id: getRandomId()\n          }\n          break\n        }\n        case \"create-box\": {\n          state = saveToHistory(state, \"Create Box\")\n          newRegion = {\n            type: \"box\",\n            x: x,\n            y: y,\n            w: 0.01,\n            h: 0.01,\n            highlighted: true,\n            editingLabels: false,\n            color: getRandomColor(),\n            id: getRandomId()\n          }\n          state = unselectRegions(state)\n          state = setIn(state, [\"mode\"], {\n            mode: \"RESIZE_BOX\",\n            editLabelEditorAfter: true,\n            regionId: newRegion.id,\n            freedom: [1, 1],\n            original: { x, y, w: newRegion.w, h: newRegion.h },\n            isNew: true\n          })\n          break\n        }\n        case \"create-polygon\": {\n          if (state.mode && state.mode.mode === \"DRAW_POLYGON\") break\n          state = saveToHistory(state, \"Create Polygon\")\n          newRegion = {\n            type: \"polygon\",\n            points: [[x, y], [x, y]],\n            open: true,\n            highlighted: true,\n            color: getRandomColor(),\n            id: getRandomId()\n          }\n          state = setIn(state, [\"mode\"], {\n            mode: \"DRAW_POLYGON\",\n            regionId: newRegion.id\n          })\n          break\n        }\n      }\n\n      if (newRegion) {\n        state = unselectRegions(state)\n      }\n\n      if (state.mode) {\n        switch (state.mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const [polygon, regionIndex] = getRegion(state.mode.regionId)\n            if (!polygon) break\n            return setIn(\n              state,\n              [...pathToActiveImage, \"regions\", regionIndex],\n              { ...polygon, points: polygon.points.concat([[x, y]]) }\n            )\n          }\n        }\n      }\n\n      const regions = [...(activeImage.regions || [])]\n        .map(r => ({\n          ...r,\n          editingLabels: false\n        }))\n        .concat(newRegion ? [newRegion] : [])\n\n      return setIn(state, [...pathToActiveImage, \"regions\"], regions)\n    }\n    case \"MOUSE_UP\": {\n      const { x, y } = action\n      if (!state.mode) return state\n      switch (state.mode.mode) {\n        case \"RESIZE_BOX\": {\n          if (state.mode.isNew) {\n            if (\n              Math.abs(state.mode.original.x - x) < 0.01 &&\n              Math.abs(state.mode.original.y - y) < 0.01\n            ) {\n              return setIn(\n                modifyRegion(state.mode.regionId, null),\n                [\"mode\"],\n                null\n              )\n            }\n          }\n          if (state.mode.editLabelEditorAfter) {\n            return {\n              ...modifyRegion(state.mode.regionId, { editingLabels: true }),\n              mode: null\n            }\n          }\n        }\n        case \"MOVE_REGION\":\n        case \"MOVE_POLYGON_POINT\": {\n          return { ...state, mode: null }\n        }\n      }\n      return state\n    }\n    case \"CHANGE_REGION\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\", regionIndex],\n        region\n      )\n    }\n    case \"OPEN_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      const newRegions = setIn(\n        activeImage.regions.map(r => ({\n          ...r,\n          highlighted: false,\n          editingLabels: false\n        })),\n        [regionIndex],\n        {\n          ...(activeImage.regions || [])[regionIndex],\n          highlighted: true,\n          editingLabels: true\n        }\n      )\n      return setIn(state, [...pathToActiveImage, \"regions\"], newRegions)\n    }\n    case \"CLOSE_REGION_EDITOR\": {\n      const { region } = action\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(state, [...pathToActiveImage, \"regions\", regionIndex], {\n        ...(activeImage.regions || [])[regionIndex],\n        editingLabels: false\n      })\n    }\n    case \"DELETE_REGION\": {\n      const regionIndex = getRegionIndex(action.region)\n      if (regionIndex === null) return state\n      return setIn(\n        state,\n        [...pathToActiveImage, \"regions\"],\n        (activeImage.regions || []).filter(r => r.id !== action.region.id)\n      )\n    }\n    case \"HEADER_BUTTON_CLICKED\": {\n      const buttonName = action.buttonName.toLowerCase()\n      switch (buttonName) {\n        case \"prev\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === 0) return state\n          return setNewImage(state.images[currentImageIndex - 1])\n        }\n        case \"next\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setNewImage(state.images[currentImageIndex + 1])\n        }\n        case \"clone\": {\n          if (currentImageIndex === null) return state\n          if (currentImageIndex === state.images.length - 1) return state\n          return setIn(\n            setNewImage(state.images[currentImageIndex + 1]),\n            [\"images\", currentImageIndex + 1, \"regions\"],\n            activeImage.regions\n          )\n        }\n        case \"settings\": {\n          return setIn(state, [\"settingsOpen\"], !state.settingsOpen)\n        }\n        case \"fullscreen\": {\n          return setIn(state, [\"fullScreen\"], true)\n        }\n        case \"exit fullscreen\":\n        case \"window\": {\n          return setIn(state, [\"fullScreen\"], false)\n        }\n        case \"hotkeys\": {\n          return state\n        }\n        case \"exit\":\n        case \"done\": {\n          return state\n        }\n        //custom function\n        case \"next image\": {\n\n         // state.nextImage()\n          return state\n        }\n        case \"prev image\": {\n          //state.prevImage()\n          return state\n        }\n        // case \"changemode\": {\n\n        //   if (state.annotatemode === \"object_detection\") {\n        //     console.log(\"[annotatemode]\", state.annotatemode)\n        //     return setIn(state, [\"annotatemode\"], \"segmentation\")\n        //   } else {\n        //     console.log(\"[annotatemode]\", state.annotatemode)\n        //     return setIn(state, [\"annotatemode\"], \"object_detection\")\n        //   }\n\n        // }\n        case \"object detection\":{\n          return setIn(state, [\"annotatemode\"], \"object_detection\")\n\n        }\n        case \"segmentation\":{\n          return setIn(state, [\"annotatemode\"], \"segmentation\")\n        }\n      }\n      return state\n    }\n    case \"SELECT_TOOL\": {\n      state = setIn(state, [\"mode\"], null)\n      if (action.selectedTool === \"show-tags\") {\n        return setIn(state, [\"showTags\"], !state.showTags)\n      }\n      console.log(\"[selectedtool]\", state.selectedTool)\n      return setIn(state, [\"selectedTool\"], action.selectedTool)\n    }\n    case \"CANCEL\": {\n      const { mode } = state\n      if (mode) {\n        switch (mode.mode) {\n          case \"DRAW_POLYGON\": {\n            const { regionId } = mode\n            return modifyRegion(regionId, null)\n          }\n          case \"MOVE_POLYGON_POINT\":\n          case \"RESIZE_BOX\":\n          case \"MOVE_REGION\": {\n            return setIn(state, [\"mode\"], null)\n          }\n        }\n      }\n      // Close any open boxes\n      const regions: any = activeImage.regions\n      if (regions.some(r => r.editingLabels)) {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map(r => ({\n            ...r,\n            editingLabels: false\n          }))\n        )\n      } else {\n        return setIn(\n          state,\n          [...pathToActiveImage, \"regions\"],\n          regions.map(r => ({\n            ...r,\n            highlighted: false\n          }))\n        )\n      }\n    }\n\n    ////////custom dispach actions\n    case \"RELOAD\": {\n      return setIn(state,[\"images\"],action.image)\n\n    }\n\n    case \"ANNOTATION_MODE\": {\n      if (state.annotatemode === \"segmentation\") {\n        console.log('[reducer annotatemode]', state.annotatemode)\n        return setIn(state, [\"enabledTools\"], [\"select\",\"create-polygon\"])\n      } else {\n        console.log('[reducer annotatemode]', state.annotatemode)\n        return setIn(state, [\"enabledTools\"], [\"select\",  \"create-box\"])\n      }\n    }\n\n    case \"CLASS_LIST\": {\n      return setIn(state, [\"regionClsList\"], action.classlist)\n    }\n    case \"IMAGE_INDEX\":{\n      return setIn(state,[\"curr_image_index\"],action.curr_image_index)\n    }\n    case \"CHANGE_METADATA\":{\n      return setIn(state,[\"metadata\"],action.metadata)\n    }\n    case \"CHANGE_METALIST\":{\n      return setIn(state,[\"allowed_metadata\"],action.metadata)\n    }\n    case \"PREVIEW_LIST\" :{\n      return setIn(state,[\"previewList\"],action.image)\n    }\n    case \"LOADER\":{\n      return setIn(state,[\"loader\"],action.value)\n    }\n    case \"LOADER_MESSAGE\":{\n      return setIn(state,[\"message\"],action.value)\n    }\n\n  }\n  return state\n}\n","// @flow\n\nimport type {\n  MainLayoutImageAnnotationState,\n  Action\n} from \"../../MainLayout/types\"\nimport { setIn } from \"seamless-immutable\"\nimport getActiveImage from \"./get-active-image\"\n\nexport default (state: MainLayoutImageAnnotationState, action: Action) => {\n  const { currentImageIndex, pathToActiveImage, activeImage } = getActiveImage(\n    state\n  )\n\n  switch (action.type) {\n    case \"IMAGE_LOADED\": {\n      console.log(\"[Image_loaded]\",state)\n      return setIn(state, [\"images\", currentImageIndex, \"pixelSize\"], {\n        w: action.image.width,\n        h: action.image.height\n      })\n    }\n  }\n  return state\n}\n","// @flow\n\nimport type {\n  MainLayoutVideoAnnotationState,\n  Action\n} from \"../../MainLayout/types\"\nimport { setIn, without } from \"seamless-immutable\"\nimport getImpliedVideoRegions from \"./get-implied-video-regions\"\nimport { saveToHistory } from \"./history-handler.js\"\n\nexport default (state: MainLayoutVideoAnnotationState, action: Action) => {\n  const copyImpliedRegions = () => {\n    return setIn(\n      saveToHistory(state, \"Add Keyframe\"),\n      [\"keyframes\", state.currentVideoTime],\n      {\n        regions: getImpliedVideoRegions(state.keyframes, state.currentVideoTime)\n      }\n    )\n  }\n\n  switch (action.type) {\n    case \"IMAGE_OR_VIDEO_LOADED\": {\n      const { duration } = action.metadata\n      if (typeof duration === \"number\") {\n        return setIn(state, [\"videoDuration\"], duration * 1000)\n      }\n    }\n    case \"HEADER_BUTTON_CLICKED\": {\n      switch (action.buttonName.toLowerCase()) {\n        case \"play\":\n          return setIn(state, [\"videoPlaying\"], true)\n        case \"pause\":\n          return setIn(state, [\"videoPlaying\"], false)\n      }\n    }\n    case \"CHANGE_VIDEO_TIME\": {\n      return setIn(state, [\"currentVideoTime\"], action.newTime)\n    }\n    case \"CHANGE_VIDEO_PLAYING\": {\n      return setIn(state, [\"videoPlaying\"], action.isPlaying)\n    }\n    case \"DELETE_KEYFRAME\": {\n      return setIn(state, [\"keyframes\"], without(state.keyframes, action.time))\n    }\n  }\n\n  // Before the user modifies regions, copy the interpolated regions over to a\n  // new keyframe\n  if (!state.keyframes[state.currentVideoTime]) {\n    switch (action.type) {\n      case \"BEGIN_BOX_TRANSFORM\":\n      case \"BEGIN_MOVE_POINT\":\n      case \"BEGIN_MOVE_POLYGON_POINT\":\n      case \"BEGIN_BOX_TRANSFORM\":\n      case \"BEGIN_MOVE_POLYGON_POINT\":\n      case \"ADD_POLYGON_POINT\":\n      case \"SELECT_REGION\":\n      case \"CHANGE_REGION\":\n      case \"DELETE_REGION\":\n      case \"OPEN_REGION_EDITOR\":\n        return copyImpliedRegions()\n      case \"MOUSE_DOWN\": {\n        switch (state.selectedTool) {\n          case \"create-point\":\n          case \"create-polygon\":\n          case \"create-box\":\n            return copyImpliedRegions()\n        }\n      }\n    }\n  }\n\n  return state\n}\n","import React from 'react';\nimport './Loader.css';\n// import loader from '../../assets/images/loader.png'\n\nconst Loader = (props) => {\n    return (\n        <div className=\"loader-container\">\n            <div className=\"loader\">\n                <div className=\"ellipse\"></div>\n                <div className=\"ellipse\"></div>\n                <div className=\"ellipse\"></div>\n                <div className=\"ellipse\"></div>\n                <div className=\"ellipse\"></div>\n            </div>\n            <p style={{color : \"white\", fontSize : \"2rem\", marginTop : \"4rem\"}}> {props.message} </p>\n        </div>\n    );\n}\n\nexport default Loader;","// @flow\n\nimport React, { useReducer, useEffect } from \"react\"\nimport type { Node } from \"react\"\nimport MainLayout from \"../MainLayout/ind\"\nimport type {\n  ToolEnum,\n  Image,\n  Mode,\n  MainLayoutState,\n  Action\n} from \"../MainLayout/types\"\nimport SettingsProvider from \"../SettingsProvider\"\nimport { useSettings } from \"../SettingsProvider\"\n\nimport combineReducers from \"./reducers/combine-reducers.js\"\nimport generalReducer from \"./reducers/general-reducer.js\"\nimport imageReducer from \"./reducers/image-reducer.js\"\nimport videoReducer from \"./reducers/video-reducer.js\"\nimport historyHandler from \"./reducers/history-handler.js\"\n\nimport useEventCallback from \"use-event-callback\"\nimport makeImmutable, { without } from \"seamless-immutable\"\nimport Loader from \"../Loader/Loader\"\n\ntype Props = {\n  taskDescription: string,\n  allowedArea?: { x: number, y: number, w: number, h: number },\n  regionTagList?: Array<string>,\n  regionClsList?: Array<string>,\n  imageTagList?: Array<string>,\n  imageClsList?: Array<string>,\n  enabledTools?: Array<string>,\n  showTags?: boolean,\n  selectedImage?: string,\n  images?: Array<Image>,\n  showPointDistances?: boolean,\n  pointDistancePrecision?: number,\n  RegionEditLabel?: Node,\n  onExit: MainLayoutState => any,\n  videoTime?: number,\n  videoSrc?: string,\n  keyframes?: Object,\n  videoName?: string,\n\n\n}\n\n\nexport const Annotator = ({\n  images,\n  allowedArea,\n  selectedImage = images && images.length > 0 ? images[0].src : undefined,\n  showPointDistances,\n  pointDistancePrecision,\n  showTags = true,\n  enabledTools = [\"select\", \"create-point\", \"create-box\"],\n  regionTagList = [],\n  regionClsList = [],\n  imageTagList = [],\n  imageClsList = [],\n  keyframes = {},\n  taskDescription,\n  RegionEditLabel,\n  videoSrc,\n  videoTime = 0,\n  videoName,\n  onExit,\n  onNextImage,\n  onPrevImage,\n  //nextImage,\n  //prevImage,\n  preview,\n  previewList,\n  curr_image_index,\n  changeAnnotateMode,\n  annotatemode,\n  allowed_metadata,\n  metadata = {},\n  loading,\n  message,\n  updateRegion\n}: Props) => {\n  const settings = useSettings()\n  if (!images && !videoSrc)\n    return 'Missing required prop \"images\" or \"videoSrc\"'\n  const annotationType = images ? \"image\" : \"video\"\n  const [state, dispatchToReducer] = useReducer(\n    historyHandler(\n      combineReducers(\n        annotationType === \"image\" ? imageReducer : videoReducer,\n        generalReducer\n      )\n    ),\n    makeImmutable(\n      {\n        message,\n        updateRegion,\n        loading,\n        metadata,\n        allowed_metadata,\n        annotationType,\n        curr_image_index,\n        // nextImage,\n        // prevImage,\n        preview,\n        previewList,\n        changeAnnotateMode,\n        annotatemode,\n        showTags,\n        allowedArea,\n        showPointDistances,\n        pointDistancePrecision,\n        selectedTool: \"select\",\n        mode: null,\n        taskDescription,\n        labelImages: imageClsList.length > 0 || imageTagList.length > 0,\n        regionClsList,\n        regionTagList,\n        imageClsList,\n        imageTagList,\n        currentVideoTime: videoTime,\n        enabledTools,\n        history: [],\n        videoName,\n        ...(annotationType === \"image\"\n          ? {\n            selectedImage,\n            images,\n            selectedImageFrameTime:\n              images && images.length > 0 ? images[0].frameTime : undefined\n          }\n          : {\n            videoSrc,\n            keyframes\n          })\n      }\n    )\n  )\n\n  const dispatch = useEventCallback((action: Action) => {\n    if (action.type === \"HEADER_BUTTON_CLICKED\") {\n      if ([\"Exit\", \"Done\", \"Save\", \"Complete\", \"Review\"].includes(action.buttonName)) {\n\n        return onExit(without(state, \"history\"))\n      }\n      else if (action.buttonName === \"next image\" && onNextImage) {\n        dispatchToReducer({ type: \"CHANGE_METADATA\", metadata: null })\n        return onNextImage(without(state, \"history\"))\n      } else if (action.buttonName === \"prev image\" && onPrevImage) {\n        dispatchToReducer({ type: \"CHANGE_METADATA\", metadata: null })\n\n        return onPrevImage(without(state, \"history\"))\n      }\n    }\n    dispatchToReducer(action)\n  })\n\n  useEffect(() => {\n    dispatchToReducer({ type: \"SELECT_IMAGE\", image: state.images.find(img => img.src === selectedImage) })\n  }, [selectedImage])\n  useEffect(() => {\n    dispatchToReducer({ type: \"RELOAD\", image: images })\n    dispatchToReducer({ type: \"SELECT_IMAGE\", image: images[0] })\n  }, [images])\n\n  useEffect(() => {\n    dispatchToReducer({ type: \"CLASS_LIST\", classlist: regionClsList })\n  }, [regionClsList])\n\n  useEffect(() => {\n    if (state.annotatemode === \"object_detection\") {\n      dispatchToReducer({ type: \"ANNOTATION_MODE\" })\n      dispatchToReducer({ type: \"SELECT_TOOL\", selectedTool: \"create-box\" })\n      state.changeAnnotateMode(state.annotatemode)\n\n    } else {\n      dispatchToReducer({ type: \"ANNOTATION_MODE\" })\n      dispatchToReducer({ type: \"SELECT_TOOL\", selectedTool: \"create-polygon\" })\n      state.changeAnnotateMode(state.annotatemode)\n\n    }\n\n  }, [state.annotatemode])\n\n  // useEffect(()=>{\n  //   updateRegion(state.images[0].regions)\n  // },[images[0].regions])\n\n\n\n  useEffect(() => {\n    dispatchToReducer({ type: \"IMAGE_INDEX\", curr_image_index: curr_image_index })\n  }, [curr_image_index])\n\n  useEffect(() => {\n    dispatchToReducer({ type: \"PREVIEW_LIST\", image: previewList })\n  }, [previewList])\n\n  useEffect(() => {\n    dispatchToReducer({ type: \"CHANGE_METADATA\", metadata: metadata })\n  }, [metadata])\n  useEffect(() => {\n    dispatchToReducer({ type: \"CHANGE_METALIST\", metadata: allowed_metadata })\n  }, [allowed_metadata])\n  useEffect(() => {\n    dispatchToReducer({ type: \"LOADER\", value: loading })\n  }, [loading])\n  useEffect(() => {\n    dispatchToReducer({ type: \"LOADER_MESSAGE\", value: message })\n  }, [message])\n  return (\n    loading ? (<Loader message={message} />) : (<SettingsProvider>\n      <MainLayout\n        RegionEditLabel={RegionEditLabel}\n        alwaysShowNextButton={Boolean(onNextImage)}\n        alwaysShowPrevButton={Boolean(onPrevImage)}\n        state={state}\n        dispatch={dispatch}\n      />\n    </SettingsProvider>\n    )\n  )\n}\n\nexport default Annotator\n","export default (...reducers) => (state, action) => {\n  for (const reducer of reducers) {\n    state = reducer(state, action)\n  }\n  return state\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport ReactImageAnnotate from \"../Annotator/ind\";\nimport swal from \"sweetalert\";\n\n\n\nclass ImageRender extends Component {\n\n\n    state = {\n        src: null,\n        //\"https://cache.desktopnexus.com/cropped-wallpapers/822/822595-1366x768-[DesktopNexus.com].jpg?st=ICqNqTaceNCrJl-SEwNMag&e=1585805768\",\n        image_key: \"\",\n        annotatemode: \"object_detection\",\n        curr_image_index: 0,\n        call_type: 'first',\n        regions: [],\n        metadata: '',\n        class_list: '',\n        seg_class: [],\n        obj_class: [],\n        allowed_metadata: {},\n        dimension: {\n            imgHeight: 0,\n            imgWidth: 0\n        },\n        previewList: [],\n        loading: true,\n        message: 'Fetching Image for annotation'\n    };\n\n    async toArrayBuffer(myBuf) {\n        var myBuffer = new ArrayBuffer(myBuf.length);\n        var res = new Uint8Array(myBuffer);\n        for (var i = 0; i < myBuf.length; ++i) {\n            res[i] = myBuf[i];\n        }\n        return myBuffer;\n    }\n\n    getImageSize = async (img) => {\n        //get the size of the image\n        let dimension = {}\n        return new Promise((resolve, reject) => {\n            let theImage = new Image();\n            theImage.src = img\n            theImage.onload = () => resolve(dimension = { imgHeight: theImage.height, imgWidth: theImage.width })\n        })\n    }\n\n    titleHandler = (error) => {\n        switch (error.message) {\n            case \"Cannot read property 'map' of undefined\":\n                return \"No segmentation data \"\n            case \"Cannot read property 'data' of undefined\":\n                return \"No more images left for you\"\n            case \"Cannot read property '0' of undefined\":\n                return \"Image not valid\"\n            default:\n                return error.message\n        }\n\n    }\n\n    getRandomId = () => Math.random().toString().split(\".\")[1]\n\n\n    async main_api(type, key) {\n        //main api\n        let dim;\n        let imgUrl;\n        let response;\n        console.log(\"Mainapi\")\n        await axios.get(\n            \"annotations/get-image-data-by-user\",\n            {\n                headers: {\n                    Authorization: `bearer ${localStorage.getItem(\"jwt\")}`\n                },\n                params: {\n                    annotate_mode: this.state.annotatemode,\n                    call_type: type,\n                    curr_image_index: (type === 'first') ? 0 : this.state.curr_image_index,\n                    image_key: key\n                }\n            }\n        ).then((res) => {\n            console.log(`[${type}]`, res)\n            response = res\n            if (res.data.error) {\n                this.setState({ loading: false })\n                swal({\n                    title: res.data.error,\n                    text: \"come back later\",\n                    icon: \"warning\",\n                    buttons: true,\n                    // dangerMode: true,\n                })\n            }\n            else {\n                localStorage.setItem('metadata', JSON.stringify(res.data.metadata));\n                this.toArrayBuffer(res.data.image.data)\n                    .then((t) => {\n\n                        const imgFile = new Blob([t], {\n                            type: \"image/jpeg\"\n                        });\n                        imgUrl = URL.createObjectURL(imgFile);\n                        this.getImageSize(imgUrl)\n                            .then((dimension) => {\n                                dim = dimension\n                                let regions = []\n                                if (res.data.annotations != null) {\n                                    if ((type === 'next' || 'review') && (res.data.annotations.obj_detect || res.data.annotations.segmentation)) {\n                                        (this.state.annotatemode === \"object_detection\") ?\n                                            (res.data.annotations.obj_detect.map((annotation, i) => {\n                                                regions.push({\n                                                    cls: annotation.Class_Name,\n                                                    highlighted: false,\n                                                    id: this.getRandomId(),\n                                                    x: annotation.Region[0] / dimension.imgWidth,\n                                                    y: annotation.Region[1] / dimension.imgHeight,\n                                                    w: annotation.Region[2] / dimension.imgWidth,\n                                                    h: annotation.Region[3] / dimension.imgHeight,\n                                                    color: \"hsl(82,100%,50%)\",\n                                                    type: \"box\"\n                                                })\n                                            })) : (\n                                                res.data.annotations.segmentation.map((annotation, i) => {\n                                                    let points = []\n                                                    annotation.Region.map((seg, i) => {\n                                                        points.push([seg[0] / dimension.imgWidth, seg[1] / dimension.imgHeight])\n                                                    })\n                                                    regions.push({\n                                                        cls: annotation.Class_Name,\n                                                        highlighted: false,\n                                                        id: this.getRandomId(),\n                                                        points: points,\n                                                        color: \"hsl(82,100%,50%)\",\n                                                        type: \"polygon\"\n                                                    })\n                                                })\n                                            )\n                                    }\n                                    else {\n                                        (this.state.annotatemode === \"object_detection\") ?\n                                            (res.data.annotations.map((annotation, i) => {\n                                                regions.push({\n                                                    cls: annotation.cls,\n                                                    highlighted: false,\n                                                    id: annotation.id,\n                                                    x: annotation.x / dimension.imgWidth,\n                                                    y: annotation.y / dimension.imgHeight,\n                                                    w: annotation.w / dimension.imgWidth,\n                                                    h: annotation.h / dimension.imgHeight,\n                                                    color: \"hsl(82,100%,50%)\",\n                                                    type: \"box\"\n                                                })\n                                            })\n                                            ) : (\n                                                res.data.annotations.map((annotation, i) => {\n                                                    let points = []\n                                                    annotation.points.map((seg, i) => {\n                                                        points.push([seg[0] / dimension.imgWidth, [seg[1] / dimension.imgHeight]])\n                                                    })\n                                                    regions.push({\n                                                        cls: annotation.cls,\n                                                        highlighted: false,\n                                                        id: annotation.id,\n                                                        points: points,\n                                                        color: \"hsl(82,100%,50%)\",\n                                                        type: \"polygon\"\n                                                    })\n                                                })\n                                            )\n                                    }\n                                    console.log(\"[generarted regions]\", regions)\n                                    this.setState({\n                                        curr_image_index: this.state.curr_image_index,\n                                        src: imgUrl,\n                                        regions: regions,\n                                        metadata: res.data.metadata,\n                                        image_key: res.data.image_key,\n                                        dimension: dimension,\n                                        loading: false\n                                    })\n                                }\n                                else {\n                                    this.setState({\n                                        // region:null,\n                                        loading: false\n                                    })\n\n                                    swal({\n                                        title: \"NO Annotations\",\n                                        icon: \"warning\",\n                                        buttons: true,\n                                        // dangerMode: true,\n                                    })\n                                    this.setState({\n                                        curr_image_index: this.state.curr_image_index,\n                                        src: imgUrl,\n                                        regions: null,\n                                        metadata: res.data.metadata,\n                                        image_key: res.data.image_key,\n                                        dimension: dimension,\n                                        loading: false\n\n                                    })\n                                }\n                            })\n                            .catch(error => {\n                                this.setState({\n                                    curr_image_index: this.state.curr_image_index,\n                                    src: imgUrl,\n                                    regions: null,\n                                    metadata: res.data.metadata,\n                                    image_key: res.data.image_key,\n                                    dimension: dim,\n                                    loading: false\n\n                                })\n                                if (error.message !== \"Cannot read property 'map' of undefined\") {\n                                    swal({\n                                        title: this.titleHandler(error),\n                                        icon: \"warning\",\n                                        buttons: true,\n                                        // dangerMode: true,\n                                    })\n                                }\n                            })\n                    })\n                    .catch(error => {\n                        this.setState({\n                            curr_image_index: this.state.curr_image_index,\n                            src: imgUrl,\n                            regions: null,\n                            metadata: res.data.metadata,\n                            image_key: res.data.image_key,\n                            dimension: dim,\n                            loading: false\n\n                        })\n                        swal({\n                            title: this.titleHandler(error),\n                            icon: \"warning\",\n                            buttons: true,\n                            // dangerMode: true,\n                        })\n                    })\n            }\n        })\n            .catch(error => {\n                this.setState({\n                    curr_image_index: this.state.curr_image_index,\n                    src: imgUrl,\n                    regions: null,\n                    metadata: response.data.metadata,\n                    image_key: response.data.image_key,\n                    dimension: dim,\n                    loading: false\n\n                })\n                swal({\n                    title: this.titleHandler(error),\n                    buttons: true,\n                    // dangerMode: true,\n                })\n            })\n    }\n\n\n    postImage = async (t, type) => {\n        console.log(\"next\", t)\n        let updated_regions = []\n        let imgUrl\n        let response\n        let dim\n        const { imgWidth, imgHeight } = this.state.dimension\n        if (t.metadata != null) {\n            if ((t.images[0].regions !== null)) {\n                if (this.state.annotatemode === \"object_detection\") {\n                    t.images[0].regions.map((annotation) => {\n                        updated_regions.push({\n                            cls: annotation.cls,\n                            highlighted: false,\n                            id: annotation.id,\n                            x: annotation.x * imgWidth,\n                            y: annotation.y * imgHeight,\n                            w: annotation.w * imgWidth,\n                            h: annotation.h * imgHeight,\n                            color: \"hsl(82,100%,50%)\",\n                            type: \"box\",\n                            cls_id: `${this.state.class_list.indexOf(annotation.cls)}`\n                        })\n                    })\n                }\n                else {\n                    t.images[0].regions.map((annotation) => {\n                        let points = []\n                        annotation.points.map((seg, i) => {\n                            points.push([seg[0] * imgWidth, seg[1] * imgHeight])\n                        })\n                        updated_regions.push({\n                            cls: annotation.cls,\n                            highlighted: false,\n                            id: annotation.id,\n                            points: points,\n                            color: \"hsl(82,100%,50%)\",\n                            type: \"polygon\",\n                            cls_id: `${this.state.class_list.indexOf(annotation.cls)}`\n                        })\n\n                    })\n                }\n\n                console.log(\"[generarted regions]\", updated_regions)\n                if (type === 'review') {\n                    if (localStorage.getItem(\"checkList\")) {\n                        const checkList = JSON.parse(localStorage.getItem(\"checkList\"));\n                        const newCheckList = [...checkList, this.state.image_key]\n                        localStorage.setItem('checkList', JSON.stringify(newCheckList));\n                    }\n                    else {\n                        localStorage.setItem('checkList', JSON.stringify([this.state.image_key]))\n                    }\n                }\n\n                axios.post('/annotations/update-get-image-data-by-user',\n                    {\n                        image_key: this.state.image_key,\n                        metadata: t.metadata,\n                        annotations: updated_regions\n                    },\n                    {\n                        headers: {\n                            Authorization: `bearer ${localStorage.getItem(\"jwt\")}`\n                        },\n                        params: {\n                            annotate_mode: this.state.annotatemode,\n                            call_type: (type === 'review') ? 'next' : type,\n                            curr_image_index: (type === \"previous\") ? (this.state.curr_image_index - 1) : (this.state.curr_image_index + 1)\n                        }\n                    })\n                    .then((res) => {\n                        response = res\n                        localStorage.setItem('metadata', JSON.stringify(res.data.metadata));\n                        console.log(\"[next api]\", res)\n                        if (res.data.error) {\n                            this.setState({ loading: false, src: null })\n                            swal({\n                                title: res.data.error,\n                                icon: \"warning\",\n                                buttons: true,\n                                // dangerMode: true,\n                            })\n                        } else {\n                            this.toArrayBuffer(res.data.image.data)\n                                .then((t) => {\n                                    const imgFile = new Blob([t], {\n                                        type: \"image/jpeg\"\n                                    });\n                                    imgUrl = URL.createObjectURL(imgFile);\n                                    this.getImageSize(imgUrl)\n                                        .then((dimension) => {\n                                            dim = dimension\n                                            let regions = []\n                                            if ((type === 'next' || 'review') && (res.data.annotations.obj_detect || res.data.annotations.segmentation)) {\n                                                (this.state.annotatemode === \"object_detection\") ?\n                                                    (res.data.annotations.obj_detect.map((annotation, i) => {\n                                                        regions.push({\n                                                            cls: annotation.Class_Name,\n                                                            highlighted: false,\n                                                            id: this.getRandomId(),\n                                                            x: annotation.Region[0] / dimension.imgWidth,\n                                                            y: annotation.Region[1] / dimension.imgHeight,\n                                                            w: annotation.Region[2] / dimension.imgWidth,\n                                                            h: annotation.Region[3] / dimension.imgHeight,\n                                                            color: \"hsl(82,100%,50%)\",\n                                                            type: \"box\"\n                                                        })\n                                                    })) : (\n                                                        res.data.annotations.segmentation.map((annotation, i) => {\n                                                            let points = []\n                                                            annotation.Region.map((seg, i) => {\n                                                                points.push([seg[0] / dimension.imgWidth, seg[1] / dimension.imgHeight])\n                                                            })\n                                                            regions.push({\n                                                                cls: annotation.Class_Name,\n                                                                highlighted: false,\n                                                                id: this.getRandomId(),\n                                                                points: points,\n                                                                color: \"hsl(82,100%,50%)\",\n                                                                type: \"polygon\"\n                                                            })\n                                                        })\n                                                    )\n                                            }\n                                            else {\n                                                (this.state.annotatemode === \"object_detection\") ?\n                                                    (res.data.annotations.map((annotation, i) => {\n\n                                                        regions.push({\n                                                            cls: annotation.cls,\n                                                            highlighted: false,\n                                                            id: annotation.id,\n                                                            x: annotation.x / dimension.imgWidth,\n                                                            y: annotation.y / dimension.imgHeight,\n                                                            w: annotation.w / dimension.imgWidth,\n                                                            h: annotation.h / dimension.imgHeight,\n                                                            color: \"hsl(82,100%,50%)\",\n                                                            type: \"box\"\n                                                        })\n                                                    })\n                                                    ) : (\n                                                        res.data.annotations.map((annotation, i) => {\n                                                            let points = []\n                                                            annotation.points.map((seg, i) => {\n                                                                points.push([seg[0] / dimension.imgWidth, [seg[1] / dimension.imgHeight]])\n                                                            })\n                                                            regions.push({\n                                                                cls: annotation.cls,\n                                                                highlighted: false,\n                                                                id: annotation.id,\n                                                                points: points,\n                                                                color: \"hsl(82,100%,50%)\",\n                                                                type: \"polygon\"\n                                                            })\n                                                        })\n                                                    )\n                                            }\n                                            this.setState({\n                                                curr_image_index: (type === \"previous\") ? (this.state.curr_image_index - 1) : (this.state.curr_image_index + 1),\n                                                src: imgUrl,\n                                                regions: regions,\n                                                metadata: res.data.metadata,\n                                                image_key: res.data.image_key,\n                                                dimension: dimension,\n                                                previewList: (JSON.parse(localStorage.getItem(\"checkList\"))) ? JSON.parse(localStorage.getItem(\"checkList\")) : [],\n                                                loading: false\n                                            })\n                                        })\n                                        .catch(error => {\n                                            this.setState({\n                                                curr_image_index: (type === \"previous\") ? (this.state.curr_image_index - 1) : (this.state.curr_image_index + 1),\n                                                src: imgUrl,\n                                                metadata: res.data.metadata,\n                                                image_key: res.data.image_key,\n                                                dimension: dim,\n                                                regions: null,\n                                                previewList: (JSON.parse(localStorage.getItem(\"checkList\"))) ? JSON.parse(localStorage.getItem(\"checkList\")) : [],\n                                                loading: false\n                                            })\n                                            if (error.message !== \"Cannot read property 'map' of undefined\") {\n\n                                                swal({\n                                                    title: this.titleHandler(error),\n                                                    icon: \"warning\",\n                                                    buttons: true,\n                                                    // dangerMode: true,\n                                                })\n                                            }\n                                        })\n\n                                })\n                                .catch(error => {\n                                    this.setState({\n                                        curr_image_index: (type === \"previous\") ? (this.state.curr_image_index - 1) : (this.state.curr_image_index + 1),\n                                        src: imgUrl,\n                                        metadata: res.data.metadata,\n                                        image_key: res.data.image_key,\n                                        dimension: dim,\n                                        regions: null,\n\n                                        previewList: (JSON.parse(localStorage.getItem(\"checkList\"))) ? JSON.parse(localStorage.getItem(\"checkList\")) : [],\n                                        loading: false\n                                    })\n                                    if (error.message !== \"Cannot read property 'map' of undefined\") {\n                                        swal({\n                                            title: this.titleHandler(error),\n                                            icon: \"warning\",\n                                            buttons: true,\n                                            // dangerMode: true,\n                                        })\n                                    }\n                                })\n                        }\n                    })\n                    .catch(error => {\n                        this.setState({\n                            curr_image_index: (type === \"previous\") ? (this.state.curr_image_index - 1) : (this.state.curr_image_index + 1),\n                            src: imgUrl,\n                            metadata: response.data.metadata,\n                            image_key: response.data.image_key,\n                            dimension: dim,\n                            regions: null,\n                            previewList: (JSON.parse(localStorage.getItem(\"checkList\"))) ? JSON.parse(localStorage.getItem(\"checkList\")) : [],\n                            loading: false\n                        })\n                        if (error.message !== \"Cannot read property 'map' of undefined\") {\n                            swal({\n                                title: this.titleHandler(error),\n                                icon: \"warning\",\n                                buttons: true,\n                                // dangerMode: true,\n                            })\n                        }\n                    })\n            }\n            else {\n                console.log(\"exit if\")\n                this.setState({ loading: false,metadata: (JSON.parse(localStorage.getItem(\"metadata\"))) ? JSON.parse(localStorage.getItem(\"metadata\")) : null })\n\n                swal({\n                    title: \"Annotations  cannot be empty\",\n                    icon: \"warning\",\n                    buttons: true,\n                    // dangerMode: true,\n                })\n            }\n        }\n        else {\n            console.log(\"[image]\", t.images[0].regions, \"[state]\", this.state.regions)\n            this.setState({\n                // region:null,\n                loading: false\n            })\n\n            swal({\n                title: \"metadata cannot be empty\",\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        }\n    }\n\n\n    prevImage = async (r) => {\n        console.log('previous', r)\n        try {\n            this.setState({ loading: true, message: 'Fetching previous Image ', metadata: null, regions: r.images[0].regions })\n\n            await this.postImage(r, 'previous')\n                .then(res => { console.log(\"[prev call]\", res) })\n                .catch(e => {\n                    this.setState({\n                        // region:null,\n                        loading: false\n                    })\n\n                    swal({\n                        title: this.titleHandler(e),\n                        icon: \"warning\",\n                        buttons: true,\n                        // dangerMode: true,\n                    })\n                })\n\n        } catch (e) {\n            this.setState({\n                // region:null,\n                loading: false\n            })\n\n            swal({\n                title: this.titleHandler(e),\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        }\n    }\n    /////update region function\n\n    nextImage = async (r) => {\n        try {\n            this.setState({ loading: true, message: 'Fetching Next Image', metadata: null })\n            if (this.state.src !== null) {\n                console.log(\"ended\")\n                await this.postImage(r, 'next')\n                    .then(res => { console.log(\"[next call]\", res) })\n                    .catch(e => {\n                        this.setState({\n                            // region:null,\n                            loading: false\n                        })\n\n                        swal({\n                            title: this.titleHandler(e),\n                            icon: \"warning\",\n                            buttons: true,\n                            // dangerMode: true,\n                        })\n                    })\n            }\n            else {\n                this.setState({\n                    loading: false\n                })\n                swal({\n                    title: \"No more images\",\n                    text: \"Try reload or come back later\",\n                    icon: \"warning\",\n                    buttons: true,\n                    // dangerMode: true,\n                })\n            }\n\n        } catch (e) {\n            this.setState({\n                // region:null,\n                loading: false\n            })\n\n            swal({\n                title: this.titleHandler(e),\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        }\n    }\n\n\n    checkImage = (r) => {\n        try {\n            this.setState({ loading: true, message: 'Marking the image for Review' })\n            this.postImage(r, 'review')\n                .then(res => { console.log(\"[review]\", res) })\n                .catch(e => {\n                    this.setState({\n                        // region:null,\n                        loading: false\n                    })\n                    swal({\n                        title: this.titleHandler(e),\n                        icon: \"warning\",\n                        buttons: true,\n                        // dangerMode: true,\n                    })\n\n                })\n\n        } catch (e) {\n            this.setState({\n                // region:null,\n                loading: false\n            })\n\n            swal({\n                title: this.titleHandler(e),\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        }\n    }\n\n\n    preview = (r) => {\n        console.log(\"[preview image]\", r)\n        this.setState({ loading: true, message: 'Fething Image for Review' })\n        this.main_api('review', r)\n\n    }\n\n\n    changeAnnotateMode = (mode) => {\n        this.setState({ annotatemode: mode })\n        if (mode === 'segmentation') {\n            this.setState({ class_list: this.state.seg_class, curr_image_index: 0, loading: true, message: \"changing into Segmentation mode\" })\n            this.main_api('first')\n        }\n        else {\n            this.setState({ class_list: this.state.obj_class })\n            if (this.state.call_type != 'first') {\n                this.setState({ loading: true, curr_image_index: 0, message: \"changing into Object Detection mode\" })\n                this.main_api('first')\n            }\n        }\n    }\n\n    // updateRegion=(region)=>{\n    //     this.setState({regions:region})\n    // }\n    get_class = async (project_val) => {\n        await axios.get(\n            \"/get_class\",\n            {\n                params: {\n                    project: project_val,\n                }\n            }\n        )\n            .then((res) => {\n                console.log(res)\n                this.setState({\n                    obj_class: res.data.classes.obj_class,\n                    seg_class: res.data.classes.seg_class,\n                    class_list: res.data.classes.obj_class,\n                    allowed_metadata: res.data.classes.meta_data\n                })\n            }).catch((e) => {\n                this.setState({\n                    // region:null,\n                    loading: false\n                })\n\n                swal({\n                    title: this.titleHandler(e),\n                    icon: \"warning\",\n                    buttons: true,\n                    // dangerMode: true,\n                })\n            })\n    }\n\n    async componentDidMount() {\n        console.log(\"did mount\")\n        await this.get_class('global')\n        // first api\n        try {\n\n            if (this.state.call_type === 'first') {\n                this.setState({ loading: true, message: 'Fetching Image for annotation' })\n                localStorage.removeItem('checkList')\n                this.main_api('first', 'first')\n                this.setState({ call_type: \"previous\" })\n            }\n        } catch (e) {\n            console.log(e.response);\n            alert(\"could'nt load image\")\n        }\n    }\n\n\n    render() {\n\n        const { loading, message, metadata, allowed_metadata, previewList, curr_image_index, annotatemode, class_list, src, regions } = this.state\n\n        return (\n            <ReactImageAnnotate\n                loading={loading}\n                message={message}\n                metadata={metadata}\n                allowed_metadata={allowed_metadata}\n                // updateRegion={this.updateRegion}\n                // nextImage={this.nextImage}\n                // prevImage={this.prevImage}\n                preview={this.preview}\n                previewList={previewList}\n                curr_image_index={curr_image_index}\n                changeAnnotateMode={this.changeAnnotateMode}\n                annotatemode={annotatemode}\n                allowedArea={{\n                    x: 0,\n                    y: 0,\n                    w: 1,\n                    h: 1\n                }\n                }\n                taskDescription=\"Annotate the imaes by selecting the mode for object detection or segmentationl\"\n                images={\n                    [\n                        {\n                            src: src,\n                            name: \"Task:Enter the Metadata First then Annotate\",\n                            regions: regions\n                        }\n                    ]}\n                regionClsList={class_list}\n                // regionTagList={[\"Road\", \"Highway\", \"LeaseRoad\", \"MainRoad\"]}\n                onPrevImage={this.prevImage}\n                onNextImage={this.nextImage}\n                onExit={this.checkImage}\n            />\n        );\n    }\n}\n\nexport default ImageRender;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport logo from \"../../images/logo.png\";\nimport \"../../App.css\";\nimport ExitIcon from \"@material-ui/icons/ExitToApp\"\nimport { withRouter } from \"react-router-dom\";\nimport Loader from '../Loader/Loader';\nimport swal from 'sweetalert'\nclass Navbar extends Component {\n\n\n  logout = () => {\n    const { history } = this.props;\n    console.log(\"logging out\");\n    localStorage.removeItem(\"jwt\");\n    this.props.updateUser({\n      loggedIn: false,\n      username: null\n    });\n    history.push('/')\n  };\n\n  confirmLogout = () => {\n    swal({\n      title: \"Are you sure to Logout?\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true,\n    })\n      .then((willLogout) => {\n        if (willLogout) {\n          this.logout();\n        } else {\n          swal(\"You are loggedIn !\");\n        }\n      });\n  }\n\n\n  render() {\n    const loggedIn = this.props.loggedIn;\n    // const { history } = this.props;\n\n    return (\n      <div>\n        {loggedIn ? (\n          <div className=\"w3-bar w3-black\">\n            <a className=\"w3-bar-item\">\n              {/*   <strong><span className=\"w3-white\">FLUX</span>&nbsp;</strong> */}\n              <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n              <strong><span className=\"w3-text-red\">AUTO</span>&nbsp;</strong>\n              <strong><span>ANNOTATION</span></strong></a>\n            {/* <Link to=\"/\" className=\"w3-bar-item w3-button w3-hover-dark-gray\">\n              Home\n            </Link> */}\n            <Link\n              to=\"#\"\n              className=\"w3-bar-item w3-button w3-hover-dark-gray  w3-right\"\n              onClick={this.confirmLogout}\n            >\n              <ExitIcon />\n\n              <div>\n                LogOut\n              </div>\n\n            </Link>\n          </div>\n        ) : (\n            <div className=\"w3-bar w3-black\">\n\n              {/* <img src={logo} className=\"App-logo\" alt=\"logo\" /> */}\n              {/* <h1 className=\"App-title\">Annotation App</h1> */}\n              <a className=\"w3-bar-item\">\n                {/*   <strong><span className=\"w3-white\">FLUX</span>&nbsp;</strong> */}\n                <strong><span className=\"w3-text-red\">AUTO</span>&nbsp;</strong>\n                <strong><span>ANNOTATION</span></strong></a>\n              {/* <Link to=\"/\" className=\"w3-bar-item w3-button w3-hover-dark-gray \">\n                Home\n              </Link> */}\n              <Link to=\"/login\" className=\"w3-bar-item w3-button w3-hover-dark-gray w3-right\">\n                Login\n              </Link>\n              <Link to=\"/signup\" className=\"w3-bar-item w3-button w3-hover-dark-gray w3-right\">\n                SignUp\n              </Link>\n            </div>)}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Navbar);\n","import React from \"react\";\nimport swal from \"sweetalert\";\n\n\nclass ErrorBoundary extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = { hasError: false };\n    }\n  \n    static getDerivedStateFromError(error) {\n      // Update state so the next render will show the fallback UI.\n      return { hasError: true };\n    }\n\n      \n    componentDidCatch(error, errorInfo) {\n        alert (error)\n        // You can also log the error to an error reporting service\n        // swal({\n        //     title: \"Are you sure?\",\n        //     text: \"Are you sure that you want to leave this page?\",\n        //     icon: \"warning\",\n        //     dangerMode: true,\n        //   })\n        //   .then(willDelete => {\n        //     if (willDelete) {\n        //       swal(\"Deleted!\", \"Your imaginary file has been deleted!\", \"success\");\n        //     }\n        //   });\n      }\n  \n    render() {\n      if (this.state.hasError) {\n        // You can render any custom fallback UI\n        return  <h1>Something went wrong.</h1>//this.indicateError()\n      }\n  \n      return this.props.children; \n    }\n  }\n\n\n  export default ErrorBoundary","import React, { Component } from \"react\";\n// import ImageRender from \"./image-render\";\nimport ImageRender from \"./mainpage\"\nimport Navbar from \"./navbar\";\nimport swal from \"sweetalert\";\nimport {withRouter, Redirect} from \"react-router-dom\"\nimport ErrorBoundary from '../ErrorBoundary/ErrorBoundary'\nclass Home extends Component {\n\n\n  render() {\n    const loggedIn = this.props.loggedIn;\n    const updateUser = this.props.updateUser\n    if(loggedIn){\n      return (\n        <div>\n           <ErrorBoundary>\n           <Navbar updateUser={updateUser} loggedIn={loggedIn} /> \n           </ErrorBoundary>\n         \n          <ErrorBoundary>\n            <ImageRender />\n          </ErrorBoundary>\n          \n        </div>\n      );\n    }\n    return <Redirect to='/' />\n  \n  }\n}\n\nexport default withRouter(Home);\n","\n\nimport React, { useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport logo from '../../images/logo.png'\nimport car from '../../images/carback.jpg'\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport Loader from '../Loader/Loader';\nimport swal from 'sweetalert';\n\n\n\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright © '}\n            <Link color=\"inherit\" href=\"https://fluxauto.xyz/\">\n                www.fluxauto.xyz\n      </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\n\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100vh',\n    },\n    image: {\n        backgroundImage: `url(${logo})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundColor: 'black',\n        //   theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n        backgroundSize: '500px 500px',\n        backgroundPosition: 'center',\n    },\n    paper: {\n        margin: theme.spacing(8, 4),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    maindiv: {\n        backgroundImage: `url(${car})`\n    }\n\n}));\n\nexport default function ForgotPassword(props) {\n\n    const classes = useStyles();\n    const [loading, setLoading] = useState(false)\n    const [email, setEmail] = useState(null)\n \n\n    const handleEmail = (event) => {\n        setEmail(event.target.value);\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        if(email!=null){\n        setLoading(true);\n        axios\n        .post(\"/user/forgot-password\", {\n          email: email\n        })\n        .then(res => {\n          if ((res.data.message = \"recovery mail sent\")) {\n              setLoading(false)\n            swal({\n                title: \"Recovery mail sent check yor mail\",\n                icon: \"success\",\n                buttons: true,\n                // dangerMode: true,\n            })\n          }\n        })\n        .catch(e => {\n            setLoading(false)\n            swal({\n                title: e.message,\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        });\n    }\n    else{\n        swal({\n            title: \"All fields are Mandatory\",\n            icon: \"warning\",\n            buttons: true,\n            // dangerMode: true,\n        })\n    }\n    }\n\n    if (loading) {\n        return <Loader message=\"sending reset link to the email address\" />\n    }\n    return (\n\n        <Grid container component=\"main\" className={classes.root}>\n            <CssBaseline />\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n                <div className={classes.paper}>\n                    <div>\n                        <h2 className=\"w3-text-red\">AUTO</h2>\n                        <h2>ANNOTATION</h2>\n                    </div>\n\n                    {/* <img src={logo} height='100px' width='100px'></img> */}\n\n                    <Typography component=\"h1\" variant=\"h5\">\n                        FORGOT PASSWORD\n          </Typography>\n                    <form className={classes.form} >\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            fullWidth\n                            id=\"email\"\n                            label=\"Email Address\"\n                            name=\"email\"\n                            autoComplete=\"email\"\n                            onChange={handleEmail}\n                            autoFocus\n                            required\n                        />\n                       \n                        <Button\n                            type=\"submit\"\n                            fullWidth\n                            onClick={handleSubmit}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            className={classes.submit}\n                        >\n                            submit\n                                </Button>\n                        \n                        <Box mt={5}>\n                            <Copyright />\n                        </Box>\n                    </form>\n                </div>\n            </Grid>\n        </Grid>\n\n    );\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport {withRouter} from \"react-router-dom\"\nimport PropTypes from \"prop-types\";\n\nconst loading = {\n  margin: \"1em\",\n  fontSize: \"24px\"\n};\nclass ResetPassword extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      confirmPassword: \"\",\n      updated: false,\n      isLoading: true,\n      error: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  async componentDidMount() {\n    const {\n      match: {\n        params: { token }\n      }\n    } = this.props;\n    try {\n      const response = await axios.get(\"/user/reset\", {\n        params: {\n          resetPasswordToken: token\n        }\n      });\n      // console.log(response);\n      if (response.data.message === \"password reset link a-ok\") {\n        console.log(response.data.username);\n        this.setState({\n          username: response.data.username,\n          updated: false,\n          isLoading: false,\n          error: false\n        });\n      }\n    } catch (error) {\n      console.log(error.response.data);\n      this.setState({\n        updated: false,\n        isLoading: false,\n        error: true\n      });\n    }\n  }\n\n  handleChange(event) {\n    console.log(event.target.name);\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    const { username, password } = this.state;\n    const {\n      match: {\n        params: { token }\n      }\n    } = this.props;\n    try {\n      const response = await axios.put(\"/user/forgot-password-update\", {\n        username,\n        password,\n        resetPasswordToken: token\n      });\n      console.log(response.data);\n      if (response.data.message === \"password reset successfully\") {\n        this.setState({\n\n          updated: true,\n          error: false\n        });\n        const {history}=this.props\n        history.push('/')\n      } else {\n        this.setState({\n          updated: false,\n          error: true\n        });\n      }\n    } catch (error) {\n      console.log(error.response.data);\n    }\n  }\n  render() {\n    const { password, error, isLoading, updated, confirmPassword } = this.state;\n    if (error) {\n      return (\n        <div>\n          <div style={loading}>\n            <h4>Problem resetting password. Please send another reset link.</h4>\n          </div>\n        </div>\n      );\n    }\n    if (isLoading) {\n      return (\n        <div>\n          <div style={loading}>Loading User Data...</div>\n        </div>\n      );\n    }\n    return (\n      <div>\n        <h4>Reset Password</h4>\n        <form className=\"form-horizontal\" onSubmit={this.handleSubmit}>\n          <div className=\"form-group\">\n            <div className=\"col-1 col-ml-auto\">\n              <label className=\"form-label\" htmlFor=\"password\">\n                New Password\n              </label>\n            </div>\n            <div className=\"col-3 col-mr-auto\">\n              <input\n                className=\"form-input\"\n                placeholder=\"password\"\n                type=\"password\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n                required=\"required\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group\">\n            <div className=\"col-1 col-ml-auto\">\n              <label className=\"form-label\" htmlFor=\"username\">\n                Confirm New Password\n              </label>\n            </div>\n            <div className=\"col-3 col-mr-auto\">\n              <input\n                className=\"form-input\"\n                type=\"password\"\n                name=\"confirmPassword\"\n                placeholder=\"Confirm Password\"\n                value={confirmPassword}\n                onChange={this.handleChange}\n                required=\"required\"\n              />\n            </div>\n          </div>\n          <div className=\"form-group \">\n            <div className=\"col-7\"></div>\n            <button className=\"btn btn-primary col-1 col-mr-auto\" type=\"submit\">\n              Submit\n            </button>\n          </div>\n        </form>\n        {updated && (\n          <div>\n            <p>\n              Your password has been successfully reset, please try logging in\n              again.\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nResetPassword.propTypes = {\n  // eslint-disable-next-line react/require-default-props\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      token: PropTypes.string.isRequired\n    })\n  })\n};\nexport default withRouter(ResetPassword);\n","\nimport React, { useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport logo from '../../images/logo.png'\nimport car from '../../images/carback.jpg'\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport Loader from '../Loader/Loader';\nimport swal from 'sweetalert';\n\n\n\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://fluxauto.xyz/\">\n        www.fluxauto.xyz\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\n\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage: `url(${logo})`,\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: 'black',\n    //   theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: '500px 500px',\n    backgroundPosition: 'center',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  maindiv: {\n    backgroundImage: `url(${car})`\n  }\n\n}));\n\nexport default function SignInSide(props) {\n\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false)\n  const [username, setusername] = useState('')\n  const [password, setpassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [redirectTo, setRed] = useState(null)\n  const [firstName, setFname] = useState('')\n  const [lastName, setLname] = useState('')\n  const [mobile, setMobile] = useState('')\n  const [email, setEmail] = useState(null)\n  const handleUser = (event) => {\n    setusername(event.target.value);\n  }\n  const handleFname = (event) => {\n    setFname(event.target.value);\n  }\n  const handleLname = (event) => {\n    setLname(event.target.value);\n  }\n  const handleEmail = (event) => {\n    setEmail(event.target.value);\n  }\n  const handleMobile = (event) => {\n    setMobile(event.target.value);\n  }\n  const handleCpass = (event) => {\n    setConfirmPassword(event.target.value);\n  }\n  const handlePass = (event) => {\n    setpassword(event.target.value);\n  }\n  const handleSubmit=(event)=> {\n    \n\n    console.log(\"sign-up handleSubmit, username: \");\n    console.log(username);\n    event.preventDefault();\n    if(username && password && confirmPassword && mobile && email && firstName && lastName !== null){\n\n    if (password !== confirmPassword) {\n      alert(\"Passwords did not match\");\n    } else {\n      setLoading(true);\n      //request to server to add a new username/password\n      axios\n        .post(\"/user/\", {\n          username: username,\n          password: password,\n          confirmPassword: confirmPassword,\n          firstName: firstName,\n          lastName: lastName,\n          email: email,\n          mobile:mobile\n        })\n        .then(response => {\n          if (!response.data.error) {\n            setLoading(false)\n            console.log(\"successful signup\");\n            setRed('/')\n          } else {\n            setLoading(false)\n            swal({\n              title: \"username already exists\",\n              icon: \"warning\",\n              buttons: true,\n              // dangerMode: true,\n          })\n                     }\n        })\n        .catch(error => {\n          setLoading(false)\n          let errors = error.response.data.errors;\n          swal({\n            title: errors[0].msg,\n            icon: \"warning\",\n            buttons: true,\n            // dangerMode: true,\n        })\n       \n        });\n    }\n  }\n  else{\n    swal({\n      title: \"All fields are Mandatory\",\n      icon: \"warning\",\n      buttons: true,\n      // dangerMode: true,\n  })\n  }\n  }\n\n  if (redirectTo) {\n    return <Redirect to={{ pathname: redirectTo }} />;\n  }\n  if (loading) {\n    return <Loader message=\"signing up please wait\" />\n  }\n  return (\n\n    <Grid container component=\"main\" className={classes.root}>\n      <CssBaseline />\n      <Grid item xs={false} sm={4} md={7} className={classes.image} />\n      <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n        <div className={classes.paper}>\n          <div>\n            <h2 className=\"w3-text-red\">AUTO</h2>\n            <h2>ANNOTATION</h2>\n          </div>\n\n          {/* <img src={logo} height='100px' width='100px'></img> */}\n\n          <Typography component=\"h1\" variant=\"h5\">\n            Sign up\n          </Typography>\n          <form className={classes.form} >\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  autoComplete=\"fname\"\n                  name=\"firstName\"\n                  variant=\"outlined\"\n                  required\n                  fullWidth\n                  id=\"firstName\"\n                  onChange={handleFname}\n\n                  label=\"First Name\"\n                  autoFocus\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  variant=\"outlined\"\n                  required\n                  fullWidth\n                  id=\"lastName\"\n                  label=\"Last Name\"\n                  name=\"lastName\"\n                  onChange={handleLname}\n\n                  autoComplete=\"lname\"\n                />\n              </Grid>\n            </Grid>\n       \n            <TextField\n              autoComplete=\"uname\"\n              margin=\"normal\"\n              onChange={handleUser}\n              name=\"username\"\n              variant=\"outlined\"\n              required\n              fullWidth\n              id=\"username\"\n              label=\"User Name\"\n              autoFocus\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              id=\"email\"\n              label=\"Email Address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              onChange={handleEmail}\n              autoFocus\n              required\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              id=\"mobile\"\n              label=\"Phone\"\n              name=\"mobile\"\n              autoComplete=\"mobile\"\n              onChange={handleMobile}\n              autoFocus\n              required\n            />\n                        <Grid container spacing={2}>\n                        <Grid item xs={12} sm={6}>\n\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              onChange={handlePass}\n              autoComplete=\"current-password\"\n              required\n            />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              name=\"confirmPassword\"\n              label=\"Confirm Password\"\n              type=\"password\"\n              id=\"password\"\n              onChange={handleCpass}\n              autoComplete=\"current-password\"\n              required\n            />\n</Grid>\n</Grid>\n            <Button\n              type=\"submit\"\n              fullWidth\n              onClick={handleSubmit}\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n            >\n              Sign Up\n                                </Button>\n            <Grid container>\n              <Grid item>\n                <Link href=\"/\" variant=\"body2\">\n                  {\"Have an account? Sign In\"}\n                </Link>\n              </Grid>\n            </Grid>\n            <Box mt={5}>\n              <Copyright />\n            </Box>\n          </form>\n        </div>\n      </Grid>\n    </Grid>\n\n  );\n}\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\n// import Signup from \"./components/Authentication/sign-up\";\nimport ForgotPassword from \"./components/Authentication/forgot-password\";\nimport ResetPassword from \"./components/Authentication/ResetPassword\";\nimport Signup from \"./components/Authentication/signup\"\n\nconst Routes = () => (\n  <div>\n    <Switch>\n      <Route exact path=\"/signup\" component={Signup} />\n      <Route exact path=\"/forgot-password\" component={ForgotPassword} />\n      <Route exact path=\"/reset/:token\" component={ResetPassword} />\n    </Switch>\n  </div>\n);\n\nexport default Routes;\n","\n\nimport React, { useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport logo from '../../images/logo.png'\nimport car from '../../images/carback.jpg'\nimport axios from \"axios\";\nimport { withRouter,Redirect } from \"react-router-dom\";\nimport Loader from '../Loader/Loader';\nimport swal from 'sweetalert';\n\n\n\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright © '}\n            <Link color=\"inherit\" href=\"https://fluxauto.xyz/\">\n                www.fluxauto.xyz\n      </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\n\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: '100vh',\n    },\n    image: {\n        backgroundImage: `url(${logo})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundColor: 'black',\n        //   theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n        backgroundSize: '500px 500px',\n        backgroundPosition: 'center',\n    },\n    paper: {\n        margin: theme.spacing(8, 4),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    maindiv: {\n        backgroundImage: `url(${car})`\n    }\n\n}));\n\n function SignInSide(props) {\n\n    const classes = useStyles();\n    const [loading, setLoading] = useState(false)\n    const [username, setusername] = useState(null)\n    const [password, setpassword] = useState(null)\n    const [redirectTo, setRed] = useState(null)\n\n\n    const handleUser = (event) => {\n        setusername(event.target.value);\n    }\n\nconst  titleHandler = (error) => {\n    switch (error.message) {\n        case \"Request failed with status code 401\":\n            return \"Incorect Username or Password\"\n       \n        default:\n            return error.message\n    }\n\n}\n    const handlePass = (event) => {\n        setpassword(event.target.value);\n    }\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const { history } = props;\n        if(username && password !== null){\n        setLoading(true);\n        axios\n            .post(\"/user/login\", {\n                username: username,\n                password: password\n            })\n            .then(response => {\n                if (response.status === 200) {\n                    // update App.js state\n                    setLoading(false)\n                    props.updateUser({\n                        loggedIn: true,\n                        username: response.data.username\n                    });\n\n                    //update local storage\n                    localStorage.setItem(\"jwt\", response.data.token);\n\n                    // update the state to redirect to home\n                    setRed(\"/user\");\n                }\n            })\n            .catch(error => {\n                setLoading(false)\n                swal({\n                    title: titleHandler(error),\n                    icon: \"warning\",\n                    buttons: true,\n                    // dangerMode: true,\n                })\n                history.push('/')\n            });\n        }\n        else{\n            swal({\n                title: \"All fields are Mandatory\",\n                icon: \"warning\",\n                buttons: true,\n                // dangerMode: true,\n            })\n        }\n    }\nif(localStorage.getItem(\"jwt\")){\n    axios.get('/user',\n    {\n        headers: {\n          Authorization: `bearer ${localStorage.getItem(\"jwt\")}`\n        }\n      }\n    )\n    .then(response => {\n        if (response.status === 200) {\n            // update App.js state\n            props.updateUser({\n                loggedIn: true,\n                username: response.data.username\n            });\n            setRed(\"/user\");\n        }\n    })\n    .catch(error => {\n        setLoading(false)\n        alert(\"login in again session expired\");\n    });\n}\n\n    if (redirectTo) {\n        return <Redirect to={{ pathname: redirectTo }} />;\n    }\n    if (loading) {\n        return <Loader message=\"logging in please wait\" />\n    }\n    return (\n\n        <Grid container component=\"main\" className={classes.root}>\n            <CssBaseline />\n            <Grid item xs={false} sm={4} md={7} className={classes.image} />\n            <Grid item xs={12} sm={8} md={5} component={Paper} elevation={6} square>\n                <div className={classes.paper}>\n                    <div>\n                        <h2 className=\"w3-text-red\">AUTO</h2>\n                        <h2>ANNOTATION</h2>\n                    </div>\n\n                    {/* <img src={logo} height='100px' width='100px'></img> */}\n\n                    <Typography component=\"h1\" variant=\"h5\">\n                        Sign in\n          </Typography>\n                    <form className={classes.form} >\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            fullWidth\n                            id=\"email\"\n                            label=\"User Name\"\n                            name=\"email\"\n                            autoComplete=\"email\"\n                            onChange={handleUser}\n                            autoFocus\n                            required\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            fullWidth\n                            name=\"password\"\n                            label=\"Password\"\n                            type=\"password\"\n                            id=\"password\"\n                            onChange={handlePass}\n                            autoComplete=\"current-password\"\n                            required\n                        />\n                        {/* <FormControlLabel\n                                control={<Checkbox value=\"remember\" color=\"primary\" />}\n                                label=\"Remember me\"\n                            /> */}\n                        <Button\n                            type=\"submit\"\n                            fullWidth\n                            onClick={handleSubmit}\n                            variant=\"contained\"\n                            color=\"primary\"\n                            className={classes.submit}\n                        >\n                            Sign In\n                                </Button>\n                        <Grid container>\n                            <Grid item xs>\n                                <Link href=\"/forgot-password\" variant=\"body2\">\n                                    Forgot password?\n                                    </Link>\n                            </Grid>\n                            <Grid item>\n                                <Link href=\"/signup\" variant=\"body2\">\n                                    {\"Don't have an account? Sign Up\"}\n                                </Link>\n                            </Grid>\n                        </Grid>\n                        <Box mt={5}>\n                            <Copyright />\n                        </Box>\n                    </form>\n                </div>\n            </Grid>\n        </Grid>\n\n    );\n}\nexport default withRouter(SignInSide)","import React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport axios from \"axios\";\n// components\nimport Home from \"./components/MainPage/home\";\nimport Routes from \"./Routes\";\nimport SignIn from \"./components/Authentication/signin\"\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: false,\n      username: null\n    };\n\n    this.updateUser = this.updateUser.bind(this);\n  }\n  componentDidMount() {\n    const accessString = localStorage.getItem(\"jwt\");\n\n    axios\n      .get(\"/user\", {\n        headers: {\n          Authorization: `bearer ${accessString}`\n        }\n      })\n      .then(response => {\n        if (response.data.user) {\n          this.setState({ loggedIn: true });\n        }\n      })\n      .catch(e => {\n        if (e.response.data.message === \"jwt expired\") {\n          alert(\"Token has Expired please LogIn again\");\n          return;\n        }\n      });\n  }\n\n  updateUser(userObject) {\n    this.setState(userObject);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {/* <Navbar updateUser={this.updateUser} loggedIn={this.state.loggedIn} /> */}\n        {/* greet user if logged in: */}\n        {/* {this.state.loggedIn && <p>Join the party, {this.state.username}!</p>} */}\n        {/* Routes to different components */}\n        <Route\n          exact\n          path=\"/user\"\n          render={() => <Home updateUser={this.updateUser} loggedIn={this.state.loggedIn} />}\n        />\n        <Route\n        exact\n          path=\"/\"\n          render={() => <SignIn updateUser={this.updateUser} />}\n        />\n        <Routes />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\n\nimport ImageRender from \"../src/components/MainPage/mainpage\"\nimport ErrorBoundary from \"./components/ErrorBoundary/ErrorBoundary\"\n// import * as serviceWorker from \"./serviceWorker\";\n// import \"spectre.css/dist/spectre.min.css\";\n// import \"spectre.css/dist/spectre-icons.css\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <BrowserRouter>\n    {/* <ErrorBoundary> */}\n      <App />\n    {/* </ErrorBoundary> */}\n\n  </BrowserRouter>\n  ,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logo.00d8ec7f.png\";"],"sourceRoot":""}